{"version":3,"sources":["../node_modules/.pnpm/jsonschema@1.4.1/node_modules/jsonschema/lib/helpers.js","../../src/types.ts","../../src/utils.ts","../../src/baseTransaction.ts","../../src/util.ts","../node_modules/.pnpm/jsonschema@1.4.1/node_modules/jsonschema/lib/scan.js","../../src/rpc/walletMidddleware.ts","../../src/rpc/ethRpcMiddlewares.ts","../../src/rpc/jrpcClient.ts","../../src/providers/injectedProviders/walletConnectUtils.ts","../../src/providers/injectedProviders/WalletConnectProvider.ts","../../src/providers/converter.ts","../../src/providers/privateKeyProviders/TransactionFormatter/utils.ts","../../src/providers/privateKeyProviders/ethPrivatekeyUtils.ts","../../src/providers/utils.ts","../../src/providers/privateKeyProviders/TransactionFormatter/constants.ts","../../src/providers/privateKeyProviders/TransactionFormatter/index.ts","../../src/providers/privateKeyProviders/EthereumPrivateKeyProvider.ts","../../src/index.ts","../../src/legacyTransaction.ts","../node_modules/.pnpm/crc-32@1.2.2/node_modules/crc-32/crc32.js","../../../src/chains/index.ts","../../../src/hardforks/index.ts","../../../src/eips/index.ts","../../src/eip2930Transaction.ts","../../src/transactionFactory.ts","../../src/eip1559Transaction.ts","../../src/personal-sign.ts","../../src/sign-typed-data.ts","../node_modules/.pnpm/ethereumjs-abi@0.6.8/node_modules/ethereumjs-abi/index.js","../node_modules/.pnpm/ethereumjs-abi@0.6.8/node_modules/ethereumjs-abi/lib/index.js","../../src/encryption.ts","../node_modules/.pnpm/tweetnacl@1.0.3/node_modules/tweetnacl/nacl-fast.js","../node_modules/.pnpm/tweetnacl-util@0.15.1/node_modules/tweetnacl-util/nacl-util.js","../node_modules/.pnpm/jsonschema@1.4.1/node_modules/jsonschema/lib/index.js","../node_modules/.pnpm/jsonschema@1.4.1/node_modules/jsonschema/lib/validator.js","../node_modules/.pnpm/jsonschema@1.4.1/node_modules/jsonschema/lib/attribute.js"],"names":["uri","require","ValidationError","exports","message","instance","schema","path","name","argument","Array","isArray","this","property","reduce","sum","item","makeSuffix","undefined","id","$id","stack","toString","prototype","ValidatorResult","options","ctx","propertyPath","errors","throwError","throwFirst","throwAll","disableFormat","stringizer","v","i","ValidatorResultError","result","Error","captureStackTrace","addError","detail","err","push","importErrors","res","validatorType","concat","map","join","Object","defineProperty","get","length","module","constructor","SchemaError","msg","call","create","value","enumerable","SchemaContext","base","schemas","resolve","target","makeChild","propertyName","FORMAT_REGEXPS","input","parseFloat","parseInt","isNaN","RegExp","e","regexp","regex","pattern","ipv4","isFormat","format","validator","test","customFormats","key","match","JSON","stringify","deepMerger","dst","deepMerge","indexOf","copyist","src","copyistWithDeepMerge","array","forEach","bind","keys","pathEncoder","encodeURIComponent","replace","deepCompareStrict","a","b","every","aKeys","bKeys","objectGetPath","o","s","k","parts","split","slice","shift","n","decodeURIComponent","encodePath","getDecimalPlaces","number","decimalPlaces","Number","decimalParts","isSchema","val","padWithZeroes","hexString","targetLength","String","padStart","isHexString","toBuffer","Buffer","from","r","rSig","fromSigned","sSig","vSig","bufferToInt","rStr","toUnsigned","sStr","vStr","stripHexPrefix","intToHex","addHexPrefix","messageHash","signature","sigParams","fromRpcSig","ecrecover","buffer","bufferToHex","toLowerCase","urilib","helpers","SchemaScanResult","found","ref","scan","scanSchema","baseuri","$ref","resolvedUri","ourBase","substring","scanArray","items","extends","additionalItems","scanObject","properties","additionalProperties","definitions","patternProperties","dependencies","disallow","allOf","anyOf","oneOf","not","p","resemblesAddress","str","createWalletMiddleware","getAccounts","getPrivateKey","processDecryptMessage","processEncryptionPublicKey","processEthSignMessage","processPersonalMessage","processTransaction","processSignTransaction","processTypedMessage","processTypedMessageV3","processTypedMessageV4","validateAndNormalizeKeyholder","address","req","accounts","normalizedAccounts","_address","normalizedAddress","includes","rpc","invalidParams","ethErrors","methodNotSupported","txParams","params","extraParams","msgParams","data","version","firstParam","secondParam","warning","ciphertext","createScaffoldMiddleware","eth_accounts","createAsyncMiddleware","eth_private_key","eth_coinbase","eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt","createEthMiddleware","providerHandlers","mergeMiddleware","eth_syncing","createChainIdMiddleware","chainId","next","end","method","createProviderConfigMiddleware","providerConfig","createJsonRpcClient","rpcTarget","fetchMiddleware","createFetchMiddleware","networkMiddleware","connector","_","sendTransaction","signTransaction","signMessage","signPersonalMessage","signTypedData","WalletConnectProvider","config","state","chainConfig","chainNamespace","CHAIN_NAMESPACES","EIP155","skipLookupNetwork","provider","custom","code","setupProvider","_providerEngineProxy","request","onConnectorStateUpdate","setupEngine","addChain","lookup","currentChainConfig","getChainConfig","update","displayName","sendCustomRequest","chainName","rpcUrls","log","error","configure","lookupNetwork","WalletInitializationError","notReady","connected","WalletLoginError","notConnectedError","connectedHexChainId","isHexStrict","rpcConnectionError","emit","getProviderHandlers","ethMiddleware","engine","JRPCEngine","providerFromEngine","updateProviderEngineProxy","on","payload","connectedChainId","rpcUrl","maybeConfig","BaseProvider","providerFactory","BIG_NUMBER_WEI_MULTIPLIER","BigNumber","BIG_NUMBER_GWEI_MULTIPLIER","BIG_NUMBER_ETH_MULTIPLIER","toBigNumber","hex","dec","toNormalizedDenomination","WEI","bigNumber","div","GWEI","ETH","toSpecifiedDenomination","times","dp","ROUND_HALF_UP","baseChange","conversionUtil","fromNumericBase","fromDenomination","toNumericBase","toDenomination","numberOfDecimals","convertedValue","ROUND_HALF_DOWN","converter","decGWEIToHexWEI","decGWEI","hexWEIToDecGWEI","normalizeGWEIDecimalNumbers","fetchEip1159GasEstimates","url","estimates","normalizedEstimates","estimatedBaseFee","low","suggestedMaxPriorityFeePerGas","suggestedMaxFeePerGas","medium","high","fetchLegacyGasPriceEstimates","referrer","referrerPolicy","mode","SafeGasPrice","ProposeGasPrice","FastGasPrice","validateTypedMessageParams","parameters","activeChainId","assert","ok","isValidAddress","SignTypedDataVersion","V1","doesNotThrow","parse","typedSignatureHash","V3","V4","primaryType","types","validation","jsonschema","validate","TYPED_MESSAGE_SCHEMA","strictEqual","domain","fail","invalidInput","signTx","privKey","txFormatter","formatTransaction","finalTxParams","getCommonConfiguration","common","unsignedEthTx","fromTxData","signedTx","sign","serialize","getProviderEngineProxy","privateToAddress","providerEngineProxy","txHash","rawMessageSig","privKeyBuffer","sig","personalSign","privateKey","debug","finalChainId","info","getEncryptionPublicKey","stripped","buff","decrypt","encryptedData","bnToHex","inputBn","hexToBn","inputHex","BN","isBN","BnMultiplyByFraction","targetBN","numerator","denominator","numberBN","denomBN","mul","TRANSACTION_ENVELOPE_TYPES","TRANSACTION_TYPES","GAS_ESTIMATE_TYPES","TransactionFormatter","providerProxy","getEIP1559Compatibility","isEIP1559Compatible","hardfork","Hardfork","London","Berlin","customChainParams","networkId","defaultHardfork","Common","clonedTxParams","nonce","gasPrice","maxFeePerGas","maxPriorityFeePerGas","gas","getDefaultGasLimit","defaultGasLimit","gasLimit","getDefaultGasFees","defaultGasPrice","defaultMaxFeePerGas","defaultMaxPriorityFeePerGas","lt","type","latestBlock","supportsEIP1559","baseFeePerGas","isLegacyGasAPICompatible","EIP1559APIEndpoint","gasData","gasFeeEstimates","gasEstimateType","LegacyGasAPIEndpoint","fetchEthGasPriceEstimate","fetchGasFeeEstimateData","txMeta","block","blockGasLimitBN","saferGasLimitBN","estimatedGasHex","estimateTxGas","warn","blockGasLimit","initialGasLimitHex","blockGasLimitHex","multiplier","initialGasLimitBn","blockGasLimitBn","upperGasLimitBn","muln","bufferedGasLimitBn","gt","txParameters","to","txCategory","transactionCategory","determineTransactionCategory","analyzeGasUsage","addGasBuffer","EthereumPrivateKeyProvider","chainSwitchMiddleware","getChainSwitchMiddleware","getAccountMiddleware","init","network","chainDisconnected","chainSwitchHandlers","blockExplorerUrls","nativeCurrency","ticker","symbol","tickerName","blockExplorer","switchChain","chainParams","wallet_addEthereumChain","wallet_switchEthereumChain","createChainSwitchMiddleware","accountHandlers","updatePrivatekey","updateAccount","accountParams","wallet_updateAccount","createAccountMiddleware","factory","CRC32","T0","c","table","Int32Array","signed_crc_table","TT","T","out","subarray","slice_by_16_tables","T1","T2","T3","T4","T5","T6","T7","T8","T9","Ta","Tb","Tc","Td","Te","Tf","bstr","seed","C","L","charCodeAt","buf","B","d","DO_NOT_EXPORT_CRC","concatSig","normalize","getPublicKeyFor","hashPersonalMessage","legacyToBuffer","recoverPublicKey","isNullish","msgHash","ecsign","publicKey","sender","publicToAddress","validateVersion","allowedVersions","encodeField","keccak","encodeData","lastIndexOf","parsedType","typeValuePairs","rawEncode","encodedTypes","encodedValues","hashType","field","encodeType","unsortedDeps","findTypeDependencies","delete","deps","sort","t","results","Set","has","add","hashStruct","sanitizeData","sanitizedData","EIP712Domain","_typedSignatureHash","typedData","soliditySHA3","fill","required","TypedDataUtils","eip712Hash","hashBuffer","utils","ABI","elementaryName","startsWith","parseTypeN","exec","parseTypeNxM","tmp","parseTypeArray","parseNumber","arg","isHexPrefixed","toArray","parseSignature","args","retargs","encodeSingle","size","num","ret","unshift","zeros","setLengthRight","bitLength","toArrayLike","toTwos","pow","decodeSingle","offset","parseType","rawType","bytes","toNumber","decoded","subArray","memoryUsage","fromTwos","mod","isZero","isDynamic","eventID","keccak256","methodID","values","output","headLength","cur","rawDecode","parsed","simpleEncode","arguments","simpleDecode","solidityHexValue","bitsize","subType","arraySize","arrayValues","padding","bytesize","setLengthLeft","solidityPack","soliditySHA256","sha256","solidityRIPEMD160","ripemd160","fromSerpent","j","toSerpent","encrypt","pubKeyUInt8Array","ephemeralKeyPair","nacl","box","keyPair","naclUtil","decodeBase64","msgParamsUInt8Array","decodeUTF8","randomBytes","nonceLength","encryptedMessage","secretKey","encodeBase64","ephemPublicKey","recieverPrivateKeyUint8Array","nacl_decodeHex","recieverEncryptionPrivateKey","fromSecretKey","decryptedMessage","open","encodeUTF8","msgHex","msgBase64","DEFAULT_PADDING_LENGTH","dataWithPadding","modVal","byteLength","padLength","repeat","privateKeyUint8Array","encryptionPublicKey","gf","Float64Array","randombytes","_0","Uint8Array","_9","gf0","gf1","_121665","D","D2","X","Y","I","ts64","x","h","l","vn","xi","y","yi","crypto_verify_16","crypto_verify_32","crypto_core_salsa20","inp","u","j0","j1","j2","j3","j4","j5","j6","j7","j8","j9","j10","j11","j12","j13","j14","j15","x0","x1","x2","x3","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","core_salsa20","crypto_core_hsalsa20","core_hsalsa20","sigma","crypto_stream_salsa20_xor","cpos","m","mpos","z","crypto_stream_salsa20","crypto_stream","sn","crypto_stream_xor","poly1305","t0","t1","t2","t3","t4","t5","t6","t7","Uint16Array","pad","leftover","fin","crypto_onetimeauth","outpos","finish","crypto_onetimeauth_verify","hpos","crypto_secretbox","crypto_secretbox_open","set25519","car25519","Math","floor","sel25519","q","pack25519","neq25519","par25519","unpack25519","A","Z","M","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","S","inv25519","pow2523","crypto_scalarmult","f","x32","x16","crypto_scalarmult_base","crypto_box_keypair","crypto_box_beforenm","blocks","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","hibit","h0","h1","h2","h3","h4","h5","h6","h7","h8","h9","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","mac","macpos","mask","g","want","crypto_box_afternm","crypto_box_open_afternm","K","crypto_hashblocks_hl","hh","hl","bh0","bh1","bh2","bh3","bh4","bh5","bh6","bh7","bl0","bl1","bl2","bl3","bl4","bl5","bl6","bl7","th","tl","wh","wl","ah0","ah1","ah2","ah3","ah4","ah5","ah6","ah7","al0","al1","al2","al3","al4","al5","al6","al7","pos","crypto_hash","cswap","pack","tx","ty","zi","scalarmult","scalarbase","crypto_sign_keypair","pk","sk","seeded","modL","carry","crypto_sign","sm","smlen","crypto_sign_open","chk","den","den2","den4","den6","unpackneg","crypto_secretbox_BOXZEROBYTES","crypto_sign_BYTES","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","checkLengths","checkArrayTypes","TypeError","cleanup","arr","lowlevel","crypto_box","crypto_box_open","crypto_secretbox_KEYBYTES","crypto_secretbox_NONCEBYTES","crypto_secretbox_ZEROBYTES","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SECRETKEYBYTES","crypto_box_BEFORENMBYTES","crypto_box_NONCEBYTES","crypto_box_ZEROBYTES","crypto_box_BOXZEROBYTES","crypto_sign_SEEDBYTES","crypto_hash_BYTES","secretbox","keyLength","overheadLength","scalarMult","scalarLength","groupElementLength","before","checkBoxLengths","after","publicKeyLength","secretKeyLength","sharedKeyLength","signedMsg","mlen","detached","verify","fromSeed","seedLength","signatureLength","hash","hashLength","setPRNG","fn","crypto","self","msCrypto","getRandomValues","min","root","util","validateBase64","unescape","fromCharCode","escape","atob","len","btoa","Validator","attribute","unresolvedRefs","attributes","validators","shouldResolve","addSchema","ourUri","filter","addSubSchemaArray","addSubSchema","addSubSchemaObject","setSchemas","getSchema","urn","sch","validateSchema","schemaobj","schemaTraverser","superResolve","switchSchema","resolved","subctx","subschema","skipAttributes","ignoreProperties","validatorErr","allowUnknownAttributes","rewrite","fragment","document","substr","testType","string","isFinite","integer","boolean","date","Date","any","object","testSchemaNoThrow","callback","valid","Function","getEnumerableProperty","hasOwnProperty","getPrototypeOf","propertyIsEnumerable","testAdditionalProperty","preValidateProperty","some","list","inner","title","nestedErrors","count","if","ifValid","then","else","propertyNames","prop","_e","minProperties","maxProperties","contains","minimum","exclusiveMinimum","maximum","exclusiveMaximum","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","divisorDecimals","maxDecimals","max","round","testArrays","multipleOf","divisibleBy","minLength","hsp","maxLength","minItems","maxItems","uniqueItems","dep","childContext","notTypes","schemaId"],"mappings":"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","file":"static/js/3.ef6ea633.chunk.js","sourcesContent":["'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, path, name, argument) {\n  if(Array.isArray(path)){\n    this.path = path;\n    this.property = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else if(path !== undefined){\n    this.property = path;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    var id = schema.$id || schema.id;\n    this.schema = id || schema;\n  }\n  if (instance !== undefined) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.options = options;\n  this.path = ctx.path;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.throwFirst = options && options.throwFirst;\n  this.throwAll = options && options.throwAll;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.path);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.path, detail.name, detail.argument);\n  }\n\n  this.errors.push(err);\n  if (this.throwFirst) {\n    throw new ValidatorResultError(this);\n  }else if(this.throwError){\n    throw err;\n  }\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    this.errors = this.errors.concat(res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\nmodule.exports.ValidatorResultError = ValidatorResultError;\nfunction ValidatorResultError(result) {\n  if(Error.captureStackTrace){\n    Error.captureStackTrace(this, ValidatorResultError);\n  }\n  this.instance = result.instance;\n  this.schema = result.schema;\n  this.options = result.options;\n  this.errors = result.errors;\n}\nValidatorResultError.prototype = new Error();\nValidatorResultError.prototype.constructor = ValidatorResultError;\nValidatorResultError.prototype.name = \"Validation Error\";\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  {\n    constructor: {value: SchemaError, enumerable: false},\n    name: {value: 'SchemaError', enumerable: false},\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, path, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  if(Array.isArray(path)){\n    this.path = path;\n    this.propertyPath = path.reduce(function(sum, item){\n      return sum + makeSuffix(item);\n    }, 'instance');\n  }else{\n    this.propertyPath = path;\n  }\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var path = (propertyName===undefined) ? this.path : this.path.concat([propertyName]);\n  var id = schema.$id || schema.id;\n  var base = uri.resolve(this.base, id||'');\n  var ctx = new SchemaContext(schema, this.options, path, base, Object.create(this.schemas));\n  if(id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n};\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  // 7.3.1. Dates, Times, and Duration\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n  'duration': /P(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S)|\\d+(D|M(\\d+D)?|Y(\\d+M(\\d+D)?)?)(T\\d+(H(\\d+M(\\d+S)?)?|M(\\d+S)?|S))?|\\d+W)/i,\n\n  // 7.3.2. Email Addresses\n  // TODO: fix the email production\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'idn-email': /^(\"(?:[!#-\\[\\]-\\u{10FFFF}]|\\\\[\\t -\\u{10FFFF}])*\"|[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*)@([!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}](?:\\.?[!#-'*+\\-/-9=?A-Z\\^-\\u{10FFFF}])*|\\[[!-Z\\^-\\u{10FFFF}]*\\])$/u,\n\n  // 7.3.3. Hostnames\n\n  // 7.3.4. IP Addresses\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  // FIXME whitespace is invalid\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n\n  // 7.3.5. Resource Identifiers\n  // TODO: A more accurate regular expression for \"uri\" goes:\n  // [A-Za-z][+\\-.0-9A-Za-z]*:((/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?)?#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])|/?%[0-9A-Fa-f]{2}|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*(#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|/(/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?)?\n  'uri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'uri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/,\n  'iri': /^[a-zA-Z][a-zA-Z0-9+.-]*:[^\\s]*$/,\n  'iri-reference': /^(((([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|(([A-Za-z][+\\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\\u{10FFFF}]|[A-Za-z][+\\-.0-9A-Za-z]*[!$&-*,;=@_~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*)?|([A-Za-z][+\\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}]|[/?])|\\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|([A-Za-z][+\\-.0-9A-Za-z]*:)?\\/((%[0-9A-Fa-f]{2}|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)(:\\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\\u{10FFFF}])*|\\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\\u{10FFFF}])+(:\\d*)?|(\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?:\\d*|\\[(([Vv][0-9A-Fa-f]+\\.[!$&-.0-;=A-Z_a-z~-\\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\\])?)?|[A-Za-z][+\\-.0-9A-Za-z]*:?)?$/u,\n  'uuid': /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n\n  // 7.3.6. uri-template\n  'uri-template': /(%[0-9a-f]{2}|[!#$&(-;=?@\\[\\]_a-z~]|\\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\\d{0,3}|\\*)?)*\\})*/iu,\n\n  // 7.3.7. JSON Pointers\n  'json-pointer': /^(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*$/iu,\n  'relative-json-pointer': /^\\d+(#|(\\/([\\x00-\\x2e0-@\\[-}\\x7f]|~[01])*)*)$/iu,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n\n  // 7.3.8. regex\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n\n  // Other definitions\n  // \"style\" was removed from JSON Schema in draft-4 and is deprecated\n  'style': /[\\r\\n\\t ]*[^\\r\\n\\t ][^:]*:[\\r\\n\\t ]*[^\\r\\n\\t ;]*[\\r\\n\\t ]*;?/,\n  // \"color\" was removed from JSON Schema in draft-4 and is deprecated\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/,\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e);\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e);\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key]);\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n}\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n  // ~ must be encoded explicitly because hacks\n  // the slash is encoded by encodeURIComponent\n  return a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\nexports.isSchema = function isSchema(val){\n  return (typeof val === 'object' && val) || (typeof val === 'boolean');\n};\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.N_DIV_2 = exports.isAccessList = exports.isAccessListBuffer = exports.Capability = void 0;\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\n/**\n * Can be used in conjunction with {@link Transaction.supports}\n * to query on tx capabilities\n */\nvar Capability;\n(function (Capability) {\n    /**\n     * Tx supports EIP-155 replay protection\n     * See: [155](https://eips.ethereum.org/EIPS/eip-155) Replay Attack Protection EIP\n     */\n    Capability[Capability[\"EIP155ReplayProtection\"] = 155] = \"EIP155ReplayProtection\";\n    /**\n     * Tx supports EIP-1559 gas fee market mechansim\n     * See: [1559](https://eips.ethereum.org/EIPS/eip-1559) Fee Market EIP\n     */\n    Capability[Capability[\"EIP1559FeeMarket\"] = 1559] = \"EIP1559FeeMarket\";\n    /**\n     * Tx is a typed transaction as defined in EIP-2718\n     * See: [2718](https://eips.ethereum.org/EIPS/eip-2718) Transaction Type EIP\n     */\n    Capability[Capability[\"EIP2718TypedTransaction\"] = 2718] = \"EIP2718TypedTransaction\";\n    /**\n     * Tx supports access list generation as defined in EIP-2930\n     * See: [2930](https://eips.ethereum.org/EIPS/eip-2930) Access Lists EIP\n     */\n    Capability[Capability[\"EIP2930AccessLists\"] = 2930] = \"EIP2930AccessLists\";\n})(Capability = exports.Capability || (exports.Capability = {}));\nfunction isAccessListBuffer(input) {\n    if (input.length === 0) {\n        return true;\n    }\n    var firstItem = input[0];\n    if (Array.isArray(firstItem)) {\n        return true;\n    }\n    return false;\n}\nexports.isAccessListBuffer = isAccessListBuffer;\nfunction isAccessList(input) {\n    return !isAccessListBuffer(input); // This is exactly the same method, except the output is negated.\n}\nexports.isAccessList = isAccessList;\n/**\n * A const defining secp256k1n/2\n */\nexports.N_DIV_2 = new ethereumjs_util_1.BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0', 16);\n//# sourceMappingURL=types.js.map","import {\n  addHexPrefix,\n  bufferToHex,\n  bufferToInt,\n  ecrecover,\n  fromRpcSig,\n  fromSigned,\n  toBuffer,\n  toUnsigned,\n} from 'ethereumjs-util';\nimport { intToHex, isHexString, stripHexPrefix } from 'ethjs-util';\n\n/**\n * Pads the front of the given hex string with zeroes until it reaches the\n * target length. If the input string is already longer than or equal to the\n * target length, it is returned unmodified.\n *\n * If the input string is \"0x\"-prefixed or not a hex string, an error will be\n * thrown.\n *\n * @param hexString - The hexadecimal string to pad with zeroes.\n * @param targetLength - The target length of the hexadecimal string.\n * @returns The input string front-padded with zeroes, or the original string\n * if it was already greater than or equal to to the target length.\n */\nexport function padWithZeroes(hexString: string, targetLength: number): string {\n  if (hexString !== '' && !/^[a-f0-9]+$/iu.test(hexString)) {\n    throw new Error(\n      `Expected an unprefixed hex string. Received: ${hexString}`,\n    );\n  }\n\n  if (targetLength < 0) {\n    throw new Error(\n      `Expected a non-negative integer target length. Received: ${targetLength}`,\n    );\n  }\n\n  return String.prototype.padStart.call(hexString, targetLength, '0');\n}\n\n/**\n * Returns `true` if the given value is nullish.\n *\n * @param value - The value being checked.\n * @returns Whether the value is nullish.\n */\nexport function isNullish(value) {\n  return value === null || value === undefined;\n}\n\n/**\n * Convert a value to a Buffer. This function should be equivalent to the `toBuffer` function in\n * `ethereumjs-util@5.2.1`.\n *\n * @param value - The value to convert to a Buffer.\n * @returns The given value as a Buffer.\n */\nexport function legacyToBuffer(value: unknown) {\n  return typeof value === 'string' && !isHexString(value)\n    ? Buffer.from(value)\n    : toBuffer(value);\n}\n\n/**\n * Concatenate an extended ECDSA signature into a single '0x'-prefixed hex string.\n *\n * @param v - The 'v' portion of the signature.\n * @param r - The 'r' portion of the signature.\n * @param s - The 's' portion of the signature.\n * @returns The concatenated ECDSA signature as a '0x'-prefixed string.\n */\nexport function concatSig(v: Buffer, r: Buffer, s: Buffer): string {\n  const rSig = fromSigned(r);\n  const sSig = fromSigned(s);\n  const vSig = bufferToInt(v);\n  const rStr = padWithZeroes(toUnsigned(rSig).toString('hex'), 64);\n  const sStr = padWithZeroes(toUnsigned(sSig).toString('hex'), 64);\n  const vStr = stripHexPrefix(intToHex(vSig));\n  return addHexPrefix(rStr.concat(sStr, vStr));\n}\n\n/**\n * Recover the public key from the given signature and message hash.\n *\n * @param messageHash - The hash of the signed message.\n * @param signature - The signature.\n * @returns The public key of the signer.\n */\nexport function recoverPublicKey(\n  messageHash: Buffer,\n  signature: string,\n): Buffer {\n  const sigParams = fromRpcSig(signature);\n  return ecrecover(messageHash, sigParams.v, sigParams.r, sigParams.s);\n}\n\n/**\n * Normalize the input to a lower-cased '0x'-prefixed hex string.\n *\n * @param input - The value to normalize.\n * @returns The normalized value.\n */\nexport function normalize(input: number | string): string {\n  if (!input) {\n    return undefined;\n  }\n\n  if (typeof input === 'number') {\n    const buffer = toBuffer(input);\n    input = bufferToHex(buffer);\n  }\n\n  if (typeof input !== 'string') {\n    let msg = 'eth-sig-util.normalize() requires hex string or integer input.';\n    msg += ` received ${typeof input}: ${input}`;\n    throw new Error(msg);\n  }\n\n  return addHexPrefix(input.toLowerCase());\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseTransaction = void 0;\nvar common_1 = __importStar(require(\"@ethereumjs/common\"));\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar types_1 = require(\"./types\");\n/**\n * This base class will likely be subject to further\n * refactoring along the introduction of additional tx types\n * on the Ethereum network.\n *\n * It is therefore not recommended to use directly.\n */\nvar BaseTransaction = /** @class */ (function () {\n    function BaseTransaction(txData, opts) {\n        this.cache = {\n            hash: undefined,\n            dataFee: undefined,\n        };\n        /**\n         * List of tx type defining EIPs,\n         * e.g. 1559 (fee market) and 2930 (access lists)\n         * for FeeMarketEIP1559Transaction objects\n         */\n        this.activeCapabilities = [];\n        /**\n         * The default chain the tx falls back to if no Common\n         * is provided and if the chain can't be derived from\n         * a passed in chainId (only EIP-2718 typed txs) or\n         * EIP-155 signature (legacy txs).\n         *\n         * @hidden\n         */\n        this.DEFAULT_CHAIN = common_1.Chain.Mainnet;\n        /**\n         * The default HF if the tx type is active on that HF\n         * or the first greater HF where the tx is active.\n         *\n         * @hidden\n         */\n        this.DEFAULT_HARDFORK = common_1.Hardfork.Istanbul;\n        var nonce = txData.nonce, gasLimit = txData.gasLimit, to = txData.to, value = txData.value, data = txData.data, v = txData.v, r = txData.r, s = txData.s, type = txData.type;\n        this._type = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(type)).toNumber();\n        this.txOptions = opts;\n        var toB = (0, ethereumjs_util_1.toBuffer)(to === '' ? '0x' : to);\n        var vB = (0, ethereumjs_util_1.toBuffer)(v === '' ? '0x' : v);\n        var rB = (0, ethereumjs_util_1.toBuffer)(r === '' ? '0x' : r);\n        var sB = (0, ethereumjs_util_1.toBuffer)(s === '' ? '0x' : s);\n        this.nonce = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(nonce === '' ? '0x' : nonce));\n        this.gasLimit = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(gasLimit === '' ? '0x' : gasLimit));\n        this.to = toB.length > 0 ? new ethereumjs_util_1.Address(toB) : undefined;\n        this.value = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(value === '' ? '0x' : value));\n        this.data = (0, ethereumjs_util_1.toBuffer)(data === '' ? '0x' : data);\n        this.v = vB.length > 0 ? new ethereumjs_util_1.BN(vB) : undefined;\n        this.r = rB.length > 0 ? new ethereumjs_util_1.BN(rB) : undefined;\n        this.s = sB.length > 0 ? new ethereumjs_util_1.BN(sB) : undefined;\n        this._validateCannotExceedMaxInteger({ value: this.value, r: this.r, s: this.s });\n        // geth limits gasLimit to 2^64-1\n        this._validateCannotExceedMaxInteger({ gasLimit: this.gasLimit }, 64);\n        // EIP-2681 limits nonce to 2^64-1 (cannot equal 2^64-1)\n        this._validateCannotExceedMaxInteger({ nonce: this.nonce }, 64, true);\n    }\n    Object.defineProperty(BaseTransaction.prototype, \"transactionType\", {\n        /**\n         * Alias for {@link BaseTransaction.type}\n         *\n         * @deprecated Use `type` instead\n         */\n        get: function () {\n            return this.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseTransaction.prototype, \"type\", {\n        /**\n         * Returns the transaction type.\n         *\n         * Note: legacy txs will return tx type `0`.\n         */\n        get: function () {\n            return this._type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Checks if a tx type defining capability is active\n     * on a tx, for example the EIP-1559 fee market mechanism\n     * or the EIP-2930 access list feature.\n     *\n     * Note that this is different from the tx type itself,\n     * so EIP-2930 access lists can very well be active\n     * on an EIP-1559 tx for example.\n     *\n     * This method can be useful for feature checks if the\n     * tx type is unknown (e.g. when instantiated with\n     * the tx factory).\n     *\n     * See `Capabilites` in the `types` module for a reference\n     * on all supported capabilities.\n     */\n    BaseTransaction.prototype.supports = function (capability) {\n        return this.activeCapabilities.includes(capability);\n    };\n    BaseTransaction.prototype.validate = function (stringError) {\n        if (stringError === void 0) { stringError = false; }\n        var errors = [];\n        if (this.getBaseFee().gt(this.gasLimit)) {\n            errors.push(\"gasLimit is too low. given \".concat(this.gasLimit, \", need at least \").concat(this.getBaseFee()));\n        }\n        if (this.isSigned() && !this.verifySignature()) {\n            errors.push('Invalid Signature');\n        }\n        return stringError ? errors : errors.length === 0;\n    };\n    /**\n     * The minimum amount of gas the tx must have (DataFee + TxFee + Creation Fee)\n     */\n    BaseTransaction.prototype.getBaseFee = function () {\n        var fee = this.getDataFee().addn(this.common.param('gasPrices', 'tx'));\n        if (this.common.gteHardfork('homestead') && this.toCreationAddress()) {\n            fee.iaddn(this.common.param('gasPrices', 'txCreation'));\n        }\n        return fee;\n    };\n    /**\n     * The amount of gas paid for the data in this tx\n     */\n    BaseTransaction.prototype.getDataFee = function () {\n        var txDataZero = this.common.param('gasPrices', 'txDataZero');\n        var txDataNonZero = this.common.param('gasPrices', 'txDataNonZero');\n        var cost = 0;\n        for (var i = 0; i < this.data.length; i++) {\n            this.data[i] === 0 ? (cost += txDataZero) : (cost += txDataNonZero);\n        }\n        cost = new ethereumjs_util_1.BN(cost);\n        if ((this.to === undefined || this.to === null) && this.common.isActivatedEIP(3860)) {\n            var dataLength = Math.ceil(this.data.length / 32);\n            var initCodeCost = new ethereumjs_util_1.BN(this.common.param('gasPrices', 'initCodeWordCost')).imuln(dataLength);\n            cost.iadd(initCodeCost);\n        }\n        return cost;\n    };\n    /**\n     * If the tx's `to` is to the creation address\n     */\n    BaseTransaction.prototype.toCreationAddress = function () {\n        return this.to === undefined || this.to.buf.length === 0;\n    };\n    BaseTransaction.prototype.isSigned = function () {\n        var _a = this, v = _a.v, r = _a.r, s = _a.s;\n        if (this.type === 0) {\n            if (!v || !r || !s) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            if (v === undefined || !r || !s) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n    };\n    /**\n     * Determines if the signature is valid\n     */\n    BaseTransaction.prototype.verifySignature = function () {\n        try {\n            // Main signature verification is done in `getSenderPublicKey()`\n            var publicKey = this.getSenderPublicKey();\n            return (0, ethereumjs_util_1.unpadBuffer)(publicKey).length !== 0;\n        }\n        catch (e) {\n            return false;\n        }\n    };\n    /**\n     * Returns the sender's address\n     */\n    BaseTransaction.prototype.getSenderAddress = function () {\n        return new ethereumjs_util_1.Address((0, ethereumjs_util_1.publicToAddress)(this.getSenderPublicKey()));\n    };\n    /**\n     * Signs a transaction.\n     *\n     * Note that the signed tx is returned as a new object,\n     * use as follows:\n     * ```javascript\n     * const signedTx = tx.sign(privateKey)\n     * ```\n     */\n    BaseTransaction.prototype.sign = function (privateKey) {\n        if (privateKey.length !== 32) {\n            var msg = this._errorMsg('Private key must be 32 bytes in length.');\n            throw new Error(msg);\n        }\n        // Hack for the constellation that we have got a legacy tx after spuriousDragon with a non-EIP155 conforming signature\n        // and want to recreate a signature (where EIP155 should be applied)\n        // Leaving this hack lets the legacy.spec.ts -> sign(), verifySignature() test fail\n        // 2021-06-23\n        var hackApplied = false;\n        if (this.type === 0 &&\n            this.common.gteHardfork('spuriousDragon') &&\n            !this.supports(types_1.Capability.EIP155ReplayProtection)) {\n            this.activeCapabilities.push(types_1.Capability.EIP155ReplayProtection);\n            hackApplied = true;\n        }\n        var msgHash = this.getMessageToSign(true);\n        var _a = (0, ethereumjs_util_1.ecsign)(msgHash, privateKey), v = _a.v, r = _a.r, s = _a.s;\n        var tx = this._processSignature(v, r, s);\n        // Hack part 2\n        if (hackApplied) {\n            var index = this.activeCapabilities.indexOf(types_1.Capability.EIP155ReplayProtection);\n            if (index > -1) {\n                this.activeCapabilities.splice(index, 1);\n            }\n        }\n        return tx;\n    };\n    /**\n     * Does chain ID checks on common and returns a common\n     * to be used on instantiation\n     * @hidden\n     *\n     * @param common - {@link Common} instance from tx options\n     * @param chainId - Chain ID from tx options (typed txs) or signature (legacy tx)\n     */\n    BaseTransaction.prototype._getCommon = function (common, chainId) {\n        var _a;\n        // Chain ID provided\n        if (chainId) {\n            var chainIdBN = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(chainId));\n            if (common) {\n                if (!common.chainIdBN().eq(chainIdBN)) {\n                    var msg = this._errorMsg('The chain ID does not match the chain ID of Common');\n                    throw new Error(msg);\n                }\n                // Common provided, chain ID does match\n                // -> Return provided Common\n                return common.copy();\n            }\n            else {\n                if (common_1.default.isSupportedChainId(chainIdBN)) {\n                    // No Common, chain ID supported by Common\n                    // -> Instantiate Common with chain ID\n                    return new common_1.default({ chain: chainIdBN, hardfork: this.DEFAULT_HARDFORK });\n                }\n                else {\n                    // No Common, chain ID not supported by Common\n                    // -> Instantiate custom Common derived from DEFAULT_CHAIN\n                    return common_1.default.forCustomChain(this.DEFAULT_CHAIN, {\n                        name: 'custom-chain',\n                        networkId: chainIdBN,\n                        chainId: chainIdBN,\n                    }, this.DEFAULT_HARDFORK);\n                }\n            }\n        }\n        else {\n            // No chain ID provided\n            // -> return Common provided or create new default Common\n            return ((_a = common === null || common === void 0 ? void 0 : common.copy()) !== null && _a !== void 0 ? _a : new common_1.default({ chain: this.DEFAULT_CHAIN, hardfork: this.DEFAULT_HARDFORK }));\n        }\n    };\n    /**\n     * Validates that an object with BN values cannot exceed the specified bit limit.\n     * @param values Object containing string keys and BN values\n     * @param bits Number of bits to check (64 or 256)\n     * @param cannotEqual Pass true if the number also cannot equal one less the maximum value\n     */\n    BaseTransaction.prototype._validateCannotExceedMaxInteger = function (values, bits, cannotEqual) {\n        var e_1, _a;\n        if (bits === void 0) { bits = 256; }\n        if (cannotEqual === void 0) { cannotEqual = false; }\n        try {\n            for (var _b = __values(Object.entries(values)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), key = _d[0], value = _d[1];\n                switch (bits) {\n                    case 64:\n                        if (cannotEqual) {\n                            if (value === null || value === void 0 ? void 0 : value.gte(ethereumjs_util_1.MAX_UINT64)) {\n                                var msg = this._errorMsg(\"\".concat(key, \" cannot equal or exceed MAX_UINT64 (2^64-1), given \").concat(value));\n                                throw new Error(msg);\n                            }\n                        }\n                        else {\n                            if (value === null || value === void 0 ? void 0 : value.gt(ethereumjs_util_1.MAX_UINT64)) {\n                                var msg = this._errorMsg(\"\".concat(key, \" cannot exceed MAX_UINT64 (2^64-1), given \").concat(value));\n                                throw new Error(msg);\n                            }\n                        }\n                        break;\n                    case 256:\n                        if (cannotEqual) {\n                            if (value === null || value === void 0 ? void 0 : value.gte(ethereumjs_util_1.MAX_INTEGER)) {\n                                var msg = this._errorMsg(\"\".concat(key, \" cannot equal or exceed MAX_INTEGER (2^256-1), given \").concat(value));\n                                throw new Error(msg);\n                            }\n                        }\n                        else {\n                            if (value === null || value === void 0 ? void 0 : value.gt(ethereumjs_util_1.MAX_INTEGER)) {\n                                var msg = this._errorMsg(\"\".concat(key, \" cannot exceed MAX_INTEGER (2^256-1), given \").concat(value));\n                                throw new Error(msg);\n                            }\n                        }\n                        break;\n                    default: {\n                        var msg = this._errorMsg('unimplemented bits value');\n                        throw new Error(msg);\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * Returns the shared error postfix part for _error() method\n     * tx type implementations.\n     */\n    BaseTransaction.prototype._getSharedErrorPostfix = function () {\n        var hash = '';\n        try {\n            hash = this.isSigned() ? (0, ethereumjs_util_1.bufferToHex)(this.hash()) : 'not available (unsigned)';\n        }\n        catch (e) {\n            hash = 'error';\n        }\n        var isSigned = '';\n        try {\n            isSigned = this.isSigned().toString();\n        }\n        catch (e) {\n            hash = 'error';\n        }\n        var hf = '';\n        try {\n            hf = this.common.hardfork();\n        }\n        catch (e) {\n            hf = 'error';\n        }\n        var postfix = \"tx type=\".concat(this.type, \" hash=\").concat(hash, \" nonce=\").concat(this.nonce, \" value=\").concat(this.value, \" \");\n        postfix += \"signed=\".concat(isSigned, \" hf=\").concat(hf);\n        return postfix;\n    };\n    return BaseTransaction;\n}());\nexports.BaseTransaction = BaseTransaction;\n//# sourceMappingURL=baseTransaction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AccessLists = exports.checkMaxInitCodeSize = void 0;\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar types_1 = require(\"./types\");\nfunction checkMaxInitCodeSize(common, length) {\n    if (length > common.param('vm', 'maxInitCodeSize')) {\n        throw new Error(\"the initcode size of this transaction is too large: it is \".concat(length, \" while the max is \").concat(common.param('vm', 'maxInitCodeSize')));\n    }\n}\nexports.checkMaxInitCodeSize = checkMaxInitCodeSize;\nvar AccessLists = /** @class */ (function () {\n    function AccessLists() {\n    }\n    AccessLists.getAccessListData = function (accessList) {\n        var AccessListJSON;\n        var bufferAccessList;\n        if (accessList && (0, types_1.isAccessList)(accessList)) {\n            AccessListJSON = accessList;\n            var newAccessList = [];\n            for (var i = 0; i < accessList.length; i++) {\n                var item = accessList[i];\n                var addressBuffer = (0, ethereumjs_util_1.toBuffer)(item.address);\n                var storageItems = [];\n                for (var index = 0; index < item.storageKeys.length; index++) {\n                    storageItems.push((0, ethereumjs_util_1.toBuffer)(item.storageKeys[index]));\n                }\n                newAccessList.push([addressBuffer, storageItems]);\n            }\n            bufferAccessList = newAccessList;\n        }\n        else {\n            bufferAccessList = accessList !== null && accessList !== void 0 ? accessList : [];\n            // build the JSON\n            var json = [];\n            for (var i = 0; i < bufferAccessList.length; i++) {\n                var data = bufferAccessList[i];\n                var address = (0, ethereumjs_util_1.bufferToHex)(data[0]);\n                var storageKeys = [];\n                for (var item = 0; item < data[1].length; item++) {\n                    storageKeys.push((0, ethereumjs_util_1.bufferToHex)(data[1][item]));\n                }\n                var jsonItem = {\n                    address: address,\n                    storageKeys: storageKeys,\n                };\n                json.push(jsonItem);\n            }\n            AccessListJSON = json;\n        }\n        return {\n            AccessListJSON: AccessListJSON,\n            accessList: bufferAccessList,\n        };\n    };\n    AccessLists.verifyAccessList = function (accessList) {\n        for (var key = 0; key < accessList.length; key++) {\n            var accessListItem = accessList[key];\n            var address = accessListItem[0];\n            var storageSlots = accessListItem[1];\n            if (accessListItem[2] !== undefined) {\n                throw new Error('Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.');\n            }\n            if (address.length != 20) {\n                throw new Error('Invalid EIP-2930 transaction: address length should be 20 bytes');\n            }\n            for (var storageSlot = 0; storageSlot < storageSlots.length; storageSlot++) {\n                if (storageSlots[storageSlot].length != 32) {\n                    throw new Error('Invalid EIP-2930 transaction: storage slot length should be 32 bytes');\n                }\n            }\n        }\n    };\n    AccessLists.getAccessListJSON = function (accessList) {\n        var accessListJSON = [];\n        for (var index = 0; index < accessList.length; index++) {\n            var item = accessList[index];\n            var JSONItem = {\n                address: '0x' + (0, ethereumjs_util_1.setLengthLeft)(item[0], 20).toString('hex'),\n                storageKeys: [],\n            };\n            var storageSlots = item[1];\n            for (var slot = 0; slot < storageSlots.length; slot++) {\n                var storageSlot = storageSlots[slot];\n                JSONItem.storageKeys.push('0x' + (0, ethereumjs_util_1.setLengthLeft)(storageSlot, 32).toString('hex'));\n            }\n            accessListJSON.push(JSONItem);\n        }\n        return accessListJSON;\n    };\n    AccessLists.getDataFeeEIP2930 = function (accessList, common) {\n        var accessListStorageKeyCost = common.param('gasPrices', 'accessListStorageKeyCost');\n        var accessListAddressCost = common.param('gasPrices', 'accessListAddressCost');\n        var slots = 0;\n        for (var index = 0; index < accessList.length; index++) {\n            var item = accessList[index];\n            var storageSlots = item[1];\n            slots += storageSlots.length;\n        }\n        var addresses = accessList.length;\n        return addresses * accessListAddressCost + slots * accessListStorageKeyCost;\n    };\n    return AccessLists;\n}());\nexports.AccessLists = AccessLists;\n//# sourceMappingURL=util.js.map","\"use strict\";\n\nvar urilib = require('url');\nvar helpers = require('./helpers');\n\nmodule.exports.SchemaScanResult = SchemaScanResult;\nfunction SchemaScanResult(found, ref){\n  this.id = found;\n  this.ref = ref;\n}\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param string uri\n * @param object schema\n * @return {Object}\n */\nmodule.exports.scan = function scan(base, schema){\n  function scanSchema(baseuri, schema){\n    if(!schema || typeof schema!='object') return;\n    // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n    if(schema.$ref){\n      var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n      ref[resolvedUri] = ref[resolvedUri] ? ref[resolvedUri]+1 : 0;\n      return;\n    }\n    var id = schema.$id || schema.id;\n    var ourBase = id ? urilib.resolve(baseuri, id) : baseuri;\n    if (ourBase) {\n      // If there's no fragment, append an empty one\n      if(ourBase.indexOf('#')<0) ourBase += '#';\n      if(found[ourBase]){\n        if(!helpers.deepCompareStrict(found[ourBase], schema)){\n          throw new Error('Schema <'+ourBase+'> already exists with different definition');\n        }\n        return found[ourBase];\n      }\n      found[ourBase] = schema;\n      // strip trailing fragment\n      if(ourBase[ourBase.length-1]=='#'){\n        found[ourBase.substring(0, ourBase.length-1)] = schema;\n      }\n    }\n    scanArray(ourBase+'/items', (Array.isArray(schema.items)?schema.items:[schema.items]));\n    scanArray(ourBase+'/extends', (Array.isArray(schema.extends)?schema.extends:[schema.extends]));\n    scanSchema(ourBase+'/additionalItems', schema.additionalItems);\n    scanObject(ourBase+'/properties', schema.properties);\n    scanSchema(ourBase+'/additionalProperties', schema.additionalProperties);\n    scanObject(ourBase+'/definitions', schema.definitions);\n    scanObject(ourBase+'/patternProperties', schema.patternProperties);\n    scanObject(ourBase+'/dependencies', schema.dependencies);\n    scanArray(ourBase+'/disallow', schema.disallow);\n    scanArray(ourBase+'/allOf', schema.allOf);\n    scanArray(ourBase+'/anyOf', schema.anyOf);\n    scanArray(ourBase+'/oneOf', schema.oneOf);\n    scanSchema(ourBase+'/not', schema.not);\n  }\n  function scanArray(baseuri, schemas){\n    if(!Array.isArray(schemas)) return;\n    for(var i=0; i<schemas.length; i++){\n      scanSchema(baseuri+'/'+i, schemas[i]);\n    }\n  }\n  function scanObject(baseuri, schemas){\n    if(!schemas || typeof schemas!='object') return;\n    for(var p in schemas){\n      scanSchema(baseuri+'/'+p, schemas[p]);\n    }\n  }\n\n  var found = {};\n  var ref = {};\n  scanSchema(base, schema);\n  return new SchemaScanResult(found, ref);\n};\n","import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport { createFetchMiddleware, providerFromEngine, signMessage } from '@toruslabs/base-controllers';\nimport { createScaffoldMiddleware, createAsyncMiddleware, mergeMiddleware, JRPCEngine } from '@toruslabs/openlogin-jrpc';\nimport { CHAIN_NAMESPACES, log, WalletInitializationError, isHexStrict, WalletLoginError, getChainConfig } from '@web3auth/base';\nimport { BaseProvider } from '@web3auth/base-provider';\nimport { ethErrors } from 'eth-rpc-errors';\nimport { TransactionFactory } from '@ethereumjs/tx';\nimport { SignTypedDataVersion, TYPED_MESSAGE_SCHEMA, typedSignatureHash, personalSign, signTypedData, getEncryptionPublicKey, decrypt } from '@metamask/eth-sig-util';\nimport { stripHexPrefix, isValidAddress, privateToAddress, addHexPrefix, BN } from 'ethereumjs-util';\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport { get } from '@toruslabs/http-helpers';\nimport assert from 'assert';\nimport jsonschema from 'jsonschema';\nimport BigNumber, { BigNumber as BigNumber$1 } from 'bignumber.js';\nimport Common, { Hardfork } from '@ethereumjs/common';\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$5(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction resemblesAddress(str) {\n  // hex prefix 2 + 20 bytes\n  return str.length === 2 + 20 * 2;\n}\n\nfunction createWalletMiddleware(_ref) {\n  var getAccounts = _ref.getAccounts,\n      getPrivateKey = _ref.getPrivateKey,\n      processDecryptMessage = _ref.processDecryptMessage,\n      processEncryptionPublicKey = _ref.processEncryptionPublicKey,\n      processEthSignMessage = _ref.processEthSignMessage,\n      processPersonalMessage = _ref.processPersonalMessage,\n      processTransaction = _ref.processTransaction,\n      processSignTransaction = _ref.processSignTransaction,\n      processTypedMessage = _ref.processTypedMessage,\n      processTypedMessageV3 = _ref.processTypedMessageV3,\n      processTypedMessageV4 = _ref.processTypedMessageV4;\n\n  if (!getAccounts) {\n    throw new Error(\"opts.getAccounts is required\");\n  } //\n  // utility\n  //\n\n  /**\n   * Validates the keyholder address, and returns a normalized (i.e. lowercase)\n   * copy of it.\n   *\n   * an error\n   */\n\n\n  function validateAndNormalizeKeyholder(_x, _x2) {\n    return _validateAndNormalizeKeyholder.apply(this, arguments);\n  } //\n  // account lookups\n  //\n\n\n  function _validateAndNormalizeKeyholder() {\n    _validateAndNormalizeKeyholder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(address, req) {\n      var accounts, normalizedAccounts, normalizedAddress;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(typeof address === \"string\" && address.length > 0)) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 3;\n              return getAccounts(req);\n\n            case 3:\n              accounts = _context.sent;\n              normalizedAccounts = accounts.map(function (_address) {\n                return _address.toLowerCase();\n              });\n              normalizedAddress = address.toLowerCase();\n\n              if (!normalizedAccounts.includes(normalizedAddress)) {\n                _context.next = 8;\n                break;\n              }\n\n              return _context.abrupt(\"return\", normalizedAddress);\n\n            case 8:\n              throw ethErrors.rpc.invalidParams({\n                message: \"Invalid parameters: must provide an Ethereum address.\"\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _validateAndNormalizeKeyholder.apply(this, arguments);\n  }\n\n  function lookupAccounts(_x3, _x4) {\n    return _lookupAccounts.apply(this, arguments);\n  }\n\n  function _lookupAccounts() {\n    _lookupAccounts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(req, res) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getAccounts(req);\n\n            case 2:\n              res.result = _context2.sent;\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _lookupAccounts.apply(this, arguments);\n  }\n\n  function lookupDefaultAccount(_x5, _x6) {\n    return _lookupDefaultAccount.apply(this, arguments);\n  } //\n  // transaction signatures\n  //\n\n\n  function _lookupDefaultAccount() {\n    _lookupDefaultAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(req, res) {\n      var accounts;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return getAccounts(req);\n\n            case 2:\n              accounts = _context3.sent;\n              res.result = accounts[0] || null;\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _lookupDefaultAccount.apply(this, arguments);\n  }\n\n  function sendTransaction(_x7, _x8) {\n    return _sendTransaction.apply(this, arguments);\n  }\n\n  function _sendTransaction() {\n    _sendTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(req, res) {\n      var txParams;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (processTransaction) {\n                _context4.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              txParams = req.params[0] || {\n                from: \"\"\n              };\n              _context4.next = 5;\n              return validateAndNormalizeKeyholder(txParams.from, req);\n\n            case 5:\n              txParams.from = _context4.sent;\n              _context4.next = 8;\n              return processTransaction(txParams, req);\n\n            case 8:\n              res.result = _context4.sent;\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _sendTransaction.apply(this, arguments);\n  }\n\n  function signTransaction(_x9, _x10) {\n    return _signTransaction.apply(this, arguments);\n  } //\n  // message signatures\n  //\n\n\n  function _signTransaction() {\n    _signTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(req, res) {\n      var txParams;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              if (processSignTransaction) {\n                _context5.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              txParams = req.params[0] || {\n                from: \"\"\n              };\n              _context5.next = 5;\n              return validateAndNormalizeKeyholder(txParams.from, req);\n\n            case 5:\n              txParams.from = _context5.sent;\n              _context5.next = 8;\n              return processSignTransaction(txParams, req);\n\n            case 8:\n              res.result = _context5.sent;\n\n            case 9:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _signTransaction.apply(this, arguments);\n  }\n\n  function ethSign(_x11, _x12) {\n    return _ethSign.apply(this, arguments);\n  }\n\n  function _ethSign() {\n    _ethSign = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(req, res) {\n      var address, message, extraParams, msgParams;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              if (processEthSignMessage) {\n                _context6.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              _context6.next = 4;\n              return validateAndNormalizeKeyholder(req.params[0], req);\n\n            case 4:\n              address = _context6.sent;\n              message = req.params[1];\n              extraParams = req.params[2] || {};\n              msgParams = _objectSpread$5(_objectSpread$5({}, extraParams), {}, {\n                from: address,\n                data: message\n              });\n              _context6.next = 10;\n              return processEthSignMessage(msgParams, req);\n\n            case 10:\n              res.result = _context6.sent;\n\n            case 11:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _ethSign.apply(this, arguments);\n  }\n\n  function signTypedData(_x13, _x14) {\n    return _signTypedData.apply(this, arguments);\n  }\n\n  function _signTypedData() {\n    _signTypedData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(req, res) {\n      var message, address, version, extraParams, msgParams;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              if (processTypedMessage) {\n                _context7.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              message = req.params[0];\n              _context7.next = 5;\n              return validateAndNormalizeKeyholder(req.params[1], req);\n\n            case 5:\n              address = _context7.sent;\n              version = \"V1\";\n              extraParams = req.params[2] || {};\n              msgParams = _objectSpread$5(_objectSpread$5({}, extraParams), {}, {\n                from: address,\n                data: message\n              });\n              _context7.next = 11;\n              return processTypedMessage(msgParams, req, version);\n\n            case 11:\n              res.result = _context7.sent;\n\n            case 12:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return _signTypedData.apply(this, arguments);\n  }\n\n  function signTypedDataV3(_x15, _x16) {\n    return _signTypedDataV.apply(this, arguments);\n  }\n\n  function _signTypedDataV() {\n    _signTypedDataV = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(req, res) {\n      var address, message, version, msgParams;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              if (processTypedMessageV3) {\n                _context8.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              _context8.next = 4;\n              return validateAndNormalizeKeyholder(req.params[0], req);\n\n            case 4:\n              address = _context8.sent;\n              message = req.params[1];\n              version = \"V3\";\n              msgParams = {\n                data: message,\n                from: address,\n                version: version\n              };\n              _context8.next = 10;\n              return processTypedMessageV3(msgParams, req, version);\n\n            case 10:\n              res.result = _context8.sent;\n\n            case 11:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n    return _signTypedDataV.apply(this, arguments);\n  }\n\n  function signTypedDataV4(_x17, _x18) {\n    return _signTypedDataV2.apply(this, arguments);\n  }\n\n  function _signTypedDataV2() {\n    _signTypedDataV2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(req, res) {\n      var address, message, version, msgParams;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (processTypedMessageV4) {\n                _context9.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              _context9.next = 4;\n              return validateAndNormalizeKeyholder(req.params[0], req);\n\n            case 4:\n              address = _context9.sent;\n              message = req.params[1];\n              version = \"V4\";\n              msgParams = {\n                data: message,\n                from: address,\n                version: version\n              };\n              _context9.next = 10;\n              return processTypedMessageV4(msgParams, req, version);\n\n            case 10:\n              res.result = _context9.sent;\n\n            case 11:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n    return _signTypedDataV2.apply(this, arguments);\n  }\n\n  function personalSign(_x19, _x20) {\n    return _personalSign.apply(this, arguments);\n  }\n\n  function _personalSign() {\n    _personalSign = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(req, res) {\n      var firstParam, secondParam, extraParams, address, message, warning, msgParams;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              if (processPersonalMessage) {\n                _context10.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              // process normally\n              firstParam = req.params[0];\n              secondParam = req.params[1]; // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n\n              extraParams = req.params[2] || {}; // We initially incorrectly ordered these parameters.\n              // To gracefully respect users who adopted this API early,\n              // we are currently gracefully recovering from the wrong param order\n              // when it is clearly identifiable.\n              //\n              // That means when the first param is definitely an address,\n              // and the second param is definitely not, but is hex.\n\n              if (resemblesAddress(firstParam) && !resemblesAddress(secondParam)) {\n                warning = \"The eth_personalSign method requires params ordered \";\n                warning += \"[message, address]. This was previously handled incorrectly, \";\n                warning += \"and has been corrected automatically. \";\n                warning += \"Please switch this param order for smooth behavior in the future.\";\n                res.warning = warning;\n                address = firstParam;\n                message = secondParam;\n              } else {\n                message = firstParam;\n                address = secondParam;\n              }\n\n              _context10.next = 8;\n              return validateAndNormalizeKeyholder(address, req);\n\n            case 8:\n              address = _context10.sent;\n              msgParams = _objectSpread$5(_objectSpread$5({}, extraParams), {}, {\n                from: address,\n                data: message\n              }); // eslint-disable-next-line require-atomic-updates\n\n              _context10.next = 12;\n              return processPersonalMessage(msgParams, req);\n\n            case 12:\n              res.result = _context10.sent;\n\n            case 13:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n    return _personalSign.apply(this, arguments);\n  }\n\n  function encryptionPublicKey(_x21, _x22) {\n    return _encryptionPublicKey.apply(this, arguments);\n  }\n\n  function _encryptionPublicKey() {\n    _encryptionPublicKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(req, res) {\n      var address;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              if (processEncryptionPublicKey) {\n                _context11.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              _context11.next = 4;\n              return validateAndNormalizeKeyholder(req.params[0], req);\n\n            case 4:\n              address = _context11.sent;\n              _context11.next = 7;\n              return processEncryptionPublicKey(address, req);\n\n            case 7:\n              res.result = _context11.sent;\n\n            case 8:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n    return _encryptionPublicKey.apply(this, arguments);\n  }\n\n  function decryptMessage(_x23, _x24) {\n    return _decryptMessage.apply(this, arguments);\n  }\n\n  function _decryptMessage() {\n    _decryptMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(req, res) {\n      var ciphertext, address, extraParams, msgParams;\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              if (processDecryptMessage) {\n                _context12.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              ciphertext = req.params[0];\n              _context12.next = 5;\n              return validateAndNormalizeKeyholder(req.params[1], req);\n\n            case 5:\n              address = _context12.sent;\n              extraParams = req.params[2] || {};\n              msgParams = _objectSpread$5(_objectSpread$5({}, extraParams), {}, {\n                from: address,\n                data: ciphertext\n              });\n              res.result = processDecryptMessage(msgParams, req);\n\n            case 9:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n    return _decryptMessage.apply(this, arguments);\n  }\n\n  function fetchPrivateKey(_x25, _x26) {\n    return _fetchPrivateKey.apply(this, arguments);\n  }\n\n  function _fetchPrivateKey() {\n    _fetchPrivateKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(req, res) {\n      return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              if (getPrivateKey) {\n                _context13.next = 2;\n                break;\n              }\n\n              throw ethErrors.rpc.methodNotSupported();\n\n            case 2:\n              res.result = getPrivateKey(req);\n\n            case 3:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n    return _fetchPrivateKey.apply(this, arguments);\n  }\n\n  return createScaffoldMiddleware({\n    // account lookups\n    eth_accounts: createAsyncMiddleware(lookupAccounts),\n    eth_private_key: createAsyncMiddleware(fetchPrivateKey),\n    eth_coinbase: createAsyncMiddleware(lookupDefaultAccount),\n    // tx signatures\n    eth_sendTransaction: createAsyncMiddleware(sendTransaction),\n    eth_signTransaction: createAsyncMiddleware(signTransaction),\n    // message signatures\n    eth_sign: createAsyncMiddleware(ethSign),\n    eth_signTypedData: createAsyncMiddleware(signTypedData),\n    eth_signTypedData_v3: createAsyncMiddleware(signTypedDataV3),\n    eth_signTypedData_v4: createAsyncMiddleware(signTypedDataV4),\n    personal_sign: createAsyncMiddleware(personalSign),\n    eth_getEncryptionPublicKey: createAsyncMiddleware(encryptionPublicKey),\n    eth_decrypt: createAsyncMiddleware(decryptMessage)\n  });\n}\n\nfunction createEthMiddleware(providerHandlers) {\n  var getAccounts = providerHandlers.getAccounts,\n      getPrivateKey = providerHandlers.getPrivateKey,\n      processTransaction = providerHandlers.processTransaction,\n      processSignTransaction = providerHandlers.processSignTransaction,\n      processEthSignMessage = providerHandlers.processEthSignMessage,\n      processTypedMessage = providerHandlers.processTypedMessage,\n      processTypedMessageV3 = providerHandlers.processTypedMessageV3,\n      processTypedMessageV4 = providerHandlers.processTypedMessageV4,\n      processPersonalMessage = providerHandlers.processPersonalMessage,\n      processEncryptionPublicKey = providerHandlers.processEncryptionPublicKey,\n      processDecryptMessage = providerHandlers.processDecryptMessage;\n  var ethMiddleware = mergeMiddleware([createScaffoldMiddleware({\n    eth_syncing: false\n  }), createWalletMiddleware({\n    getAccounts: getAccounts,\n    getPrivateKey: getPrivateKey,\n    processTransaction: processTransaction,\n    processEthSignMessage: processEthSignMessage,\n    processSignTransaction: processSignTransaction,\n    processTypedMessage: processTypedMessage,\n    processTypedMessageV3: processTypedMessageV3,\n    processTypedMessageV4: processTypedMessageV4,\n    processPersonalMessage: processPersonalMessage,\n    processEncryptionPublicKey: processEncryptionPublicKey,\n    processDecryptMessage: processDecryptMessage\n  })]);\n  return ethMiddleware;\n}\nfunction createChainSwitchMiddleware(_ref) {\n  var addChain = _ref.addChain,\n      switchChain = _ref.switchChain;\n\n  function addNewChain(_x, _x2) {\n    return _addNewChain.apply(this, arguments);\n  }\n\n  function _addNewChain() {\n    _addNewChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(req, res) {\n      var _req$params;\n\n      var chainParams;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              chainParams = (_req$params = req.params) !== null && _req$params !== void 0 && _req$params.length ? req.params[0] : undefined;\n\n              if (chainParams) {\n                _context.next = 3;\n                break;\n              }\n\n              throw ethErrors.rpc.invalidParams(\"Missing chain params\");\n\n            case 3:\n              if (chainParams.chainId) {\n                _context.next = 5;\n                break;\n              }\n\n              throw ethErrors.rpc.invalidParams(\"Missing chainId in chainParams\");\n\n            case 5:\n              if (!(!chainParams.rpcUrls || chainParams.rpcUrls.length === 0)) {\n                _context.next = 7;\n                break;\n              }\n\n              throw ethErrors.rpc.invalidParams(\"Missing rpcUrls in chainParams\");\n\n            case 7:\n              if (chainParams.nativeCurrency) {\n                _context.next = 9;\n                break;\n              }\n\n              throw ethErrors.rpc.invalidParams(\"Missing nativeCurrency in chainParams\");\n\n            case 9:\n              _context.next = 11;\n              return addChain(chainParams);\n\n            case 11:\n              res.result = _context.sent;\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _addNewChain.apply(this, arguments);\n  }\n\n  function updateChain(_x3, _x4) {\n    return _updateChain.apply(this, arguments);\n  }\n\n  function _updateChain() {\n    _updateChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(req, res) {\n      var _req$params2;\n\n      var chainParams;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              chainParams = (_req$params2 = req.params) !== null && _req$params2 !== void 0 && _req$params2.length ? req.params[0] : undefined;\n\n              if (chainParams) {\n                _context2.next = 3;\n                break;\n              }\n\n              throw ethErrors.rpc.invalidParams(\"Missing chainId\");\n\n            case 3:\n              _context2.next = 5;\n              return switchChain(chainParams);\n\n            case 5:\n              res.result = _context2.sent;\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _updateChain.apply(this, arguments);\n  }\n\n  return createScaffoldMiddleware({\n    wallet_addEthereumChain: createAsyncMiddleware(addNewChain),\n    wallet_switchEthereumChain: createAsyncMiddleware(updateChain)\n  });\n} // #region account middlewares\n\nfunction createAccountMiddleware(_ref2) {\n  var updatePrivatekey = _ref2.updatePrivatekey;\n\n  function updateAccount(_x5, _x6) {\n    return _updateAccount.apply(this, arguments);\n  }\n\n  function _updateAccount() {\n    _updateAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(req, res) {\n      var _req$params3;\n\n      var accountParams;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              accountParams = (_req$params3 = req.params) !== null && _req$params3 !== void 0 && _req$params3.length ? req.params[0] : undefined;\n\n              if (accountParams !== null && accountParams !== void 0 && accountParams.privateKey) {\n                _context3.next = 3;\n                break;\n              }\n\n              throw ethErrors.rpc.invalidParams(\"Missing privateKey\");\n\n            case 3:\n              _context3.next = 5;\n              return updatePrivatekey(accountParams);\n\n            case 5:\n              res.result = _context3.sent;\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _updateAccount.apply(this, arguments);\n  }\n\n  return createScaffoldMiddleware({\n    wallet_updateAccount: createAsyncMiddleware(updateAccount)\n  });\n} // #endregion account middlewares\n\nfunction createChainIdMiddleware(chainId) {\n  return function (req, res, next, end) {\n    if (req.method === \"eth_chainId\") {\n      res.result = chainId;\n      return end();\n    }\n\n    return next();\n  };\n}\nfunction createProviderConfigMiddleware(providerConfig) {\n  return function (req, res, next, end) {\n    if (req.method === \"eth_provider_config\") {\n      res.result = providerConfig;\n      return end();\n    }\n\n    return next();\n  };\n}\nfunction createJsonRpcClient(providerConfig) {\n  var chainId = providerConfig.chainId,\n      rpcTarget = providerConfig.rpcTarget;\n  var fetchMiddleware = createFetchMiddleware({\n    rpcTarget: rpcTarget\n  });\n  var networkMiddleware = mergeMiddleware([createChainIdMiddleware(chainId), createProviderConfigMiddleware(providerConfig), fetchMiddleware]);\n  return {\n    networkMiddleware: networkMiddleware,\n    fetchMiddleware: fetchMiddleware\n  };\n}\n\nfunction getProviderHandlers$1(_ref) {\n  var connector = _ref.connector;\n  return {\n    getPrivateKey: function () {\n      var _getPrivateKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                throw ethErrors.rpc.methodNotSupported();\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getPrivateKey() {\n        return _getPrivateKey.apply(this, arguments);\n      }\n\n      return getPrivateKey;\n    }(),\n    getAccounts: function () {\n      var _getAccounts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_) {\n        var accounts;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                accounts = connector.accounts;\n\n                if (!(accounts && accounts.length)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", accounts);\n\n              case 3:\n                throw new Error(\"Failed to get accounts\");\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getAccounts(_x) {\n        return _getAccounts.apply(this, arguments);\n      }\n\n      return getAccounts;\n    }(),\n    processTransaction: function () {\n      var _processTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(txParams, _) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return connector.sendTransaction(txParams);\n\n              case 2:\n                result = _context3.sent;\n                return _context3.abrupt(\"return\", result);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function processTransaction(_x2, _x3) {\n        return _processTransaction.apply(this, arguments);\n      }\n\n      return processTransaction;\n    }(),\n    processSignTransaction: function () {\n      var _processSignTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(txParams, _) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return connector.signTransaction(txParams);\n\n              case 2:\n                result = _context4.sent;\n                return _context4.abrupt(\"return\", result);\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function processSignTransaction(_x4, _x5) {\n        return _processSignTransaction.apply(this, arguments);\n      }\n\n      return processSignTransaction;\n    }(),\n    processEthSignMessage: function () {\n      var _processEthSignMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(msgParams, _) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return connector.signMessage([msgParams.from, msgParams.data]);\n\n              case 2:\n                result = _context5.sent;\n                return _context5.abrupt(\"return\", result);\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function processEthSignMessage(_x6, _x7) {\n        return _processEthSignMessage.apply(this, arguments);\n      }\n\n      return processEthSignMessage;\n    }(),\n    processPersonalMessage: function () {\n      var _processPersonalMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(msgParams, _) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return connector.signPersonalMessage([msgParams.data, msgParams.from]);\n\n              case 2:\n                result = _context6.sent;\n                return _context6.abrupt(\"return\", result);\n\n              case 4:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function processPersonalMessage(_x8, _x9) {\n        return _processPersonalMessage.apply(this, arguments);\n      }\n\n      return processPersonalMessage;\n    }(),\n    processTypedMessage: function () {\n      var _processTypedMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(msgParams, _) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return connector.signTypedData([msgParams.from, msgParams.data]);\n\n              case 2:\n                result = _context7.sent;\n                return _context7.abrupt(\"return\", result);\n\n              case 4:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      function processTypedMessage(_x10, _x11) {\n        return _processTypedMessage.apply(this, arguments);\n      }\n\n      return processTypedMessage;\n    }(),\n    processTypedMessageV3: function () {\n      var _processTypedMessageV = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(msgParams) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return connector.signTypedData([msgParams.from, msgParams.data]);\n\n              case 2:\n                result = _context8.sent;\n                return _context8.abrupt(\"return\", result);\n\n              case 4:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      function processTypedMessageV3(_x12) {\n        return _processTypedMessageV.apply(this, arguments);\n      }\n\n      return processTypedMessageV3;\n    }(),\n    processTypedMessageV4: function () {\n      var _processTypedMessageV2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(msgParams) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return connector.signTypedData([msgParams.from, msgParams.data]);\n\n              case 2:\n                result = _context9.sent;\n                return _context9.abrupt(\"return\", result);\n\n              case 4:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function processTypedMessageV4(_x13) {\n        return _processTypedMessageV2.apply(this, arguments);\n      }\n\n      return processTypedMessageV4;\n    }(),\n    processEncryptionPublicKey: function () {\n      var _processEncryptionPublicKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(_) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                throw ethErrors.rpc.methodNotSupported();\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }));\n\n      function processEncryptionPublicKey(_x14) {\n        return _processEncryptionPublicKey.apply(this, arguments);\n      }\n\n      return processEncryptionPublicKey;\n    }(),\n    processDecryptMessage: function processDecryptMessage(_) {\n      throw ethErrors.rpc.methodNotSupported();\n    }\n  };\n}\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$4(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar WalletConnectProvider = /*#__PURE__*/function (_BaseProvider) {\n  _inherits(WalletConnectProvider, _BaseProvider);\n\n  var _super = _createSuper$1(WalletConnectProvider);\n\n  function WalletConnectProvider(_ref) {\n    var _this;\n\n    var config = _ref.config,\n        state = _ref.state,\n        connector = _ref.connector;\n\n    _classCallCheck(this, WalletConnectProvider);\n\n    _this = _super.call(this, {\n      config: {\n        chainConfig: _objectSpread$4(_objectSpread$4({}, config.chainConfig), {}, {\n          chainNamespace: CHAIN_NAMESPACES.EIP155\n        }),\n        skipLookupNetwork: !!config.skipLookupNetwork\n      },\n      state: _objectSpread$4(_objectSpread$4({}, state || {}), {}, {\n        chainId: \"loading\",\n        accounts: []\n      })\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"connector\", null);\n\n    _this.connector = connector || null;\n    return _this;\n  }\n\n  _createClass(WalletConnectProvider, [{\n    key: \"enable\",\n    value: function () {\n      var _enable = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.connector) {\n                  _context.next = 2;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Connector is not initialized, pass wallet connect connector in constructor\",\n                  code: 4902\n                });\n\n              case 2:\n                _context.next = 4;\n                return this.setupProvider(this.connector);\n\n              case 4:\n                return _context.abrupt(\"return\", this._providerEngineProxy.request({\n                  method: \"eth_accounts\"\n                }));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function enable() {\n        return _enable.apply(this, arguments);\n      }\n\n      return enable;\n    }()\n  }, {\n    key: \"setupProvider\",\n    value: function () {\n      var _setupProvider = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(connector) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.onConnectorStateUpdate(connector);\n                _context2.next = 3;\n                return this.setupEngine(connector);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setupProvider(_x) {\n        return _setupProvider.apply(this, arguments);\n      }\n\n      return setupProvider;\n    }()\n  }, {\n    key: \"switchChain\",\n    value: function () {\n      var _switchChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref2) {\n        var chainId, _ref2$addChain, addChain, _ref2$lookup, lookup, currentChainConfig, rpcTarget, displayName;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                chainId = _ref2.chainId, _ref2$addChain = _ref2.addChain, addChain = _ref2$addChain === void 0 ? true : _ref2$addChain, _ref2$lookup = _ref2.lookup, lookup = _ref2$lookup === void 0 ? true : _ref2$lookup;\n\n                if (this.connector) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Connector is not initialized, pass wallet connect connector in constructor\",\n                  code: 4902\n                });\n\n              case 3:\n                currentChainConfig = this.getChainConfig(chainId);\n                this.update({\n                  chainId: \"loading\"\n                });\n                rpcTarget = currentChainConfig.rpcTarget, displayName = currentChainConfig.displayName;\n\n                if (!addChain) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                _context3.prev = 7;\n                _context3.next = 10;\n                return this.connector.sendCustomRequest({\n                  method: \"wallet_addEthereumChain\",\n                  params: [{\n                    chainId: chainId,\n                    chainName: displayName,\n                    rpcUrls: [rpcTarget]\n                  }]\n                });\n\n              case 10:\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](7);\n                log.error(_context3.t0);\n\n              case 15:\n                _context3.prev = 15;\n                _context3.next = 18;\n                return this.connector.sendCustomRequest({\n                  method: \"wallet_switchEthereumChain\",\n                  params: [{\n                    chainId: chainId\n                  }]\n                });\n\n              case 18:\n                _context3.next = 25;\n                break;\n\n              case 20:\n                _context3.prev = 20;\n                _context3.t1 = _context3[\"catch\"](15);\n                log.error(_context3.t1); // ignore this error because metamask & others return provider.result as null\n                // wallet connect thinks this is wrong\n\n                if (!(_context3.t1.message !== \"JSON RPC response format is invalid\")) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                throw _context3.t1;\n\n              case 25:\n                this.configure({\n                  chainConfig: currentChainConfig\n                });\n\n                if (!lookup) {\n                  _context3.next = 29;\n                  break;\n                }\n\n                _context3.next = 29;\n                return this.lookupNetwork(this.connector);\n\n              case 29:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[7, 12], [15, 20]]);\n      }));\n\n      function switchChain(_x2) {\n        return _switchChain.apply(this, arguments);\n      }\n\n      return switchChain;\n    }()\n  }, {\n    key: \"addChain\",\n    value: function () {\n      var _addChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(chainConfig) {\n        var rpcTarget, displayName;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (this.connector) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 2:\n                rpcTarget = chainConfig.rpcTarget, displayName = chainConfig.displayName;\n                _context4.prev = 3;\n                _context4.next = 6;\n                return this.connector.sendCustomRequest({\n                  method: \"wallet_addEthereumChain\",\n                  params: [{\n                    chainId: chainConfig.chainId,\n                    chainName: displayName,\n                    rpcUrls: [rpcTarget]\n                  }]\n                });\n\n              case 6:\n                _get(_getPrototypeOf(WalletConnectProvider.prototype), \"addChain\", this).call(this, chainConfig);\n\n                _context4.next = 13;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](3);\n                log.error(_context4.t0);\n                throw _context4.t0;\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[3, 9]]);\n      }));\n\n      function addChain(_x3) {\n        return _addChain.apply(this, arguments);\n      }\n\n      return addChain;\n    }()\n  }, {\n    key: \"lookupNetwork\",\n    value: function () {\n      var _lookupNetwork = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(connector) {\n        var chainId, connectedHexChainId;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (connector.connected) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Wallet connect connector is not connected\");\n\n              case 2:\n                if (this.provider) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 4:\n                chainId = this.config.chainConfig.chainId;\n                connectedHexChainId = isHexStrict(connector.chainId.toString()) ? connector.chainId : \"0x\".concat(connector.chainId.toString(16));\n\n                if (!(chainId !== connectedHexChainId)) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                throw WalletInitializationError.rpcConnectionError(\"Invalid network, net_version is: \".concat(connectedHexChainId, \", expected: \").concat(chainId));\n\n              case 8:\n                this.provider.emit(\"connect\", {\n                  chainId: chainId\n                });\n                this.provider.emit(\"chainChanged\", this.state.chainId);\n                return _context5.abrupt(\"return\", connectedHexChainId);\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function lookupNetwork(_x4) {\n        return _lookupNetwork.apply(this, arguments);\n      }\n\n      return lookupNetwork;\n    }()\n  }, {\n    key: \"setupEngine\",\n    value: function () {\n      var _setupEngine = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(connector) {\n        var providerHandlers, ethMiddleware, engine, _createJsonRpcClient, networkMiddleware, provider;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                providerHandlers = getProviderHandlers$1({\n                  connector: connector\n                });\n                this.update({\n                  accounts: connector.accounts || []\n                });\n                ethMiddleware = createEthMiddleware(providerHandlers);\n                engine = new JRPCEngine();\n                _createJsonRpcClient = createJsonRpcClient(this.config.chainConfig), networkMiddleware = _createJsonRpcClient.networkMiddleware;\n                engine.push(ethMiddleware);\n                engine.push(networkMiddleware);\n                provider = providerFromEngine(engine);\n                this.updateProviderEngineProxy(provider);\n\n                if (this.config.skipLookupNetwork) {\n                  _context6.next = 12;\n                  break;\n                }\n\n                _context6.next = 12;\n                return this.lookupNetwork(connector);\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function setupEngine(_x5) {\n        return _setupEngine.apply(this, arguments);\n      }\n\n      return setupEngine;\n    }()\n  }, {\n    key: \"onConnectorStateUpdate\",\n    value: function () {\n      var _onConnectorStateUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(connector) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                connector.on(\"session_update\", /*#__PURE__*/function () {\n                  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(error, payload) {\n                    var _payload$params$, accounts, connectedChainId, rpcUrl, connectedHexChainId, maybeConfig;\n\n                    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                      while (1) {\n                        switch (_context7.prev = _context7.next) {\n                          case 0:\n                            if (_this2.provider) {\n                              _context7.next = 2;\n                              break;\n                            }\n\n                            throw WalletLoginError.notConnectedError(\"Wallet connect connector is not connected\");\n\n                          case 2:\n                            if (!error) {\n                              _context7.next = 5;\n                              break;\n                            }\n\n                            _this2.provider.emit(\"error\", error);\n\n                            return _context7.abrupt(\"return\");\n\n                          case 5:\n                            _payload$params$ = payload.params[0], accounts = _payload$params$.accounts, connectedChainId = _payload$params$.chainId, rpcUrl = _payload$params$.rpcUrl; // Check if accounts changed and trigger event\n\n                            if (accounts !== null && accounts !== void 0 && accounts.length && _this2.state.accounts[0] !== accounts[0]) {\n                              _this2.update({\n                                accounts: accounts\n                              }); // await this.setupEngine(connector);\n\n\n                              _this2.provider.emit(\"accountsChanged\", accounts);\n                            }\n\n                            connectedHexChainId = \"0x\".concat(connectedChainId.toString(16)); // Check if chainId changed and trigger event\n\n                            if (!(connectedChainId && _this2.state.chainId !== connectedHexChainId)) {\n                              _context7.next = 13;\n                              break;\n                            }\n\n                            maybeConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, connectedChainId) || {}; // Handle rpcUrl update\n\n                            _this2.configure({\n                              chainConfig: _objectSpread$4(_objectSpread$4({}, maybeConfig), {}, {\n                                chainId: connectedHexChainId,\n                                rpcTarget: rpcUrl,\n                                chainNamespace: CHAIN_NAMESPACES.EIP155\n                              })\n                            });\n\n                            _context7.next = 13;\n                            return _this2.setupEngine(connector);\n\n                          case 13:\n                          case \"end\":\n                            return _context7.stop();\n                        }\n                      }\n                    }, _callee7);\n                  }));\n\n                  return function (_x7, _x8) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n\n              case 1:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      function onConnectorStateUpdate(_x6) {\n        return _onConnectorStateUpdate.apply(this, arguments);\n      }\n\n      return onConnectorStateUpdate;\n    }()\n  }]);\n\n  return WalletConnectProvider;\n}(BaseProvider);\n\n_defineProperty(WalletConnectProvider, \"getProviderInstance\", /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(params) {\n    var providerFactory;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            providerFactory = new WalletConnectProvider({\n              config: {\n                chainConfig: params.chainConfig,\n                skipLookupNetwork: params.skipLookupNetwork\n              }\n            });\n            _context9.next = 3;\n            return providerFactory.setupProvider(params.connector);\n\n          case 3:\n            return _context9.abrupt(\"return\", providerFactory);\n\n          case 4:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function (_x9) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\nvar BIG_NUMBER_WEI_MULTIPLIER = new BigNumber(\"1e18\");\nvar BIG_NUMBER_GWEI_MULTIPLIER = new BigNumber(\"1e9\");\nvar BIG_NUMBER_ETH_MULTIPLIER = new BigNumber(\"1\"); // Setter Maps\n\nvar toBigNumber = {\n  hex: function hex(n) {\n    return typeof n === \"string\" ? new BigNumber(stripHexPrefix(n), 16) : new BigNumber(n, 16);\n  },\n  dec: function dec(n) {\n    return new BigNumber(n, 10);\n  }\n};\nvar toNormalizedDenomination = {\n  WEI: function WEI(bigNumber) {\n    return bigNumber.div(BIG_NUMBER_WEI_MULTIPLIER);\n  },\n  GWEI: function GWEI(bigNumber) {\n    return bigNumber.div(BIG_NUMBER_GWEI_MULTIPLIER);\n  },\n  ETH: function ETH(bigNumber) {\n    return bigNumber.div(BIG_NUMBER_ETH_MULTIPLIER);\n  }\n};\nvar toSpecifiedDenomination = {\n  WEI: function WEI(bigNumber) {\n    return bigNumber.times(BIG_NUMBER_WEI_MULTIPLIER).dp(0, BigNumber.ROUND_HALF_UP);\n  },\n  GWEI: function GWEI(bigNumber) {\n    return bigNumber.times(BIG_NUMBER_GWEI_MULTIPLIER).dp(9, BigNumber.ROUND_HALF_UP);\n  },\n  ETH: function ETH(bigNumber) {\n    return bigNumber.times(BIG_NUMBER_ETH_MULTIPLIER).dp(9, BigNumber.ROUND_HALF_UP);\n  }\n};\nvar baseChange = {\n  hex: function hex(n) {\n    return n.toString(16);\n  },\n  dec: function dec(n) {\n    return new BigNumber(n).toString(10);\n  }\n};\n\nvar converter = function converter(params) {\n  var value = params.value,\n      fromNumericBase = params.fromNumericBase,\n      fromDenomination = params.fromDenomination,\n      toNumericBase = params.toNumericBase,\n      toDenomination = params.toDenomination,\n      numberOfDecimals = params.numberOfDecimals;\n  var convertedValue = toBigNumber[fromNumericBase](value);\n\n  if (fromDenomination) {\n    convertedValue = toNormalizedDenomination[fromDenomination](convertedValue);\n  }\n\n  if (toDenomination) {\n    convertedValue = toSpecifiedDenomination[toDenomination](convertedValue);\n  }\n\n  if (numberOfDecimals) {\n    convertedValue = convertedValue.dp(numberOfDecimals, BigNumber.ROUND_HALF_DOWN);\n  }\n\n  if (toNumericBase) {\n    convertedValue = baseChange[toNumericBase](convertedValue);\n  }\n\n  return convertedValue;\n};\n\nvar conversionUtil = function conversionUtil(value, _ref) {\n  var _ref$fromNumericBase = _ref.fromNumericBase,\n      fromNumericBase = _ref$fromNumericBase === void 0 ? \"hex\" : _ref$fromNumericBase,\n      toNumericBase = _ref.toNumericBase,\n      fromDenomination = _ref.fromDenomination,\n      toDenomination = _ref.toDenomination,\n      numberOfDecimals = _ref.numberOfDecimals;\n  return converter({\n    fromNumericBase: fromNumericBase,\n    toNumericBase: toNumericBase,\n    fromDenomination: fromDenomination,\n    toDenomination: toDenomination,\n    numberOfDecimals: numberOfDecimals,\n    value: value || \"0\"\n  });\n};\n\nfunction decGWEIToHexWEI(decGWEI) {\n  return conversionUtil(decGWEI, {\n    fromNumericBase: \"dec\",\n    toNumericBase: \"hex\",\n    fromDenomination: \"GWEI\",\n    toDenomination: \"WEI\"\n  });\n}\n\nfunction hexWEIToDecGWEI(decGWEI) {\n  return conversionUtil(decGWEI, {\n    fromNumericBase: \"hex\",\n    toNumericBase: \"dec\",\n    fromDenomination: \"WEI\",\n    toDenomination: \"GWEI\"\n  });\n}\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction normalizeGWEIDecimalNumbers(n) {\n  var numberAsWEIHex = decGWEIToHexWEI(n);\n  var numberAsGWEI = hexWEIToDecGWEI(numberAsWEIHex);\n  return numberAsGWEI;\n}\nfunction fetchEip1159GasEstimates(_x) {\n  return _fetchEip1159GasEstimates.apply(this, arguments);\n}\n/**\n * Hit the legacy MetaSwaps gasPrices estimate api and return the low, medium\n * high values from that API.\n */\n\nfunction _fetchEip1159GasEstimates() {\n  _fetchEip1159GasEstimates = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var estimates, normalizedEstimates;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return get(url);\n\n          case 2:\n            estimates = _context.sent;\n            normalizedEstimates = _objectSpread$3(_objectSpread$3({}, estimates), {}, {\n              estimatedBaseFee: normalizeGWEIDecimalNumbers(estimates.estimatedBaseFee),\n              low: _objectSpread$3(_objectSpread$3({}, estimates.low), {}, {\n                suggestedMaxPriorityFeePerGas: normalizeGWEIDecimalNumbers(estimates.low.suggestedMaxPriorityFeePerGas),\n                suggestedMaxFeePerGas: normalizeGWEIDecimalNumbers(estimates.low.suggestedMaxFeePerGas)\n              }),\n              medium: _objectSpread$3(_objectSpread$3({}, estimates.medium), {}, {\n                suggestedMaxPriorityFeePerGas: normalizeGWEIDecimalNumbers(estimates.medium.suggestedMaxPriorityFeePerGas),\n                suggestedMaxFeePerGas: normalizeGWEIDecimalNumbers(estimates.medium.suggestedMaxFeePerGas)\n              }),\n              high: _objectSpread$3(_objectSpread$3({}, estimates.high), {}, {\n                suggestedMaxPriorityFeePerGas: normalizeGWEIDecimalNumbers(estimates.high.suggestedMaxPriorityFeePerGas),\n                suggestedMaxFeePerGas: normalizeGWEIDecimalNumbers(estimates.high.suggestedMaxFeePerGas)\n              })\n            });\n            return _context.abrupt(\"return\", normalizedEstimates);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchEip1159GasEstimates.apply(this, arguments);\n}\n\nfunction fetchLegacyGasPriceEstimates(_x2) {\n  return _fetchLegacyGasPriceEstimates.apply(this, arguments);\n}\n\nfunction _fetchLegacyGasPriceEstimates() {\n  _fetchLegacyGasPriceEstimates = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url) {\n    var result;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return get(url, {\n              referrer: url,\n              referrerPolicy: \"no-referrer-when-downgrade\",\n              method: \"GET\",\n              mode: \"cors\"\n            });\n\n          case 2:\n            result = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              low: result.SafeGasPrice,\n              medium: result.ProposeGasPrice,\n              high: result.FastGasPrice\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _fetchLegacyGasPriceEstimates.apply(this, arguments);\n}\n\nvar validateTypedMessageParams = function validateTypedMessageParams(parameters, activeChainId) {\n  var _data$domain;\n\n  try {\n    assert.ok(parameters && _typeof(parameters) === \"object\", \"Params must be an object.\");\n    assert.ok(\"data\" in parameters, 'Params must include a \"data\" field.');\n    assert.ok(\"from\" in parameters, 'Params must include a \"from\" field.');\n    assert.ok(typeof parameters.from === \"string\" && isValidAddress(parameters.from), '\"from\" field must be a valid, lowercase, hexadecimal Ethereum address string.');\n    var data = null;\n    var chainId = null;\n\n    switch (parameters.version) {\n      case SignTypedDataVersion.V1:\n        if (typeof parameters.data === \"string\") {\n          assert.doesNotThrow(function () {\n            data = JSON.parse(parameters.data);\n          }, '\"data\" must be a valid JSON string.');\n        } else {\n          // for backward compatiblity we validate for both string and object type.\n          data = parameters.data;\n        }\n\n        assert.ok(Array.isArray(data), \"params.data must be an array.\");\n        assert.doesNotThrow(function () {\n          typedSignatureHash(data);\n        }, \"Signing data must be valid EIP-712 typed data.\");\n        break;\n\n      case SignTypedDataVersion.V3:\n      case SignTypedDataVersion.V4:\n        if (typeof parameters.data === \"string\") {\n          assert.doesNotThrow(function () {\n            data = JSON.parse(parameters.data);\n          }, '\"data\" must be a valid JSON string.');\n        } else {\n          // for backward compatiblity we validate for both string and object type.\n          data = parameters.data;\n        }\n\n        assert.ok(data.primaryType in data.types, \"Primary type of \\\"\".concat(data.primaryType, \"\\\" has no type definition.\"));\n        var validation = jsonschema.validate(data, TYPED_MESSAGE_SCHEMA.properties);\n        assert.strictEqual(validation.errors.length, 0, \"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx.\");\n        chainId = (_data$domain = data.domain) === null || _data$domain === void 0 ? void 0 : _data$domain.chainId;\n\n        if (chainId) {\n          assert.ok(!Number.isNaN(activeChainId), \"Cannot sign messages for chainId \\\"\".concat(chainId, \"\\\", because Web3Auth is switching networks.\"));\n\n          if (typeof chainId === \"string\") {\n            chainId = Number.parseInt(chainId, isHexStrict(chainId) ? 16 : 10);\n          }\n\n          assert.strictEqual(chainId, activeChainId, \"Provided chainId \\\"\".concat(chainId, \"\\\" must match the active chainId \\\"\").concat(activeChainId, \"\\\"\"));\n        }\n\n        break;\n\n      default:\n        assert.fail(\"Unknown typed data version \\\"\".concat(parameters.version, \"\\\"\"));\n    }\n  } catch (error) {\n    throw ethErrors.rpc.invalidInput({\n      message: error === null || error === void 0 ? void 0 : error.message\n    });\n  }\n};\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction signTx(_x, _x2, _x3) {\n  return _signTx.apply(this, arguments);\n}\n\nfunction _signTx() {\n  _signTx = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(txParams, privKey, txFormatter) {\n    var finalTxParams, common, unsignedEthTx, signedTx;\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.next = 2;\n            return txFormatter.formatTransaction(txParams);\n\n          case 2:\n            finalTxParams = _context11.sent;\n            _context11.next = 5;\n            return txFormatter.getCommonConfiguration();\n\n          case 5:\n            common = _context11.sent;\n            unsignedEthTx = TransactionFactory.fromTxData(finalTxParams, {\n              common: common\n            });\n            signedTx = unsignedEthTx.sign(Buffer.from(privKey, \"hex\")).serialize();\n            return _context11.abrupt(\"return\", signedTx);\n\n          case 9:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n  return _signTx.apply(this, arguments);\n}\n\nfunction getProviderHandlers(_ref) {\n  var txFormatter = _ref.txFormatter,\n      privKey = _ref.privKey,\n      getProviderEngineProxy = _ref.getProviderEngineProxy;\n  return {\n    getAccounts: function () {\n      var _getAccounts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", [\"0x\".concat(privateToAddress(Buffer.from(privKey, \"hex\")).toString(\"hex\"))]);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getAccounts(_x4) {\n        return _getAccounts.apply(this, arguments);\n      }\n\n      return getAccounts;\n    }(),\n    getPrivateKey: function () {\n      var _getPrivateKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", privKey);\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getPrivateKey(_x5) {\n        return _getPrivateKey.apply(this, arguments);\n      }\n\n      return getPrivateKey;\n    }(),\n    processTransaction: function () {\n      var _processTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(txParams, _) {\n        var providerEngineProxy, signedTx, txHash;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                providerEngineProxy = getProviderEngineProxy();\n\n                if (providerEngineProxy) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 3:\n                _context3.next = 5;\n                return signTx(txParams, privKey, txFormatter);\n\n              case 5:\n                signedTx = _context3.sent;\n                _context3.next = 8;\n                return providerEngineProxy.request({\n                  method: \"eth_sendRawTransaction\",\n                  params: [\"0x\".concat(signedTx.toString(\"hex\"))]\n                });\n\n              case 8:\n                txHash = _context3.sent;\n                return _context3.abrupt(\"return\", txHash);\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function processTransaction(_x6, _x7) {\n        return _processTransaction.apply(this, arguments);\n      }\n\n      return processTransaction;\n    }(),\n    processSignTransaction: function () {\n      var _processSignTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(txParams, _) {\n        var providerEngineProxy, signedTx;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                providerEngineProxy = getProviderEngineProxy();\n\n                if (providerEngineProxy) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 3:\n                _context4.next = 5;\n                return signTx(txParams, privKey, txFormatter);\n\n              case 5:\n                signedTx = _context4.sent;\n                return _context4.abrupt(\"return\", \"0x\".concat(signedTx.toString(\"hex\")));\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function processSignTransaction(_x8, _x9) {\n        return _processSignTransaction.apply(this, arguments);\n      }\n\n      return processSignTransaction;\n    }(),\n    processEthSignMessage: function () {\n      var _processEthSignMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(msgParams, _) {\n        var rawMessageSig;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                rawMessageSig = signMessage(privKey, msgParams.data);\n                return _context5.abrupt(\"return\", rawMessageSig);\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function processEthSignMessage(_x10, _x11) {\n        return _processEthSignMessage.apply(this, arguments);\n      }\n\n      return processEthSignMessage;\n    }(),\n    processPersonalMessage: function () {\n      var _processPersonalMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(msgParams, _) {\n        var privKeyBuffer, sig;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                privKeyBuffer = Buffer.from(privKey, \"hex\");\n                sig = personalSign({\n                  privateKey: privKeyBuffer,\n                  data: msgParams.data\n                });\n                return _context6.abrupt(\"return\", sig);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function processPersonalMessage(_x12, _x13) {\n        return _processPersonalMessage.apply(this, arguments);\n      }\n\n      return processPersonalMessage;\n    }(),\n    processTypedMessage: function () {\n      var _processTypedMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(msgParams, _) {\n        var privKeyBuffer, providerEngineProxy, chainId, finalChainId, params, data, sig;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                log.debug(\"processTypedMessage\", msgParams);\n                privKeyBuffer = Buffer.from(privKey, \"hex\");\n                providerEngineProxy = getProviderEngineProxy();\n\n                if (providerEngineProxy) {\n                  _context7.next = 5;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 5:\n                _context7.next = 7;\n                return providerEngineProxy.request({\n                  method: \"eth_chainId\"\n                });\n\n              case 7:\n                chainId = _context7.sent;\n                finalChainId = Number.parseInt(chainId, isHexStrict(chainId) ? 16 : 10);\n                params = _objectSpread$2(_objectSpread$2({}, msgParams), {}, {\n                  version: SignTypedDataVersion.V1\n                });\n                validateTypedMessageParams(params, finalChainId);\n                data = typeof params.data === \"string\" ? JSON.parse(params.data) : params.data;\n                sig = signTypedData({\n                  privateKey: privKeyBuffer,\n                  data: data,\n                  version: SignTypedDataVersion.V1\n                });\n                return _context7.abrupt(\"return\", sig);\n\n              case 14:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      function processTypedMessage(_x14, _x15) {\n        return _processTypedMessage.apply(this, arguments);\n      }\n\n      return processTypedMessage;\n    }(),\n    processTypedMessageV3: function () {\n      var _processTypedMessageV = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(msgParams, _) {\n        var privKeyBuffer, providerEngineProxy, chainId, finalChainId, data, sig;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                log.debug(\"processTypedMessageV3\", msgParams);\n                privKeyBuffer = Buffer.from(privKey, \"hex\");\n                providerEngineProxy = getProviderEngineProxy();\n\n                if (providerEngineProxy) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 5:\n                _context8.next = 7;\n                return providerEngineProxy.request({\n                  method: \"eth_chainId\"\n                });\n\n              case 7:\n                chainId = _context8.sent;\n                finalChainId = Number.parseInt(chainId, isHexStrict(chainId) ? 16 : 10);\n                validateTypedMessageParams(msgParams, finalChainId);\n                data = typeof msgParams.data === \"string\" ? JSON.parse(msgParams.data) : msgParams.data;\n                sig = signTypedData({\n                  privateKey: privKeyBuffer,\n                  data: data,\n                  version: SignTypedDataVersion.V3\n                });\n                return _context8.abrupt(\"return\", sig);\n\n              case 13:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      function processTypedMessageV3(_x16, _x17) {\n        return _processTypedMessageV.apply(this, arguments);\n      }\n\n      return processTypedMessageV3;\n    }(),\n    processTypedMessageV4: function () {\n      var _processTypedMessageV2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(msgParams, _) {\n        var privKeyBuffer, providerEngineProxy, chainId, finalChainId, data, sig;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                log.debug(\"processTypedMessageV4\", msgParams);\n                privKeyBuffer = Buffer.from(privKey, \"hex\");\n                providerEngineProxy = getProviderEngineProxy();\n\n                if (providerEngineProxy) {\n                  _context9.next = 5;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 5:\n                _context9.next = 7;\n                return providerEngineProxy.request({\n                  method: \"eth_chainId\"\n                });\n\n              case 7:\n                chainId = _context9.sent;\n                finalChainId = Number.parseInt(chainId, isHexStrict(chainId) ? 16 : 10);\n                validateTypedMessageParams(msgParams, finalChainId);\n                data = typeof msgParams.data === \"string\" ? JSON.parse(msgParams.data) : msgParams.data;\n                sig = signTypedData({\n                  privateKey: privKeyBuffer,\n                  data: data,\n                  version: SignTypedDataVersion.V4\n                });\n                return _context9.abrupt(\"return\", sig);\n\n              case 13:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function processTypedMessageV4(_x18, _x19) {\n        return _processTypedMessageV2.apply(this, arguments);\n      }\n\n      return processTypedMessageV4;\n    }(),\n    processEncryptionPublicKey: function () {\n      var _processEncryptionPublicKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(address, _) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                log.info(\"processEncryptionPublicKey\", address);\n                return _context10.abrupt(\"return\", getEncryptionPublicKey(privKey));\n\n              case 2:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }));\n\n      function processEncryptionPublicKey(_x20, _x21) {\n        return _processEncryptionPublicKey.apply(this, arguments);\n      }\n\n      return processEncryptionPublicKey;\n    }(),\n    processDecryptMessage: function processDecryptMessage(msgParams, _) {\n      log.info(\"processDecryptMessage\", msgParams);\n      var stripped = stripHexPrefix(msgParams.data);\n      var buff = Buffer.from(stripped, \"hex\");\n      var decrypted = decrypt({\n        encryptedData: JSON.parse(buff.toString(\"utf8\")),\n        privateKey: privKey\n      });\n      return decrypted;\n    }\n  };\n}\n\nfunction bnLessThan(a, b) {\n  if (a === null || a === undefined || b === null || b === undefined) {\n    return null;\n  }\n\n  return new BigNumber$1(a, 10).lt(b, 10);\n}\nfunction bnToHex(inputBn) {\n  return addHexPrefix(inputBn.toString(16));\n}\nfunction hexToBn(inputHex) {\n  if (BN.isBN(inputHex)) return inputHex;\n  return new BN(stripHexPrefix(inputHex), 16);\n}\nfunction BnMultiplyByFraction(targetBN, numerator, denominator) {\n  var numberBN = new BN(numerator);\n  var denomBN = new BN(denominator);\n  return targetBN.mul(numberBN).div(denomBN);\n}\n\nvar LegacyGasAPIEndpoint = \"https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices\";\nvar EIP1559APIEndpoint = \"https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees\";\nvar TRANSACTION_ENVELOPE_TYPES = {\n  LEGACY: \"0x0\",\n  ACCESS_LIST: \"0x1\",\n  FEE_MARKET: \"0x2\"\n};\nvar TRANSACTION_TYPES = {\n  SENT_ETHER: \"sentEther\",\n  CONTRACT_INTERACTION: \"contractInteraction\",\n  DEPLOY_CONTRACT: \"contractDeployment\",\n  STANDARD_TRANSACTION: \"transaction\"\n};\nvar GAS_ESTIMATE_TYPES = {\n  FEE_MARKET: \"fee-market\",\n  LEGACY: \"legacy\",\n  ETH_GASPRICE: \"eth_gasPrice\",\n  NONE: \"none\"\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar TransactionFormatter = /*#__PURE__*/function () {\n  function TransactionFormatter(_ref) {\n    var getProviderEngineProxy = _ref.getProviderEngineProxy;\n\n    _classCallCheck(this, TransactionFormatter);\n\n    _defineProperty(this, \"chainConfig\", null);\n\n    _defineProperty(this, \"getProviderEngineProxy\", void 0);\n\n    _defineProperty(this, \"isEIP1559Compatible\", false);\n\n    this.getProviderEngineProxy = getProviderEngineProxy;\n  }\n\n  _createClass(TransactionFormatter, [{\n    key: \"providerProxy\",\n    get: function get() {\n      return this.getProviderEngineProxy();\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.providerProxy.request({\n                  method: \"eth_provider_config\",\n                  params: []\n                });\n\n              case 2:\n                this.chainConfig = _context.sent;\n                _context.next = 5;\n                return this.getEIP1559Compatibility();\n\n              case 5:\n                this.isEIP1559Compatible = _context.sent;\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"getCommonConfiguration\",\n    value: function () {\n      var _getCommonConfiguration = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this$chainConfig, name, chainId, hardfork, customChainParams;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.chainConfig) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Chain config not initialized\");\n\n              case 2:\n                _this$chainConfig = this.chainConfig, name = _this$chainConfig.displayName, chainId = _this$chainConfig.chainId;\n                hardfork = this.isEIP1559Compatible ? Hardfork.London : Hardfork.Berlin;\n                customChainParams = {\n                  name: name,\n                  chainId: chainId === \"loading\" ? 0 : Number.parseInt(chainId, 16),\n                  networkId: chainId === \"loading\" ? 0 : Number.parseInt(chainId, 16),\n                  defaultHardfork: hardfork\n                };\n                return _context2.abrupt(\"return\", Common.custom(customChainParams));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getCommonConfiguration() {\n        return _getCommonConfiguration.apply(this, arguments);\n      }\n\n      return getCommonConfiguration;\n    }()\n  }, {\n    key: \"formatTransaction\",\n    value: function () {\n      var _formatTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(txParams) {\n        var clonedTxParams, defaultGasLimit, _defaultGasLimit, _yield$this$getDefaul, defaultGasPrice, defaultMaxFeePerGas, defaultMaxPriorityFeePerGas;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this.chainConfig) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Chain config not initialized\");\n\n              case 2:\n                clonedTxParams = _objectSpread$1({}, txParams);\n\n                if (!(clonedTxParams.nonce === undefined)) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                _context3.next = 6;\n                return this.providerProxy.request({\n                  method: \"eth_getTransactionCount\",\n                  params: [txParams.from, \"latest\"]\n                });\n\n              case 6:\n                clonedTxParams.nonce = _context3.sent;\n\n              case 7:\n                if (!(!this.isEIP1559Compatible && clonedTxParams.gasPrice)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                if (clonedTxParams.maxFeePerGas) delete clonedTxParams.maxFeePerGas;\n                if (clonedTxParams.maxPriorityFeePerGas) delete clonedTxParams.maxPriorityFeePerGas; // if gas is not provided explicitly, estimate it.\n\n                if (clonedTxParams.gas) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _context3.next = 13;\n                return this.getDefaultGasLimit(clonedTxParams);\n\n              case 13:\n                defaultGasLimit = _context3.sent;\n\n                if (defaultGasLimit) {\n                  clonedTxParams.gasLimit = defaultGasLimit;\n                }\n\n                _context3.next = 18;\n                break;\n\n              case 17:\n                clonedTxParams.gasLimit = clonedTxParams.gas;\n\n              case 18:\n                return _context3.abrupt(\"return\", clonedTxParams);\n\n              case 19:\n                if (clonedTxParams.gas) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                _context3.next = 22;\n                return this.getDefaultGasLimit(clonedTxParams);\n\n              case 22:\n                _defaultGasLimit = _context3.sent;\n\n                if (_defaultGasLimit) {\n                  clonedTxParams.gasLimit = _defaultGasLimit;\n                }\n\n                _context3.next = 27;\n                break;\n\n              case 26:\n                clonedTxParams.gasLimit = clonedTxParams.gas;\n\n              case 27:\n                _context3.next = 29;\n                return this.getDefaultGasFees(clonedTxParams);\n\n              case 29:\n                _yield$this$getDefaul = _context3.sent;\n                defaultGasPrice = _yield$this$getDefaul.gasPrice;\n                defaultMaxFeePerGas = _yield$this$getDefaul.maxFeePerGas;\n                defaultMaxPriorityFeePerGas = _yield$this$getDefaul.maxPriorityFeePerGas;\n\n                if (this.isEIP1559Compatible) {\n                  // If the dapp has suggested a gas price, but no maxFeePerGas or maxPriorityFeePerGas\n                  //  then we set maxFeePerGas and maxPriorityFeePerGas to the suggested gasPrice.\n                  if (clonedTxParams.gasPrice && !clonedTxParams.maxFeePerGas && !clonedTxParams.maxPriorityFeePerGas) {\n                    clonedTxParams.maxFeePerGas = clonedTxParams.gasPrice;\n                    clonedTxParams.maxPriorityFeePerGas = bnLessThan(typeof defaultMaxPriorityFeePerGas === \"string\" ? stripHexPrefix(defaultMaxPriorityFeePerGas) : defaultMaxPriorityFeePerGas, typeof clonedTxParams.gasPrice === \"string\" ? stripHexPrefix(clonedTxParams.gasPrice) : clonedTxParams.gasPrice) ? defaultMaxPriorityFeePerGas : clonedTxParams.gasPrice;\n                  } else {\n                    if (defaultMaxFeePerGas && !clonedTxParams.maxFeePerGas) {\n                      // If the dapp has not set the gasPrice or the maxFeePerGas, then we set maxFeePerGas\n                      // with the one returned by the gasFeeController, if that is available.\n                      clonedTxParams.maxFeePerGas = defaultMaxFeePerGas;\n                    }\n\n                    if (defaultMaxPriorityFeePerGas && !clonedTxParams.maxPriorityFeePerGas) {\n                      // If the dapp has not set the gasPrice or the maxPriorityFeePerGas, then we set maxPriorityFeePerGas\n                      // with the one returned by the gasFeeController, if that is available.\n                      clonedTxParams.maxPriorityFeePerGas = defaultMaxPriorityFeePerGas;\n                    }\n\n                    if (defaultGasPrice && !clonedTxParams.maxFeePerGas) {\n                      // If the dapp has not set the gasPrice or the maxFeePerGas, and no maxFeePerGas is available\n                      // then we set maxFeePerGas to the defaultGasPrice, assuming it is\n                      // available.\n                      clonedTxParams.maxFeePerGas = defaultGasPrice;\n                    }\n\n                    if (clonedTxParams.maxFeePerGas && !clonedTxParams.maxPriorityFeePerGas) {\n                      // If the dapp has not set the gasPrice or the maxPriorityFeePerGas, and no maxPriorityFeePerGas is\n                      // available  then we set maxPriorityFeePerGas to\n                      // clonedTxParams.maxFeePerGas, which will either be the gasPrice from the controller, the maxFeePerGas\n                      // set by the dapp, or the maxFeePerGas from the controller.\n                      clonedTxParams.maxPriorityFeePerGas = clonedTxParams.maxFeePerGas;\n                    }\n                  } // We remove the gasPrice param entirely when on an eip1559 compatible network\n\n\n                  delete clonedTxParams.gasPrice;\n                } else {\n                  // We ensure that maxFeePerGas and maxPriorityFeePerGas are not in the transaction params\n                  // when not on a EIP1559 compatible network\n                  delete clonedTxParams.maxPriorityFeePerGas;\n                  delete clonedTxParams.maxFeePerGas;\n                } // If we have gotten to this point, and none of gasPrice, maxPriorityFeePerGas or maxFeePerGas are\n                // set on txParams, it means that either we are on a non-EIP1559 network and the dapp didn't suggest\n                // a gas price, or we are on an EIP1559 network, and none of gasPrice, maxPriorityFeePerGas or maxFeePerGas\n                // were available from either the dapp or the network.\n\n\n                if (defaultGasPrice && !clonedTxParams.gasPrice && !clonedTxParams.maxPriorityFeePerGas && !clonedTxParams.maxFeePerGas) {\n                  clonedTxParams.gasPrice = defaultGasPrice;\n                }\n\n                clonedTxParams.type = this.isEIP1559Compatible ? TRANSACTION_ENVELOPE_TYPES.FEE_MARKET : TRANSACTION_ENVELOPE_TYPES.LEGACY;\n                clonedTxParams.chainId = this.chainConfig.chainId;\n                return _context3.abrupt(\"return\", clonedTxParams);\n\n              case 38:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function formatTransaction(_x) {\n        return _formatTransaction.apply(this, arguments);\n      }\n\n      return formatTransaction;\n    }()\n  }, {\n    key: \"fetchEthGasPriceEstimate\",\n    value: function () {\n      var _fetchEthGasPriceEstimate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var gasPrice;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.providerProxy.request({\n                  method: \"eth_gasPrice\",\n                  params: []\n                });\n\n              case 2:\n                gasPrice = _context4.sent;\n                return _context4.abrupt(\"return\", {\n                  gasPrice: hexWEIToDecGWEI(gasPrice).toString()\n                });\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function fetchEthGasPriceEstimate() {\n        return _fetchEthGasPriceEstimate.apply(this, arguments);\n      }\n\n      return fetchEthGasPriceEstimate;\n    }()\n  }, {\n    key: \"getEIP1559Compatibility\",\n    value: function () {\n      var _getEIP1559Compatibility = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var latestBlock, supportsEIP1559;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.providerProxy.request({\n                  method: \"eth_getBlockByNumber\",\n                  params: [\"latest\", false]\n                });\n\n              case 2:\n                latestBlock = _context5.sent;\n                supportsEIP1559 = latestBlock && latestBlock.baseFeePerGas !== undefined;\n                return _context5.abrupt(\"return\", !!supportsEIP1559);\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getEIP1559Compatibility() {\n        return _getEIP1559Compatibility.apply(this, arguments);\n      }\n\n      return getEIP1559Compatibility;\n    }()\n  }, {\n    key: \"fetchGasFeeEstimateData\",\n    value: function () {\n      var _fetchGasFeeEstimateData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var isLegacyGasAPICompatible, chainId, gasData, estimates, _estimates, _estimates2;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (this.chainConfig) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Chain config not initialized\");\n\n              case 2:\n                isLegacyGasAPICompatible = this.chainConfig.chainId === \"0x1\";\n                chainId = Number.parseInt(this.chainConfig.chainId, 16);\n                _context6.prev = 4;\n\n                if (!this.isEIP1559Compatible) {\n                  _context6.next = 12;\n                  break;\n                }\n\n                _context6.next = 8;\n                return fetchEip1159GasEstimates(EIP1559APIEndpoint.replace(\"<chain_id>\", \"\".concat(chainId)));\n\n              case 8:\n                estimates = _context6.sent;\n                gasData = {\n                  gasFeeEstimates: estimates,\n                  gasEstimateType: GAS_ESTIMATE_TYPES.FEE_MARKET\n                };\n                _context6.next = 20;\n                break;\n\n              case 12:\n                if (!isLegacyGasAPICompatible) {\n                  _context6.next = 19;\n                  break;\n                }\n\n                _context6.next = 15;\n                return fetchLegacyGasPriceEstimates(LegacyGasAPIEndpoint.replace(\"<chain_id>\", \"\".concat(chainId)));\n\n              case 15:\n                _estimates = _context6.sent;\n                gasData = {\n                  gasFeeEstimates: _estimates,\n                  gasEstimateType: GAS_ESTIMATE_TYPES.LEGACY\n                };\n                _context6.next = 20;\n                break;\n\n              case 19:\n                throw new Error(\"Main gas fee/price estimation failed. Use fallback\");\n\n              case 20:\n                _context6.next = 34;\n                break;\n\n              case 22:\n                _context6.prev = 22;\n                _context6.t0 = _context6[\"catch\"](4);\n                _context6.prev = 24;\n                _context6.next = 27;\n                return this.fetchEthGasPriceEstimate();\n\n              case 27:\n                _estimates2 = _context6.sent;\n                gasData = {\n                  gasFeeEstimates: _estimates2,\n                  gasEstimateType: GAS_ESTIMATE_TYPES.ETH_GASPRICE\n                };\n                _context6.next = 34;\n                break;\n\n              case 31:\n                _context6.prev = 31;\n                _context6.t1 = _context6[\"catch\"](24);\n                throw new Error(\"Gas fee/price estimation failed. Message: \".concat(_context6.t1.message));\n\n              case 34:\n                return _context6.abrupt(\"return\", gasData);\n\n              case 35:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[4, 22], [24, 31]]);\n      }));\n\n      function fetchGasFeeEstimateData() {\n        return _fetchGasFeeEstimateData.apply(this, arguments);\n      }\n\n      return fetchGasFeeEstimateData;\n    }()\n  }, {\n    key: \"getDefaultGasFees\",\n    value: function () {\n      var _getDefaultGasFees = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(txParams) {\n        var _yield$this$fetchGasF, gasFeeEstimates, gasEstimateType, _gasFeeEstimates$medi, suggestedMaxPriorityFeePerGas, suggestedMaxFeePerGas, _yield$this$fetchEthG, gasPrice;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(!this.isEIP1559Compatible && txParams.gasPrice || this.isEIP1559Compatible && txParams.maxFeePerGas && txParams.maxPriorityFeePerGas)) {\n                  _context7.next = 2;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", {});\n\n              case 2:\n                _context7.prev = 2;\n                _context7.next = 5;\n                return this.fetchGasFeeEstimateData();\n\n              case 5:\n                _yield$this$fetchGasF = _context7.sent;\n                gasFeeEstimates = _yield$this$fetchGasF.gasFeeEstimates;\n                gasEstimateType = _yield$this$fetchGasF.gasEstimateType;\n\n                if (!(this.isEIP1559Compatible && gasEstimateType === GAS_ESTIMATE_TYPES.FEE_MARKET)) {\n                  _context7.next = 16;\n                  break;\n                }\n\n                _gasFeeEstimates$medi = gasFeeEstimates.medium;\n                _gasFeeEstimates$medi = _gasFeeEstimates$medi === void 0 ? {} : _gasFeeEstimates$medi;\n                suggestedMaxPriorityFeePerGas = _gasFeeEstimates$medi.suggestedMaxPriorityFeePerGas, suggestedMaxFeePerGas = _gasFeeEstimates$medi.suggestedMaxFeePerGas;\n\n                if (!(suggestedMaxPriorityFeePerGas && suggestedMaxFeePerGas)) {\n                  _context7.next = 14;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", {\n                  maxFeePerGas: addHexPrefix(decGWEIToHexWEI(suggestedMaxFeePerGas)),\n                  maxPriorityFeePerGas: addHexPrefix(decGWEIToHexWEI(suggestedMaxPriorityFeePerGas))\n                });\n\n              case 14:\n                _context7.next = 22;\n                break;\n\n              case 16:\n                if (!(gasEstimateType === GAS_ESTIMATE_TYPES.LEGACY)) {\n                  _context7.next = 20;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", {\n                  gasPrice: addHexPrefix(decGWEIToHexWEI(gasFeeEstimates.medium))\n                });\n\n              case 20:\n                if (!(gasEstimateType === GAS_ESTIMATE_TYPES.ETH_GASPRICE)) {\n                  _context7.next = 22;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", {\n                  gasPrice: addHexPrefix(decGWEIToHexWEI(gasFeeEstimates.gasPrice))\n                });\n\n              case 22:\n                _context7.next = 27;\n                break;\n\n              case 24:\n                _context7.prev = 24;\n                _context7.t0 = _context7[\"catch\"](2);\n                log.error(_context7.t0);\n\n              case 27:\n                _context7.next = 29;\n                return this.fetchEthGasPriceEstimate();\n\n              case 29:\n                _yield$this$fetchEthG = _context7.sent;\n                gasPrice = _yield$this$fetchEthG.gasPrice;\n                return _context7.abrupt(\"return\", {\n                  gasPrice: addHexPrefix(decGWEIToHexWEI(gasPrice))\n                });\n\n              case 32:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[2, 24]]);\n      }));\n\n      function getDefaultGasFees(_x2) {\n        return _getDefaultGasFees.apply(this, arguments);\n      }\n\n      return getDefaultGasFees;\n    }()\n  }, {\n    key: \"estimateTxGas\",\n    value: function () {\n      var _estimateTxGas = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(txMeta) {\n        var txParams, gas;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                txParams = _objectSpread$1({}, txMeta); // `eth_estimateGas` can fail if the user has insufficient balance for the\n                // value being sent, or for the gas cost. We don't want to check their\n                // balance here, we just want the gas estimate. The gas price is removed\n                // to skip those balance checks. We check balance elsewhere. We also delete\n                // maxFeePerGas and maxPriorityFeePerGas to support EIP-1559 txs.\n\n                delete txParams.gasPrice;\n                delete txParams.maxFeePerGas;\n                delete txParams.maxPriorityFeePerGas;\n                _context8.next = 6;\n                return this.providerProxy.request({\n                  method: \"eth_estimateGas\",\n                  params: [txParams]\n                });\n\n              case 6:\n                gas = _context8.sent;\n                return _context8.abrupt(\"return\", gas);\n\n              case 8:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function estimateTxGas(_x3) {\n        return _estimateTxGas.apply(this, arguments);\n      }\n\n      return estimateTxGas;\n    }()\n  }, {\n    key: \"analyzeGasUsage\",\n    value: function () {\n      var _analyzeGasUsage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(txMeta) {\n        var block, blockGasLimitBN, saferGasLimitBN, estimatedGasHex;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this.providerProxy.request({\n                  method: \"eth_getBlockByNumber\",\n                  params: [\"latest\", false]\n                });\n\n              case 2:\n                block = _context9.sent;\n                // fallback to block gasLimit\n                blockGasLimitBN = hexToBn(block.gasLimit);\n                saferGasLimitBN = BnMultiplyByFraction(blockGasLimitBN, 19, 20);\n                estimatedGasHex = bnToHex(saferGasLimitBN);\n                _context9.prev = 6;\n                _context9.next = 9;\n                return this.estimateTxGas(txMeta);\n\n              case 9:\n                estimatedGasHex = _context9.sent;\n                _context9.next = 15;\n                break;\n\n              case 12:\n                _context9.prev = 12;\n                _context9.t0 = _context9[\"catch\"](6);\n                log.warn(_context9.t0);\n\n              case 15:\n                return _context9.abrupt(\"return\", {\n                  blockGasLimit: block.gasLimit,\n                  estimatedGasHex: estimatedGasHex\n                });\n\n              case 16:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[6, 12]]);\n      }));\n\n      function analyzeGasUsage(_x4) {\n        return _analyzeGasUsage.apply(this, arguments);\n      }\n\n      return analyzeGasUsage;\n    }()\n  }, {\n    key: \"addGasBuffer\",\n    value: function addGasBuffer(initialGasLimitHex, blockGasLimitHex) {\n      var multiplier = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1.5;\n      var initialGasLimitBn = hexToBn(initialGasLimitHex);\n      var blockGasLimitBn = hexToBn(blockGasLimitHex);\n      var upperGasLimitBn = blockGasLimitBn.muln(0.9);\n      var bufferedGasLimitBn = initialGasLimitBn.muln(multiplier); // if initialGasLimit is above blockGasLimit, dont modify it\n\n      if (initialGasLimitBn.gt(upperGasLimitBn)) return bnToHex(initialGasLimitBn); // if bufferedGasLimit is below blockGasLimit, use bufferedGasLimit\n\n      if (bufferedGasLimitBn.lt(upperGasLimitBn)) return bnToHex(bufferedGasLimitBn); // otherwise use blockGasLimit\n\n      return bnToHex(upperGasLimitBn);\n    }\n  }, {\n    key: \"determineTransactionCategory\",\n    value: function () {\n      var _determineTransactionCategory = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(txParameters) {\n        var data, to, code, txCategory, codeIsEmpty;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                data = txParameters.data, to = txParameters.to;\n                code = \"\";\n\n                if (!(data && !to)) {\n                  _context10.next = 6;\n                  break;\n                }\n\n                txCategory = TRANSACTION_TYPES.DEPLOY_CONTRACT;\n                _context10.next = 17;\n                break;\n\n              case 6:\n                _context10.prev = 6;\n                _context10.next = 9;\n                return this.providerProxy.request({\n                  method: \"eth_getCode\",\n                  params: [to, \"latest\"]\n                });\n\n              case 9:\n                code = _context10.sent;\n                _context10.next = 15;\n                break;\n\n              case 12:\n                _context10.prev = 12;\n                _context10.t0 = _context10[\"catch\"](6);\n                log.warn(_context10.t0);\n\n              case 15:\n                codeIsEmpty = !code || code === \"0x\" || code === \"0x0\";\n                txCategory = codeIsEmpty ? TRANSACTION_TYPES.SENT_ETHER : TRANSACTION_TYPES.CONTRACT_INTERACTION;\n\n              case 17:\n                return _context10.abrupt(\"return\", {\n                  transactionCategory: txCategory,\n                  code: code\n                });\n\n              case 18:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[6, 12]]);\n      }));\n\n      function determineTransactionCategory(_x5) {\n        return _determineTransactionCategory.apply(this, arguments);\n      }\n\n      return determineTransactionCategory;\n    }()\n  }, {\n    key: \"getDefaultGasLimit\",\n    value: function () {\n      var _getDefaultGasLimit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(txParams) {\n        var _yield$this$determine, transactionCategory, TWENTY_ONE_THOUSAND, _yield$this$analyzeGa, blockGasLimit, estimatedGasHex, gasLimit;\n\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this.determineTransactionCategory(_objectSpread$1({}, txParams));\n\n              case 2:\n                _yield$this$determine = _context11.sent;\n                transactionCategory = _yield$this$determine.transactionCategory;\n\n                if (!txParams.gas) {\n                  _context11.next = 6;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\", txParams.gas);\n\n              case 6:\n                if (!(txParams.to && transactionCategory === TRANSACTION_TYPES.SENT_ETHER)) {\n                  _context11.next = 11;\n                  break;\n                }\n\n                if (!txParams.data) {\n                  _context11.next = 9;\n                  break;\n                }\n\n                throw Error(\"TxGasUtil - Trying to call a function on a non-contract address\");\n\n              case 9:\n                TWENTY_ONE_THOUSAND = 21000; // This is a standard ether simple send, gas requirement is exactly 21k\n\n                return _context11.abrupt(\"return\", addHexPrefix(TWENTY_ONE_THOUSAND.toString(16)));\n\n              case 11:\n                _context11.next = 13;\n                return this.analyzeGasUsage(txParams);\n\n              case 13:\n                _yield$this$analyzeGa = _context11.sent;\n                blockGasLimit = _yield$this$analyzeGa.blockGasLimit;\n                estimatedGasHex = _yield$this$analyzeGa.estimatedGasHex;\n                // add additional gas buffer to our estimation for safety\n                gasLimit = this.addGasBuffer(addHexPrefix(estimatedGasHex), blockGasLimit);\n                return _context11.abrupt(\"return\", gasLimit);\n\n              case 18:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function getDefaultGasLimit(_x6) {\n        return _getDefaultGasLimit.apply(this, arguments);\n      }\n\n      return getDefaultGasLimit;\n    }()\n  }]);\n\n  return TransactionFormatter;\n}();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar EthereumPrivateKeyProvider = /*#__PURE__*/function (_BaseProvider) {\n  _inherits(EthereumPrivateKeyProvider, _BaseProvider);\n\n  var _super = _createSuper(EthereumPrivateKeyProvider);\n\n  function EthereumPrivateKeyProvider(_ref) {\n    var config = _ref.config,\n        state = _ref.state;\n\n    _classCallCheck(this, EthereumPrivateKeyProvider);\n\n    return _super.call(this, {\n      config: {\n        chainConfig: _objectSpread(_objectSpread({}, config.chainConfig), {}, {\n          chainNamespace: CHAIN_NAMESPACES.EIP155\n        })\n      },\n      state: state\n    });\n  }\n\n  _createClass(EthereumPrivateKeyProvider, [{\n    key: \"enable\",\n    value: function () {\n      var _enable = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.state.privateKey) {\n                  _context.next = 2;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Private key is not found in state, plz pass it in constructor state param\",\n                  code: 4902\n                });\n\n              case 2:\n                _context.next = 4;\n                return this.setupProvider(this.state.privateKey);\n\n              case 4:\n                return _context.abrupt(\"return\", this._providerEngineProxy.request({\n                  method: \"eth_accounts\"\n                }));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function enable() {\n        return _enable.apply(this, arguments);\n      }\n\n      return enable;\n    }()\n  }, {\n    key: \"setupProvider\",\n    value: function () {\n      var _setupProvider = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(privKey) {\n        var txFormatter, providerHandlers, ethMiddleware, chainSwitchMiddleware, engine, _createJsonRpcClient, networkMiddleware, provider;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                txFormatter = new TransactionFormatter({\n                  getProviderEngineProxy: this.getProviderEngineProxy.bind(this)\n                });\n                providerHandlers = getProviderHandlers({\n                  txFormatter: txFormatter,\n                  privKey: privKey,\n                  getProviderEngineProxy: this.getProviderEngineProxy.bind(this)\n                });\n                ethMiddleware = createEthMiddleware(providerHandlers);\n                chainSwitchMiddleware = this.getChainSwitchMiddleware();\n                engine = new JRPCEngine(); // Not a partial anymore because of checks in ctor\n\n                _createJsonRpcClient = createJsonRpcClient(this.config.chainConfig), networkMiddleware = _createJsonRpcClient.networkMiddleware;\n                engine.push(ethMiddleware);\n                engine.push(chainSwitchMiddleware);\n                engine.push(this.getAccountMiddleware());\n                engine.push(networkMiddleware);\n                provider = providerFromEngine(engine);\n                this.updateProviderEngineProxy(provider);\n                _context2.next = 14;\n                return txFormatter.init();\n\n              case 14:\n                _context2.next = 16;\n                return this.lookupNetwork();\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setupProvider(_x) {\n        return _setupProvider.apply(this, arguments);\n      }\n\n      return setupProvider;\n    }()\n  }, {\n    key: \"updateAccount\",\n    value: function () {\n      var _updateAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(params) {\n        var existingKey;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this._providerEngineProxy) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 2:\n                _context3.next = 4;\n                return this._providerEngineProxy.request({\n                  method: \"eth_private_key\"\n                });\n\n              case 4:\n                existingKey = _context3.sent;\n\n                if (!(existingKey !== params.privateKey)) {\n                  _context3.next = 14;\n                  break;\n                }\n\n                _context3.next = 8;\n                return this.setupProvider(params.privateKey);\n\n              case 8:\n                _context3.t0 = this._providerEngineProxy;\n                _context3.next = 11;\n                return this._providerEngineProxy.request({\n                  method: \"eth_accounts\"\n                });\n\n              case 11:\n                _context3.t1 = _context3.sent;\n                _context3.t2 = {\n                  accounts: _context3.t1\n                };\n\n                _context3.t0.emit.call(_context3.t0, \"accountsChanged\", _context3.t2);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function updateAccount(_x2) {\n        return _updateAccount.apply(this, arguments);\n      }\n\n      return updateAccount;\n    }()\n  }, {\n    key: \"switchChain\",\n    value: function () {\n      var _switchChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(params) {\n        var chainConfig, privKey;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (this._providerEngineProxy) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 2:\n                chainConfig = this.getChainConfig(params.chainId);\n                this.update({\n                  chainId: \"loading\"\n                });\n                this.configure({\n                  chainConfig: chainConfig\n                });\n                _context4.next = 7;\n                return this._providerEngineProxy.request({\n                  method: \"eth_private_key\"\n                });\n\n              case 7:\n                privKey = _context4.sent;\n                _context4.next = 10;\n                return this.setupProvider(privKey);\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function switchChain(_x3) {\n        return _switchChain.apply(this, arguments);\n      }\n\n      return switchChain;\n    }()\n  }, {\n    key: \"lookupNetwork\",\n    value: function () {\n      var _lookupNetwork = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var chainId, network;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this._providerEngineProxy) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                throw ethErrors.provider.custom({\n                  message: \"Provider is not initialized\",\n                  code: 4902\n                });\n\n              case 2:\n                chainId = this.config.chainConfig.chainId;\n\n                if (chainId) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                throw ethErrors.rpc.invalidParams(\"chainId is required while lookupNetwork\");\n\n              case 5:\n                _context5.next = 7;\n                return this._providerEngineProxy.request({\n                  method: \"net_version\",\n                  params: []\n                });\n\n              case 7:\n                network = _context5.sent;\n\n                if (!(parseInt(chainId, 16) !== parseInt(network, 10))) {\n                  _context5.next = 10;\n                  break;\n                }\n\n                throw ethErrors.provider.chainDisconnected(\"Invalid network, net_version is: \".concat(network));\n\n              case 10:\n                if (this.state.chainId !== chainId) {\n                  this._providerEngineProxy.emit(\"chainChanged\", chainId);\n\n                  this._providerEngineProxy.emit(\"connect\", {\n                    chainId: chainId\n                  });\n                }\n\n                this.update({\n                  chainId: chainId\n                });\n                return _context5.abrupt(\"return\", network);\n\n              case 13:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function lookupNetwork() {\n        return _lookupNetwork.apply(this, arguments);\n      }\n\n      return lookupNetwork;\n    }()\n  }, {\n    key: \"getChainSwitchMiddleware\",\n    value: function getChainSwitchMiddleware() {\n      var _this = this;\n\n      var chainSwitchHandlers = {\n        addChain: function () {\n          var _addChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(params) {\n            var chainId, chainName, rpcUrls, blockExplorerUrls, nativeCurrency;\n            return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n              while (1) {\n                switch (_context6.prev = _context6.next) {\n                  case 0:\n                    chainId = params.chainId, chainName = params.chainName, rpcUrls = params.rpcUrls, blockExplorerUrls = params.blockExplorerUrls, nativeCurrency = params.nativeCurrency;\n\n                    _this.addChain({\n                      chainNamespace: \"eip155\",\n                      chainId: chainId,\n                      ticker: (nativeCurrency === null || nativeCurrency === void 0 ? void 0 : nativeCurrency.symbol) || \"ETH\",\n                      tickerName: (nativeCurrency === null || nativeCurrency === void 0 ? void 0 : nativeCurrency.name) || \"Ether\",\n                      displayName: chainName,\n                      rpcTarget: rpcUrls[0],\n                      blockExplorer: (blockExplorerUrls === null || blockExplorerUrls === void 0 ? void 0 : blockExplorerUrls[0]) || \"\"\n                    });\n\n                  case 2:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }\n            }, _callee6);\n          }));\n\n          function addChain(_x4) {\n            return _addChain.apply(this, arguments);\n          }\n\n          return addChain;\n        }(),\n        switchChain: function () {\n          var _switchChain2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(params) {\n            var chainId;\n            return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    chainId = params.chainId;\n                    _context7.next = 3;\n                    return _this.switchChain({\n                      chainId: chainId\n                    });\n\n                  case 3:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }\n            }, _callee7);\n          }));\n\n          function switchChain(_x5) {\n            return _switchChain2.apply(this, arguments);\n          }\n\n          return switchChain;\n        }()\n      };\n      var chainSwitchMiddleware = createChainSwitchMiddleware(chainSwitchHandlers);\n      return chainSwitchMiddleware;\n    }\n  }, {\n    key: \"getAccountMiddleware\",\n    value: function getAccountMiddleware() {\n      var _this2 = this;\n\n      var accountHandlers = {\n        updatePrivatekey: function () {\n          var _updatePrivatekey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(params) {\n            var privateKey;\n            return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n              while (1) {\n                switch (_context8.prev = _context8.next) {\n                  case 0:\n                    privateKey = params.privateKey;\n                    _context8.next = 3;\n                    return _this2.updateAccount({\n                      privateKey: privateKey\n                    });\n\n                  case 3:\n                  case \"end\":\n                    return _context8.stop();\n                }\n              }\n            }, _callee8);\n          }));\n\n          function updatePrivatekey(_x6) {\n            return _updatePrivatekey.apply(this, arguments);\n          }\n\n          return updatePrivatekey;\n        }()\n      };\n      return createAccountMiddleware(accountHandlers);\n    }\n  }]);\n\n  return EthereumPrivateKeyProvider;\n}(BaseProvider);\n\n_defineProperty(EthereumPrivateKeyProvider, \"getProviderInstance\", /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(params) {\n    var providerFactory;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            providerFactory = new EthereumPrivateKeyProvider({\n              config: {\n                chainConfig: params.chainConfig\n              }\n            });\n            _context9.next = 3;\n            return providerFactory.setupProvider(params.privKey);\n\n          case 3:\n            return _context9.abrupt(\"return\", providerFactory);\n\n          case 4:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function (_x7) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nexport { EthereumPrivateKeyProvider, TransactionFormatter, WalletConnectProvider, getProviderHandlers };\n//# sourceMappingURL=ethereumProvider.esm.js.map\n",null,null,null,null,null,null,null,null,null,null,null,"export * from './personal-sign';\nexport * from './sign-typed-data';\nexport * from './encryption';\nexport { concatSig, normalize } from './utils';\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar types_1 = require(\"./types\");\nvar baseTransaction_1 = require(\"./baseTransaction\");\nvar util_1 = require(\"./util\");\nvar TRANSACTION_TYPE = 0;\n/**\n * An Ethereum non-typed (legacy) transaction\n */\nvar Transaction = /** @class */ (function (_super) {\n    __extends(Transaction, _super);\n    /**\n     * This constructor takes the values, validates them, assigns them and freezes the object.\n     *\n     * It is not recommended to use this constructor directly. Instead use\n     * the static factory methods to assist in creating a Transaction object from\n     * varying data types.\n     */\n    function Transaction(txData, opts) {\n        if (opts === void 0) { opts = {}; }\n        var _this = this;\n        var _a;\n        _this = _super.call(this, __assign(__assign({}, txData), { type: TRANSACTION_TYPE }), opts) || this;\n        _this.common = _this._validateTxV(_this.v, opts.common);\n        _this.gasPrice = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(txData.gasPrice === '' ? '0x' : txData.gasPrice));\n        if (_this.gasPrice.mul(_this.gasLimit).gt(ethereumjs_util_1.MAX_INTEGER)) {\n            var msg = _this._errorMsg('gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)');\n            throw new Error(msg);\n        }\n        _this._validateCannotExceedMaxInteger({ gasPrice: _this.gasPrice });\n        if (_this.common.gteHardfork('spuriousDragon')) {\n            if (!_this.isSigned()) {\n                _this.activeCapabilities.push(types_1.Capability.EIP155ReplayProtection);\n            }\n            else {\n                // EIP155 spec:\n                // If block.number >= 2,675,000 and v = CHAIN_ID * 2 + 35 or v = CHAIN_ID * 2 + 36\n                // then when computing the hash of a transaction for purposes of signing or recovering\n                // instead of hashing only the first six elements (i.e. nonce, gasprice, startgas, to, value, data)\n                // hash nine elements, with v replaced by CHAIN_ID, r = 0 and s = 0.\n                var v = _this.v;\n                var chainIdDoubled = _this.common.chainIdBN().muln(2);\n                // v and chain ID meet EIP-155 conditions\n                if (v.eq(chainIdDoubled.addn(35)) || v.eq(chainIdDoubled.addn(36))) {\n                    _this.activeCapabilities.push(types_1.Capability.EIP155ReplayProtection);\n                }\n            }\n        }\n        if (_this.common.isActivatedEIP(3860)) {\n            (0, util_1.checkMaxInitCodeSize)(_this.common, _this.data.length);\n        }\n        var freeze = (_a = opts === null || opts === void 0 ? void 0 : opts.freeze) !== null && _a !== void 0 ? _a : true;\n        if (freeze) {\n            Object.freeze(_this);\n        }\n        return _this;\n    }\n    /**\n     * Instantiate a transaction from a data dictionary.\n     *\n     * Format: { nonce, gasPrice, gasLimit, to, value, data, v, r, s }\n     *\n     * Notes:\n     * - All parameters are optional and have some basic default values\n     */\n    Transaction.fromTxData = function (txData, opts) {\n        if (opts === void 0) { opts = {}; }\n        return new Transaction(txData, opts);\n    };\n    /**\n     * Instantiate a transaction from the serialized tx.\n     *\n     * Format: `rlp([nonce, gasPrice, gasLimit, to, value, data, v, r, s])`\n     */\n    Transaction.fromSerializedTx = function (serialized, opts) {\n        if (opts === void 0) { opts = {}; }\n        var values = ethereumjs_util_1.rlp.decode(serialized);\n        if (!Array.isArray(values)) {\n            throw new Error('Invalid serialized tx input. Must be array');\n        }\n        return this.fromValuesArray(values, opts);\n    };\n    /**\n     * Instantiate a transaction from the serialized tx.\n     * (alias of {@link Transaction.fromSerializedTx})\n     *\n     * @deprecated this constructor alias is deprecated and will be removed\n     * in favor of the {@link Transaction.fromSerializedTx} constructor\n     */\n    Transaction.fromRlpSerializedTx = function (serialized, opts) {\n        if (opts === void 0) { opts = {}; }\n        return Transaction.fromSerializedTx(serialized, opts);\n    };\n    /**\n     * Create a transaction from a values array.\n     *\n     * Format: `[nonce, gasPrice, gasLimit, to, value, data, v, r, s]`\n     */\n    Transaction.fromValuesArray = function (values, opts) {\n        if (opts === void 0) { opts = {}; }\n        // If length is not 6, it has length 9. If v/r/s are empty Buffers, it is still an unsigned transaction\n        // This happens if you get the RLP data from `raw()`\n        if (values.length !== 6 && values.length !== 9) {\n            throw new Error('Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).');\n        }\n        var _a = __read(values, 9), nonce = _a[0], gasPrice = _a[1], gasLimit = _a[2], to = _a[3], value = _a[4], data = _a[5], v = _a[6], r = _a[7], s = _a[8];\n        (0, ethereumjs_util_1.validateNoLeadingZeroes)({ nonce: nonce, gasPrice: gasPrice, gasLimit: gasLimit, value: value, v: v, r: r, s: s });\n        return new Transaction({\n            nonce: nonce,\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n            to: to,\n            value: value,\n            data: data,\n            v: v,\n            r: r,\n            s: s,\n        }, opts);\n    };\n    /**\n     * Returns a Buffer Array of the raw Buffers of the legacy transaction, in order.\n     *\n     * Format: `[nonce, gasPrice, gasLimit, to, value, data, v, r, s]`\n     *\n     * For legacy txs this is also the correct format to add transactions\n     * to a block with {@link Block.fromValuesArray} (use the `serialize()` method\n     * for typed txs).\n     *\n     * For an unsigned tx this method returns the empty Buffer values\n     * for the signature parameters `v`, `r` and `s`. For an EIP-155 compliant\n     * representation have a look at {@link Transaction.getMessageToSign}.\n     */\n    Transaction.prototype.raw = function () {\n        return [\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.nonce),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.gasPrice),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.gasLimit),\n            this.to !== undefined ? this.to.buf : Buffer.from([]),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.value),\n            this.data,\n            this.v !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.v) : Buffer.from([]),\n            this.r !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.r) : Buffer.from([]),\n            this.s !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.s) : Buffer.from([]),\n        ];\n    };\n    /**\n     * Returns the serialized encoding of the legacy transaction.\n     *\n     * Format: `rlp([nonce, gasPrice, gasLimit, to, value, data, v, r, s])`\n     *\n     * For an unsigned tx this method uses the empty Buffer values for the\n     * signature parameters `v`, `r` and `s` for encoding. For an EIP-155 compliant\n     * representation for external signing use {@link Transaction.getMessageToSign}.\n     */\n    Transaction.prototype.serialize = function () {\n        return ethereumjs_util_1.rlp.encode(this.raw());\n    };\n    Transaction.prototype._getMessageToSign = function () {\n        var values = [\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.nonce),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.gasPrice),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.gasLimit),\n            this.to !== undefined ? this.to.buf : Buffer.from([]),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.value),\n            this.data,\n        ];\n        if (this.supports(types_1.Capability.EIP155ReplayProtection)) {\n            values.push((0, ethereumjs_util_1.toBuffer)(this.common.chainIdBN()));\n            values.push((0, ethereumjs_util_1.unpadBuffer)((0, ethereumjs_util_1.toBuffer)(0)));\n            values.push((0, ethereumjs_util_1.unpadBuffer)((0, ethereumjs_util_1.toBuffer)(0)));\n        }\n        return values;\n    };\n    Transaction.prototype.getMessageToSign = function (hashMessage) {\n        if (hashMessage === void 0) { hashMessage = true; }\n        var message = this._getMessageToSign();\n        if (hashMessage) {\n            return (0, ethereumjs_util_1.rlphash)(message);\n        }\n        else {\n            return message;\n        }\n    };\n    /**\n     * The amount of gas paid for the data in this tx\n     */\n    Transaction.prototype.getDataFee = function () {\n        if (this.cache.dataFee && this.cache.dataFee.hardfork === this.common.hardfork()) {\n            return this.cache.dataFee.value;\n        }\n        if (Object.isFrozen(this)) {\n            this.cache.dataFee = {\n                value: _super.prototype.getDataFee.call(this),\n                hardfork: this.common.hardfork(),\n            };\n        }\n        return _super.prototype.getDataFee.call(this);\n    };\n    /**\n     * The up front amount that an account must have for this transaction to be valid\n     */\n    Transaction.prototype.getUpfrontCost = function () {\n        return this.gasLimit.mul(this.gasPrice).add(this.value);\n    };\n    /**\n     * Computes a sha3-256 hash of the serialized tx.\n     *\n     * This method can only be used for signed txs (it throws otherwise).\n     * Use {@link Transaction.getMessageToSign} to get a tx hash for the purpose of signing.\n     */\n    Transaction.prototype.hash = function () {\n        // In contrast to the tx type transaction implementations the `hash()` function\n        // for the legacy tx does not throw if the tx is not signed.\n        // This has been considered for inclusion but lead to unexpected backwards\n        // compatibility problems (no concrete reference found, needs validation).\n        //\n        // For context see also https://github.com/ethereumjs/ethereumjs-monorepo/pull/1445,\n        // September, 2021 as well as work done before.\n        //\n        // This should be updated along the next major version release by adding:\n        //\n        //if (!this.isSigned()) {\n        //  const msg = this._errorMsg('Cannot call hash method if transaction is not signed')\n        //  throw new Error(msg)\n        //}\n        if (Object.isFrozen(this)) {\n            if (!this.cache.hash) {\n                this.cache.hash = (0, ethereumjs_util_1.rlphash)(this.raw());\n            }\n            return this.cache.hash;\n        }\n        return (0, ethereumjs_util_1.rlphash)(this.raw());\n    };\n    /**\n     * Computes a sha3-256 hash which can be used to verify the signature\n     */\n    Transaction.prototype.getMessageToVerifySignature = function () {\n        if (!this.isSigned()) {\n            var msg = this._errorMsg('This transaction is not signed');\n            throw new Error(msg);\n        }\n        var message = this._getMessageToSign();\n        return (0, ethereumjs_util_1.rlphash)(message);\n    };\n    /**\n     * Returns the public key of the sender\n     */\n    Transaction.prototype.getSenderPublicKey = function () {\n        var _a;\n        var msgHash = this.getMessageToVerifySignature();\n        // EIP-2: All transaction signatures whose s-value is greater than secp256k1n/2 are considered invalid.\n        // Reasoning: https://ethereum.stackexchange.com/a/55728\n        if (this.common.gteHardfork('homestead') && ((_a = this.s) === null || _a === void 0 ? void 0 : _a.gt(types_1.N_DIV_2))) {\n            var msg = this._errorMsg('Invalid Signature: s-values greater than secp256k1n/2 are considered invalid');\n            throw new Error(msg);\n        }\n        var _b = this, v = _b.v, r = _b.r, s = _b.s;\n        try {\n            return (0, ethereumjs_util_1.ecrecover)(msgHash, v, (0, ethereumjs_util_1.bnToUnpaddedBuffer)(r), (0, ethereumjs_util_1.bnToUnpaddedBuffer)(s), this.supports(types_1.Capability.EIP155ReplayProtection) ? this.common.chainIdBN() : undefined);\n        }\n        catch (e) {\n            var msg = this._errorMsg('Invalid Signature');\n            throw new Error(msg);\n        }\n    };\n    /**\n     * Process the v, r, s values from the `sign` method of the base transaction.\n     */\n    Transaction.prototype._processSignature = function (v, r, s) {\n        var vBN = new ethereumjs_util_1.BN(v);\n        if (this.supports(types_1.Capability.EIP155ReplayProtection)) {\n            vBN.iadd(this.common.chainIdBN().muln(2).addn(8));\n        }\n        var opts = __assign(__assign({}, this.txOptions), { common: this.common });\n        return Transaction.fromTxData({\n            nonce: this.nonce,\n            gasPrice: this.gasPrice,\n            gasLimit: this.gasLimit,\n            to: this.to,\n            value: this.value,\n            data: this.data,\n            v: vBN,\n            r: new ethereumjs_util_1.BN(r),\n            s: new ethereumjs_util_1.BN(s),\n        }, opts);\n    };\n    /**\n     * Returns an object with the JSON representation of the transaction.\n     */\n    Transaction.prototype.toJSON = function () {\n        return {\n            nonce: (0, ethereumjs_util_1.bnToHex)(this.nonce),\n            gasPrice: (0, ethereumjs_util_1.bnToHex)(this.gasPrice),\n            gasLimit: (0, ethereumjs_util_1.bnToHex)(this.gasLimit),\n            to: this.to !== undefined ? this.to.toString() : undefined,\n            value: (0, ethereumjs_util_1.bnToHex)(this.value),\n            data: '0x' + this.data.toString('hex'),\n            v: this.v !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.v) : undefined,\n            r: this.r !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.r) : undefined,\n            s: this.s !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.s) : undefined,\n        };\n    };\n    /**\n     * Validates tx's `v` value\n     */\n    Transaction.prototype._validateTxV = function (v, common) {\n        // Check for valid v values in the scope of a signed legacy tx\n        if (v !== undefined) {\n            // v is 1. not matching the EIP-155 chainId included case and...\n            // v is 2. not matching the classic v=27 or v=28 case\n            if (v.ltn(37) && !v.eqn(27) && !v.eqn(28)) {\n                throw new Error(\"Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = \".concat(v));\n            }\n        }\n        var chainIdBN;\n        // No unsigned tx and EIP-155 activated and chain ID included\n        if (v !== undefined &&\n            (!common || common.gteHardfork('spuriousDragon')) &&\n            !v.eqn(27) &&\n            !v.eqn(28)) {\n            if (common) {\n                var chainIdDoubled = common.chainIdBN().muln(2);\n                var isValidEIP155V = v.eq(chainIdDoubled.addn(35)) || v.eq(chainIdDoubled.addn(36));\n                if (!isValidEIP155V) {\n                    throw new Error(\"Incompatible EIP155-based V \".concat(v, \" and chain id \").concat(common.chainIdBN(), \". See the Common parameter of the Transaction constructor to set the chain id.\"));\n                }\n            }\n            else {\n                // Derive the original chain ID\n                var numSub = void 0;\n                if (v.subn(35).isEven()) {\n                    numSub = 35;\n                }\n                else {\n                    numSub = 36;\n                }\n                // Use derived chain ID to create a proper Common\n                chainIdBN = v.subn(numSub).divn(2);\n            }\n        }\n        return this._getCommon(common, chainIdBN);\n    };\n    /**\n     * @deprecated if you have called this internal method please use `tx.supports(Capabilities.EIP155ReplayProtection)` instead\n     */\n    Transaction.prototype._unsignedTxImplementsEIP155 = function () {\n        return this.common.gteHardfork('spuriousDragon');\n    };\n    /**\n     * @deprecated if you have called this internal method please use `tx.supports(Capabilities.EIP155ReplayProtection)` instead\n     */\n    Transaction.prototype._signedTxImplementsEIP155 = function () {\n        if (!this.isSigned()) {\n            var msg = this._errorMsg('This transaction is not signed');\n            throw new Error(msg);\n        }\n        var onEIP155BlockOrLater = this.common.gteHardfork('spuriousDragon');\n        // EIP155 spec:\n        // If block.number >= 2,675,000 and v = CHAIN_ID * 2 + 35 or v = CHAIN_ID * 2 + 36, then when computing the hash of a transaction for purposes of signing or recovering, instead of hashing only the first six elements (i.e. nonce, gasprice, startgas, to, value, data), hash nine elements, with v replaced by CHAIN_ID, r = 0 and s = 0.\n        var v = this.v;\n        var chainIdDoubled = this.common.chainIdBN().muln(2);\n        var vAndChainIdMeetEIP155Conditions = v.eq(chainIdDoubled.addn(35)) || v.eq(chainIdDoubled.addn(36));\n        return vAndChainIdMeetEIP155Conditions && onEIP155BlockOrLater;\n    };\n    /**\n     * Return a compact error string representation of the object\n     */\n    Transaction.prototype.errorStr = function () {\n        var errorStr = this._getSharedErrorPostfix();\n        errorStr += \" gasPrice=\".concat(this.gasPrice);\n        return errorStr;\n    };\n    /**\n     * Internal helper function to create an annotated error message\n     *\n     * @param msg Base error message\n     * @hidden\n     */\n    Transaction.prototype._errorMsg = function (msg) {\n        return \"\".concat(msg, \" (\").concat(this.errorStr(), \")\");\n    };\n    return Transaction;\n}(baseTransaction_1.BaseTransaction));\nexports.default = Transaction;\n//# sourceMappingURL=legacyTransaction.js.map","/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*exported CRC32 */\nvar CRC32;\n(function (factory) {\n\t/*jshint ignore:start */\n\t/*eslint-disable */\n\tif(typeof DO_NOT_EXPORT_CRC === 'undefined') {\n\t\tif('object' === typeof exports) {\n\t\t\tfactory(exports);\n\t\t} else if ('function' === typeof define && define.amd) {\n\t\t\tdefine(function () {\n\t\t\t\tvar module = {};\n\t\t\t\tfactory(module);\n\t\t\t\treturn module;\n\t\t\t});\n\t\t} else {\n\t\t\tfactory(CRC32 = {});\n\t\t}\n\t} else {\n\t\tfactory(CRC32 = {});\n\t}\n\t/*eslint-enable */\n\t/*jshint ignore:end */\n}(function(CRC32) {\nCRC32.version = '1.2.2';\n/*global Int32Array */\nfunction signed_crc_table() {\n\tvar c = 0, table = new Array(256);\n\n\tfor(var n =0; n != 256; ++n){\n\t\tc = n;\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\ttable[n] = c;\n\t}\n\n\treturn typeof Int32Array !== 'undefined' ? new Int32Array(table) : table;\n}\n\nvar T0 = signed_crc_table();\nfunction slice_by_16_tables(T) {\n\tvar c = 0, v = 0, n = 0, table = typeof Int32Array !== 'undefined' ? new Int32Array(4096) : new Array(4096) ;\n\n\tfor(n = 0; n != 256; ++n) table[n] = T[n];\n\tfor(n = 0; n != 256; ++n) {\n\t\tv = T[n];\n\t\tfor(c = 256 + n; c < 4096; c += 256) v = table[c] = (v >>> 8) ^ T[v & 0xFF];\n\t}\n\tvar out = [];\n\tfor(n = 1; n != 16; ++n) out[n - 1] = typeof Int32Array !== 'undefined' ? table.subarray(n * 256, n * 256 + 256) : table.slice(n * 256, n * 256 + 256);\n\treturn out;\n}\nvar TT = slice_by_16_tables(T0);\nvar T1 = TT[0],  T2 = TT[1],  T3 = TT[2],  T4 = TT[3],  T5 = TT[4];\nvar T6 = TT[5],  T7 = TT[6],  T8 = TT[7],  T9 = TT[8],  Ta = TT[9];\nvar Tb = TT[10], Tc = TT[11], Td = TT[12], Te = TT[13], Tf = TT[14];\nfunction crc32_bstr(bstr, seed) {\n\tvar C = seed ^ -1;\n\tfor(var i = 0, L = bstr.length; i < L;) C = (C>>>8) ^ T0[(C^bstr.charCodeAt(i++))&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_buf(B, seed) {\n\tvar C = seed ^ -1, L = B.length - 15, i = 0;\n\tfor(; i < L;) C =\n\t\tTf[B[i++] ^ (C & 255)] ^\n\t\tTe[B[i++] ^ ((C >> 8) & 255)] ^\n\t\tTd[B[i++] ^ ((C >> 16) & 255)] ^\n\t\tTc[B[i++] ^ (C >>> 24)] ^\n\t\tTb[B[i++]] ^ Ta[B[i++]] ^ T9[B[i++]] ^ T8[B[i++]] ^\n\t\tT7[B[i++]] ^ T6[B[i++]] ^ T5[B[i++]] ^ T4[B[i++]] ^\n\t\tT3[B[i++]] ^ T2[B[i++]] ^ T1[B[i++]] ^ T0[B[i++]];\n\tL += 15;\n\twhile(i < L) C = (C>>>8) ^ T0[(C^B[i++])&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_str(str, seed) {\n\tvar C = seed ^ -1;\n\tfor(var i = 0, L = str.length, c = 0, d = 0; i < L;) {\n\t\tc = str.charCodeAt(i++);\n\t\tif(c < 0x80) {\n\t\t\tC = (C>>>8) ^ T0[(C^c)&0xFF];\n\t\t} else if(c < 0x800) {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (192|((c>>6)&31)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t} else if(c >= 0xD800 && c < 0xE000) {\n\t\t\tc = (c&1023)+64; d = str.charCodeAt(i++)&1023;\n\t\t\tC = (C>>>8) ^ T0[(C ^ (240|((c>>8)&7)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>2)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((d>>6)&15)|((c&3)<<4)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(d&63)))&0xFF];\n\t\t} else {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (224|((c>>12)&15)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>6)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t}\n\t}\n\treturn ~C;\n}\nCRC32.table = T0;\n// $FlowIgnore\nCRC32.bstr = crc32_bstr;\n// $FlowIgnore\nCRC32.buf = crc32_buf;\n// $FlowIgnore\nCRC32.str = crc32_str;\n}));\n","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.chains = exports._getInitializedChains = void 0;\nvar mainnet_json_1 = __importDefault(require(\"./mainnet.json\"));\nvar ropsten_json_1 = __importDefault(require(\"./ropsten.json\"));\nvar rinkeby_json_1 = __importDefault(require(\"./rinkeby.json\"));\nvar kovan_json_1 = __importDefault(require(\"./kovan.json\"));\nvar goerli_json_1 = __importDefault(require(\"./goerli.json\"));\nvar sepolia_json_1 = __importDefault(require(\"./sepolia.json\"));\n/**\n * @hidden\n */\nfunction _getInitializedChains(customChains) {\n    var e_1, _a;\n    var names = {\n        '1': 'mainnet',\n        '3': 'ropsten',\n        '4': 'rinkeby',\n        '42': 'kovan',\n        '5': 'goerli',\n        '11155111': 'sepolia',\n    };\n    var chains = {\n        mainnet: mainnet_json_1.default,\n        ropsten: ropsten_json_1.default,\n        rinkeby: rinkeby_json_1.default,\n        kovan: kovan_json_1.default,\n        goerli: goerli_json_1.default,\n        sepolia: sepolia_json_1.default,\n    };\n    if (customChains) {\n        try {\n            for (var customChains_1 = __values(customChains), customChains_1_1 = customChains_1.next(); !customChains_1_1.done; customChains_1_1 = customChains_1.next()) {\n                var chain = customChains_1_1.value;\n                var name_1 = chain.name;\n                names[chain.chainId.toString()] = name_1;\n                chains[name_1] = chain;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (customChains_1_1 && !customChains_1_1.done && (_a = customChains_1.return)) _a.call(customChains_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    chains['names'] = names;\n    return chains;\n}\nexports._getInitializedChains = _getInitializedChains;\n/**\n * @deprecated this constant will be internalized (removed)\n * on next major version update\n */\nexports.chains = _getInitializedChains();\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hardforks = void 0;\nexports.hardforks = [\n    ['chainstart', require('./chainstart.json')],\n    ['homestead', require('./homestead.json')],\n    ['dao', require('./dao.json')],\n    ['tangerineWhistle', require('./tangerineWhistle.json')],\n    ['spuriousDragon', require('./spuriousDragon.json')],\n    ['byzantium', require('./byzantium.json')],\n    ['constantinople', require('./constantinople.json')],\n    ['petersburg', require('./petersburg.json')],\n    ['istanbul', require('./istanbul.json')],\n    ['muirGlacier', require('./muirGlacier.json')],\n    ['berlin', require('./berlin.json')],\n    ['london', require('./london.json')],\n    ['shanghai', require('./shanghai.json')],\n    ['arrowGlacier', require('./arrowGlacier.json')],\n    ['grayGlacier', require('./grayGlacier.json')],\n    ['mergeForkIdTransition', require('./mergeForkIdTransition.json')],\n    ['merge', require('./merge.json')],\n];\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EIPs = void 0;\nexports.EIPs = {\n    1153: require('./1153.json'),\n    1559: require('./1559.json'),\n    2315: require('./2315.json'),\n    2537: require('./2537.json'),\n    2565: require('./2565.json'),\n    2718: require('./2718.json'),\n    2929: require('./2929.json'),\n    2930: require('./2930.json'),\n    3198: require('./3198.json'),\n    3529: require('./3529.json'),\n    3540: require('./3540.json'),\n    3541: require('./3541.json'),\n    3554: require('./3554.json'),\n    3607: require('./3607.json'),\n    3651: require('./3651.json'),\n    3670: require('./3670.json'),\n    3675: require('./3675.json'),\n    3855: require('./3855.json'),\n    3860: require('./3860.json'),\n    4345: require('./4345.json'),\n    4399: require('./4399.json'),\n    5133: require('./5133.json'),\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar baseTransaction_1 = require(\"./baseTransaction\");\nvar types_1 = require(\"./types\");\nvar util_1 = require(\"./util\");\nvar TRANSACTION_TYPE = 1;\nvar TRANSACTION_TYPE_BUFFER = Buffer.from(TRANSACTION_TYPE.toString(16).padStart(2, '0'), 'hex');\n/**\n * Typed transaction with optional access lists\n *\n * - TransactionType: 1\n * - EIP: [EIP-2930](https://eips.ethereum.org/EIPS/eip-2930)\n */\nvar AccessListEIP2930Transaction = /** @class */ (function (_super) {\n    __extends(AccessListEIP2930Transaction, _super);\n    /**\n     * This constructor takes the values, validates them, assigns them and freezes the object.\n     *\n     * It is not recommended to use this constructor directly. Instead use\n     * the static factory methods to assist in creating a Transaction object from\n     * varying data types.\n     */\n    function AccessListEIP2930Transaction(txData, opts) {\n        if (opts === void 0) { opts = {}; }\n        var _this = this;\n        var _a, _b;\n        _this = _super.call(this, __assign(__assign({}, txData), { type: TRANSACTION_TYPE }), opts) || this;\n        /**\n         * The default HF if the tx type is active on that HF\n         * or the first greater HF where the tx is active.\n         *\n         * @hidden\n         */\n        _this.DEFAULT_HARDFORK = 'berlin';\n        var chainId = txData.chainId, accessList = txData.accessList, gasPrice = txData.gasPrice;\n        _this.common = _this._getCommon(opts.common, chainId);\n        _this.chainId = _this.common.chainIdBN();\n        // EIP-2718 check is done in Common\n        if (!_this.common.isActivatedEIP(2930)) {\n            throw new Error('EIP-2930 not enabled on Common');\n        }\n        _this.activeCapabilities = _this.activeCapabilities.concat([2718, 2930]);\n        // Populate the access list fields\n        var accessListData = util_1.AccessLists.getAccessListData(accessList !== null && accessList !== void 0 ? accessList : []);\n        _this.accessList = accessListData.accessList;\n        _this.AccessListJSON = accessListData.AccessListJSON;\n        // Verify the access list format.\n        util_1.AccessLists.verifyAccessList(_this.accessList);\n        _this.gasPrice = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(gasPrice === '' ? '0x' : gasPrice));\n        _this._validateCannotExceedMaxInteger({\n            gasPrice: _this.gasPrice,\n        });\n        if (_this.gasPrice.mul(_this.gasLimit).gt(ethereumjs_util_1.MAX_INTEGER)) {\n            var msg = _this._errorMsg('gasLimit * gasPrice cannot exceed MAX_INTEGER');\n            throw new Error(msg);\n        }\n        if (_this.v && !_this.v.eqn(0) && !_this.v.eqn(1)) {\n            var msg = _this._errorMsg('The y-parity of the transaction should either be 0 or 1');\n            throw new Error(msg);\n        }\n        if (_this.common.gteHardfork('homestead') && ((_a = _this.s) === null || _a === void 0 ? void 0 : _a.gt(types_1.N_DIV_2))) {\n            var msg = _this._errorMsg('Invalid Signature: s-values greater than secp256k1n/2 are considered invalid');\n            throw new Error(msg);\n        }\n        if (_this.common.isActivatedEIP(3860)) {\n            (0, util_1.checkMaxInitCodeSize)(_this.common, _this.data.length);\n        }\n        var freeze = (_b = opts === null || opts === void 0 ? void 0 : opts.freeze) !== null && _b !== void 0 ? _b : true;\n        if (freeze) {\n            Object.freeze(_this);\n        }\n        return _this;\n    }\n    Object.defineProperty(AccessListEIP2930Transaction.prototype, \"senderR\", {\n        /**\n         * EIP-2930 alias for `r`\n         *\n         * @deprecated use `r` instead\n         */\n        get: function () {\n            return this.r;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AccessListEIP2930Transaction.prototype, \"senderS\", {\n        /**\n         * EIP-2930 alias for `s`\n         *\n         * @deprecated use `s` instead\n         */\n        get: function () {\n            return this.s;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AccessListEIP2930Transaction.prototype, \"yParity\", {\n        /**\n         * EIP-2930 alias for `v`\n         *\n         * @deprecated use `v` instead\n         */\n        get: function () {\n            return this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Instantiate a transaction from a data dictionary.\n     *\n     * Format: { chainId, nonce, gasPrice, gasLimit, to, value, data, accessList,\n     * v, r, s }\n     *\n     * Notes:\n     * - `chainId` will be set automatically if not provided\n     * - All parameters are optional and have some basic default values\n     */\n    AccessListEIP2930Transaction.fromTxData = function (txData, opts) {\n        if (opts === void 0) { opts = {}; }\n        return new AccessListEIP2930Transaction(txData, opts);\n    };\n    /**\n     * Instantiate a transaction from the serialized tx.\n     *\n     * Format: `0x01 || rlp([chainId, nonce, gasPrice, gasLimit, to, value, data, accessList,\n     * signatureYParity (v), signatureR (r), signatureS (s)])`\n     */\n    AccessListEIP2930Transaction.fromSerializedTx = function (serialized, opts) {\n        if (opts === void 0) { opts = {}; }\n        if (!serialized.slice(0, 1).equals(TRANSACTION_TYPE_BUFFER)) {\n            throw new Error(\"Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: \".concat(TRANSACTION_TYPE, \", received: \").concat(serialized\n                .slice(0, 1)\n                .toString('hex')));\n        }\n        var values = ethereumjs_util_1.rlp.decode(serialized.slice(1));\n        if (!Array.isArray(values)) {\n            throw new Error('Invalid serialized tx input: must be array');\n        }\n        return AccessListEIP2930Transaction.fromValuesArray(values, opts);\n    };\n    /**\n     * Instantiate a transaction from the serialized tx.\n     * (alias of {@link AccessListEIP2930Transaction.fromSerializedTx})\n     *\n     * Note: This means that the Buffer should start with 0x01.\n     *\n     * @deprecated this constructor alias is deprecated and will be removed\n     * in favor of the {@link AccessListEIP2930Transaction.fromSerializedTx} constructor\n     */\n    AccessListEIP2930Transaction.fromRlpSerializedTx = function (serialized, opts) {\n        if (opts === void 0) { opts = {}; }\n        return AccessListEIP2930Transaction.fromSerializedTx(serialized, opts);\n    };\n    /**\n     * Create a transaction from a values array.\n     *\n     * Format: `[chainId, nonce, gasPrice, gasLimit, to, value, data, accessList,\n     * signatureYParity (v), signatureR (r), signatureS (s)]`\n     */\n    AccessListEIP2930Transaction.fromValuesArray = function (values, opts) {\n        if (opts === void 0) { opts = {}; }\n        if (values.length !== 8 && values.length !== 11) {\n            throw new Error('Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).');\n        }\n        var _a = __read(values, 11), chainId = _a[0], nonce = _a[1], gasPrice = _a[2], gasLimit = _a[3], to = _a[4], value = _a[5], data = _a[6], accessList = _a[7], v = _a[8], r = _a[9], s = _a[10];\n        (0, ethereumjs_util_1.validateNoLeadingZeroes)({ nonce: nonce, gasPrice: gasPrice, gasLimit: gasLimit, value: value, v: v, r: r, s: s });\n        var emptyAccessList = [];\n        return new AccessListEIP2930Transaction({\n            chainId: new ethereumjs_util_1.BN(chainId),\n            nonce: nonce,\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n            to: to,\n            value: value,\n            data: data,\n            accessList: accessList !== null && accessList !== void 0 ? accessList : emptyAccessList,\n            v: v !== undefined ? new ethereumjs_util_1.BN(v) : undefined,\n            r: r,\n            s: s,\n        }, opts);\n    };\n    /**\n     * The amount of gas paid for the data in this tx\n     */\n    AccessListEIP2930Transaction.prototype.getDataFee = function () {\n        if (this.cache.dataFee && this.cache.dataFee.hardfork === this.common.hardfork()) {\n            return this.cache.dataFee.value;\n        }\n        var cost = _super.prototype.getDataFee.call(this);\n        cost.iaddn(util_1.AccessLists.getDataFeeEIP2930(this.accessList, this.common));\n        if (Object.isFrozen(this)) {\n            this.cache.dataFee = {\n                value: cost,\n                hardfork: this.common.hardfork(),\n            };\n        }\n        return cost;\n    };\n    /**\n     * The up front amount that an account must have for this transaction to be valid\n     */\n    AccessListEIP2930Transaction.prototype.getUpfrontCost = function () {\n        return this.gasLimit.mul(this.gasPrice).add(this.value);\n    };\n    /**\n     * Returns a Buffer Array of the raw Buffers of the EIP-2930 transaction, in order.\n     *\n     * Format: `[chainId, nonce, gasPrice, gasLimit, to, value, data, accessList,\n     * signatureYParity (v), signatureR (r), signatureS (s)]`\n     *\n     * Use {@link AccessListEIP2930Transaction.serialize} to add a transaction to a block\n     * with {@link Block.fromValuesArray}.\n     *\n     * For an unsigned tx this method uses the empty Buffer values for the\n     * signature parameters `v`, `r` and `s` for encoding. For an EIP-155 compliant\n     * representation for external signing use {@link AccessListEIP2930Transaction.getMessageToSign}.\n     */\n    AccessListEIP2930Transaction.prototype.raw = function () {\n        return [\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.chainId),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.nonce),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.gasPrice),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.gasLimit),\n            this.to !== undefined ? this.to.buf : Buffer.from([]),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.value),\n            this.data,\n            this.accessList,\n            this.v !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.v) : Buffer.from([]),\n            this.r !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.r) : Buffer.from([]),\n            this.s !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.s) : Buffer.from([]),\n        ];\n    };\n    /**\n     * Returns the serialized encoding of the EIP-2930 transaction.\n     *\n     * Format: `0x01 || rlp([chainId, nonce, gasPrice, gasLimit, to, value, data, accessList,\n     * signatureYParity (v), signatureR (r), signatureS (s)])`\n     *\n     * Note that in contrast to the legacy tx serialization format this is not\n     * valid RLP any more due to the raw tx type preceding and concatenated to\n     * the RLP encoding of the values.\n     */\n    AccessListEIP2930Transaction.prototype.serialize = function () {\n        var base = this.raw();\n        return Buffer.concat([TRANSACTION_TYPE_BUFFER, ethereumjs_util_1.rlp.encode(base)]);\n    };\n    /**\n     * Returns the serialized unsigned tx (hashed or raw), which can be used\n     * to sign the transaction (e.g. for sending to a hardware wallet).\n     *\n     * Note: in contrast to the legacy tx the raw message format is already\n     * serialized and doesn't need to be RLP encoded any more.\n     *\n     * ```javascript\n     * const serializedMessage = tx.getMessageToSign(false) // use this for the HW wallet input\n     * ```\n     *\n     * @param hashMessage - Return hashed message if set to true (default: true)\n     */\n    AccessListEIP2930Transaction.prototype.getMessageToSign = function (hashMessage) {\n        if (hashMessage === void 0) { hashMessage = true; }\n        var base = this.raw().slice(0, 8);\n        var message = Buffer.concat([TRANSACTION_TYPE_BUFFER, ethereumjs_util_1.rlp.encode(base)]);\n        if (hashMessage) {\n            return (0, ethereumjs_util_1.keccak256)(message);\n        }\n        else {\n            return message;\n        }\n    };\n    /**\n     * Computes a sha3-256 hash of the serialized tx.\n     *\n     * This method can only be used for signed txs (it throws otherwise).\n     * Use {@link AccessListEIP2930Transaction.getMessageToSign} to get a tx hash for the purpose of signing.\n     */\n    AccessListEIP2930Transaction.prototype.hash = function () {\n        if (!this.isSigned()) {\n            var msg = this._errorMsg('Cannot call hash method if transaction is not signed');\n            throw new Error(msg);\n        }\n        if (Object.isFrozen(this)) {\n            if (!this.cache.hash) {\n                this.cache.hash = (0, ethereumjs_util_1.keccak256)(this.serialize());\n            }\n            return this.cache.hash;\n        }\n        return (0, ethereumjs_util_1.keccak256)(this.serialize());\n    };\n    /**\n     * Computes a sha3-256 hash which can be used to verify the signature\n     */\n    AccessListEIP2930Transaction.prototype.getMessageToVerifySignature = function () {\n        return this.getMessageToSign();\n    };\n    /**\n     * Returns the public key of the sender\n     */\n    AccessListEIP2930Transaction.prototype.getSenderPublicKey = function () {\n        var _a;\n        if (!this.isSigned()) {\n            var msg = this._errorMsg('Cannot call this method if transaction is not signed');\n            throw new Error(msg);\n        }\n        var msgHash = this.getMessageToVerifySignature();\n        // EIP-2: All transaction signatures whose s-value is greater than secp256k1n/2 are considered invalid.\n        // Reasoning: https://ethereum.stackexchange.com/a/55728\n        if (this.common.gteHardfork('homestead') && ((_a = this.s) === null || _a === void 0 ? void 0 : _a.gt(types_1.N_DIV_2))) {\n            var msg = this._errorMsg('Invalid Signature: s-values greater than secp256k1n/2 are considered invalid');\n            throw new Error(msg);\n        }\n        var _b = this, yParity = _b.yParity, r = _b.r, s = _b.s;\n        try {\n            return (0, ethereumjs_util_1.ecrecover)(msgHash, yParity.addn(27), // Recover the 27 which was stripped from ecsign\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(r), (0, ethereumjs_util_1.bnToUnpaddedBuffer)(s));\n        }\n        catch (e) {\n            var msg = this._errorMsg('Invalid Signature');\n            throw new Error(msg);\n        }\n    };\n    AccessListEIP2930Transaction.prototype._processSignature = function (v, r, s) {\n        var opts = __assign(__assign({}, this.txOptions), { common: this.common });\n        return AccessListEIP2930Transaction.fromTxData({\n            chainId: this.chainId,\n            nonce: this.nonce,\n            gasPrice: this.gasPrice,\n            gasLimit: this.gasLimit,\n            to: this.to,\n            value: this.value,\n            data: this.data,\n            accessList: this.accessList,\n            v: new ethereumjs_util_1.BN(v - 27),\n            r: new ethereumjs_util_1.BN(r),\n            s: new ethereumjs_util_1.BN(s),\n        }, opts);\n    };\n    /**\n     * Returns an object with the JSON representation of the transaction\n     */\n    AccessListEIP2930Transaction.prototype.toJSON = function () {\n        var accessListJSON = util_1.AccessLists.getAccessListJSON(this.accessList);\n        return {\n            chainId: (0, ethereumjs_util_1.bnToHex)(this.chainId),\n            nonce: (0, ethereumjs_util_1.bnToHex)(this.nonce),\n            gasPrice: (0, ethereumjs_util_1.bnToHex)(this.gasPrice),\n            gasLimit: (0, ethereumjs_util_1.bnToHex)(this.gasLimit),\n            to: this.to !== undefined ? this.to.toString() : undefined,\n            value: (0, ethereumjs_util_1.bnToHex)(this.value),\n            data: '0x' + this.data.toString('hex'),\n            accessList: accessListJSON,\n            v: this.v !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.v) : undefined,\n            r: this.r !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.r) : undefined,\n            s: this.s !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.s) : undefined,\n        };\n    };\n    /**\n     * Return a compact error string representation of the object\n     */\n    AccessListEIP2930Transaction.prototype.errorStr = function () {\n        var _a, _b;\n        var errorStr = this._getSharedErrorPostfix();\n        // Keep ? for this.accessList since this otherwise causes Hardhat E2E tests to fail\n        errorStr += \" gasPrice=\".concat(this.gasPrice, \" accessListCount=\").concat((_b = (_a = this.accessList) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0);\n        return errorStr;\n    };\n    /**\n     * Internal helper function to create an annotated error message\n     *\n     * @param msg Base error message\n     * @hidden\n     */\n    AccessListEIP2930Transaction.prototype._errorMsg = function (msg) {\n        return \"\".concat(msg, \" (\").concat(this.errorStr(), \")\");\n    };\n    return AccessListEIP2930Transaction;\n}(baseTransaction_1.BaseTransaction));\nexports.default = AccessListEIP2930Transaction;\n//# sourceMappingURL=eip2930Transaction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar _1 = require(\".\");\nvar TransactionFactory = /** @class */ (function () {\n    // It is not possible to instantiate a TransactionFactory object.\n    function TransactionFactory() {\n    }\n    /**\n     * Create a transaction from a `txData` object\n     *\n     * @param txData - The transaction data. The `type` field will determine which transaction type is returned (if undefined, creates a legacy transaction)\n     * @param txOptions - Options to pass on to the constructor of the transaction\n     */\n    TransactionFactory.fromTxData = function (txData, txOptions) {\n        if (txOptions === void 0) { txOptions = {}; }\n        if (!('type' in txData) || txData.type === undefined) {\n            // Assume legacy transaction\n            return _1.Transaction.fromTxData(txData, txOptions);\n        }\n        else {\n            var txType = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(txData.type)).toNumber();\n            if (txType === 0) {\n                return _1.Transaction.fromTxData(txData, txOptions);\n            }\n            else if (txType === 1) {\n                return _1.AccessListEIP2930Transaction.fromTxData(txData, txOptions);\n            }\n            else if (txType === 2) {\n                return _1.FeeMarketEIP1559Transaction.fromTxData(txData, txOptions);\n            }\n            else {\n                throw new Error(\"Tx instantiation with type \".concat(txType, \" not supported\"));\n            }\n        }\n    };\n    /**\n     * This method tries to decode serialized data.\n     *\n     * @param data - The data Buffer\n     * @param txOptions - The transaction options\n     */\n    TransactionFactory.fromSerializedData = function (data, txOptions) {\n        if (txOptions === void 0) { txOptions = {}; }\n        if (data[0] <= 0x7f) {\n            // Determine the type.\n            var EIP = void 0;\n            switch (data[0]) {\n                case 1:\n                    EIP = 2930;\n                    break;\n                case 2:\n                    EIP = 1559;\n                    break;\n                default:\n                    throw new Error(\"TypedTransaction with ID \".concat(data[0], \" unknown\"));\n            }\n            if (EIP === 1559) {\n                return _1.FeeMarketEIP1559Transaction.fromSerializedTx(data, txOptions);\n            }\n            else {\n                // EIP === 2930\n                return _1.AccessListEIP2930Transaction.fromSerializedTx(data, txOptions);\n            }\n        }\n        else {\n            return _1.Transaction.fromSerializedTx(data, txOptions);\n        }\n    };\n    /**\n     * When decoding a BlockBody, in the transactions field, a field is either:\n     * A Buffer (a TypedTransaction - encoded as TransactionType || rlp(TransactionPayload))\n     * A Buffer[] (Legacy Transaction)\n     * This method returns the right transaction.\n     *\n     * @param data - A Buffer or Buffer[]\n     * @param txOptions - The transaction options\n     */\n    TransactionFactory.fromBlockBodyData = function (data, txOptions) {\n        if (txOptions === void 0) { txOptions = {}; }\n        if (Buffer.isBuffer(data)) {\n            return this.fromSerializedData(data, txOptions);\n        }\n        else if (Array.isArray(data)) {\n            // It is a legacy transaction\n            return _1.Transaction.fromValuesArray(data, txOptions);\n        }\n        else {\n            throw new Error('Cannot decode transaction: unknown type input');\n        }\n    };\n    /**\n     * This helper method allows one to retrieve the class which matches the transactionID\n     * If transactionID is undefined, returns the legacy transaction class.\n     * @deprecated - This method is deprecated and will be removed on the next major release\n     * @param transactionID\n     * @param _common - This option is not used\n     */\n    TransactionFactory.getTransactionClass = function (transactionID, _common) {\n        if (transactionID === void 0) { transactionID = 0; }\n        var legacyTxn = transactionID == 0 || (transactionID >= 0x80 && transactionID <= 0xff);\n        if (legacyTxn) {\n            return _1.Transaction;\n        }\n        switch (transactionID) {\n            case 1:\n                return _1.AccessListEIP2930Transaction;\n            case 2:\n                return _1.FeeMarketEIP1559Transaction;\n            default:\n                throw new Error(\"TypedTransaction with ID \".concat(transactionID, \" unknown\"));\n        }\n    };\n    return TransactionFactory;\n}());\nexports.default = TransactionFactory;\n//# sourceMappingURL=transactionFactory.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar baseTransaction_1 = require(\"./baseTransaction\");\nvar types_1 = require(\"./types\");\nvar util_1 = require(\"./util\");\nvar TRANSACTION_TYPE = 2;\nvar TRANSACTION_TYPE_BUFFER = Buffer.from(TRANSACTION_TYPE.toString(16).padStart(2, '0'), 'hex');\n/**\n * Typed transaction with a new gas fee market mechanism\n *\n * - TransactionType: 2\n * - EIP: [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559)\n */\nvar FeeMarketEIP1559Transaction = /** @class */ (function (_super) {\n    __extends(FeeMarketEIP1559Transaction, _super);\n    /**\n     * This constructor takes the values, validates them, assigns them and freezes the object.\n     *\n     * It is not recommended to use this constructor directly. Instead use\n     * the static factory methods to assist in creating a Transaction object from\n     * varying data types.\n     */\n    function FeeMarketEIP1559Transaction(txData, opts) {\n        if (opts === void 0) { opts = {}; }\n        var _this = this;\n        var _a, _b;\n        _this = _super.call(this, __assign(__assign({}, txData), { type: TRANSACTION_TYPE }), opts) || this;\n        /**\n         * The default HF if the tx type is active on that HF\n         * or the first greater HF where the tx is active.\n         *\n         * @hidden\n         */\n        _this.DEFAULT_HARDFORK = 'london';\n        var chainId = txData.chainId, accessList = txData.accessList, maxFeePerGas = txData.maxFeePerGas, maxPriorityFeePerGas = txData.maxPriorityFeePerGas;\n        _this.common = _this._getCommon(opts.common, chainId);\n        _this.chainId = _this.common.chainIdBN();\n        if (!_this.common.isActivatedEIP(1559)) {\n            throw new Error('EIP-1559 not enabled on Common');\n        }\n        _this.activeCapabilities = _this.activeCapabilities.concat([1559, 2718, 2930]);\n        // Populate the access list fields\n        var accessListData = util_1.AccessLists.getAccessListData(accessList !== null && accessList !== void 0 ? accessList : []);\n        _this.accessList = accessListData.accessList;\n        _this.AccessListJSON = accessListData.AccessListJSON;\n        // Verify the access list format.\n        util_1.AccessLists.verifyAccessList(_this.accessList);\n        _this.maxFeePerGas = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(maxFeePerGas === '' ? '0x' : maxFeePerGas));\n        _this.maxPriorityFeePerGas = new ethereumjs_util_1.BN((0, ethereumjs_util_1.toBuffer)(maxPriorityFeePerGas === '' ? '0x' : maxPriorityFeePerGas));\n        _this._validateCannotExceedMaxInteger({\n            maxFeePerGas: _this.maxFeePerGas,\n            maxPriorityFeePerGas: _this.maxPriorityFeePerGas,\n        });\n        if (_this.gasLimit.mul(_this.maxFeePerGas).gt(ethereumjs_util_1.MAX_INTEGER)) {\n            var msg = _this._errorMsg('gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)');\n            throw new Error(msg);\n        }\n        if (_this.maxFeePerGas.lt(_this.maxPriorityFeePerGas)) {\n            var msg = _this._errorMsg('maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)');\n            throw new Error(msg);\n        }\n        if (_this.v && !_this.v.eqn(0) && !_this.v.eqn(1)) {\n            var msg = _this._errorMsg('The y-parity of the transaction should either be 0 or 1');\n            throw new Error(msg);\n        }\n        if (_this.common.gteHardfork('homestead') && ((_a = _this.s) === null || _a === void 0 ? void 0 : _a.gt(types_1.N_DIV_2))) {\n            var msg = _this._errorMsg('Invalid Signature: s-values greater than secp256k1n/2 are considered invalid');\n            throw new Error(msg);\n        }\n        if (_this.common.isActivatedEIP(3860)) {\n            (0, util_1.checkMaxInitCodeSize)(_this.common, _this.data.length);\n        }\n        var freeze = (_b = opts === null || opts === void 0 ? void 0 : opts.freeze) !== null && _b !== void 0 ? _b : true;\n        if (freeze) {\n            Object.freeze(_this);\n        }\n        return _this;\n    }\n    Object.defineProperty(FeeMarketEIP1559Transaction.prototype, \"senderR\", {\n        /**\n         * EIP-2930 alias for `r`\n         *\n         * @deprecated use `r` instead\n         */\n        get: function () {\n            return this.r;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FeeMarketEIP1559Transaction.prototype, \"senderS\", {\n        /**\n         * EIP-2930 alias for `s`\n         *\n         * @deprecated use `s` instead\n         */\n        get: function () {\n            return this.s;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FeeMarketEIP1559Transaction.prototype, \"yParity\", {\n        /**\n         * EIP-2930 alias for `v`\n         *\n         * @deprecated use `v` instead\n         */\n        get: function () {\n            return this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Instantiate a transaction from a data dictionary.\n     *\n     * Format: { chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n     * accessList, v, r, s }\n     *\n     * Notes:\n     * - `chainId` will be set automatically if not provided\n     * - All parameters are optional and have some basic default values\n     */\n    FeeMarketEIP1559Transaction.fromTxData = function (txData, opts) {\n        if (opts === void 0) { opts = {}; }\n        return new FeeMarketEIP1559Transaction(txData, opts);\n    };\n    /**\n     * Instantiate a transaction from the serialized tx.\n     *\n     * Format: `0x02 || rlp([chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n     * accessList, signatureYParity, signatureR, signatureS])`\n     */\n    FeeMarketEIP1559Transaction.fromSerializedTx = function (serialized, opts) {\n        if (opts === void 0) { opts = {}; }\n        if (!serialized.slice(0, 1).equals(TRANSACTION_TYPE_BUFFER)) {\n            throw new Error(\"Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: \".concat(TRANSACTION_TYPE, \", received: \").concat(serialized\n                .slice(0, 1)\n                .toString('hex')));\n        }\n        var values = ethereumjs_util_1.rlp.decode(serialized.slice(1));\n        if (!Array.isArray(values)) {\n            throw new Error('Invalid serialized tx input: must be array');\n        }\n        return FeeMarketEIP1559Transaction.fromValuesArray(values, opts);\n    };\n    /**\n     * Instantiate a transaction from the serialized tx.\n     * (alias of {@link FeeMarketEIP1559Transaction.fromSerializedTx})\n     *\n     * Note: This means that the Buffer should start with 0x01.\n     *\n     * @deprecated this constructor alias is deprecated and will be removed\n     * in favor of the {@link FeeMarketEIP1559Transaction.fromSerializedTx} constructor\n     */\n    FeeMarketEIP1559Transaction.fromRlpSerializedTx = function (serialized, opts) {\n        if (opts === void 0) { opts = {}; }\n        return FeeMarketEIP1559Transaction.fromSerializedTx(serialized, opts);\n    };\n    /**\n     * Create a transaction from a values array.\n     *\n     * Format: `[chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n     * accessList, signatureYParity, signatureR, signatureS]`\n     */\n    FeeMarketEIP1559Transaction.fromValuesArray = function (values, opts) {\n        if (opts === void 0) { opts = {}; }\n        if (values.length !== 9 && values.length !== 12) {\n            throw new Error('Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).');\n        }\n        var _a = __read(values, 12), chainId = _a[0], nonce = _a[1], maxPriorityFeePerGas = _a[2], maxFeePerGas = _a[3], gasLimit = _a[4], to = _a[5], value = _a[6], data = _a[7], accessList = _a[8], v = _a[9], r = _a[10], s = _a[11];\n        (0, ethereumjs_util_1.validateNoLeadingZeroes)({ nonce: nonce, maxPriorityFeePerGas: maxPriorityFeePerGas, maxFeePerGas: maxFeePerGas, gasLimit: gasLimit, value: value, v: v, r: r, s: s });\n        return new FeeMarketEIP1559Transaction({\n            chainId: new ethereumjs_util_1.BN(chainId),\n            nonce: nonce,\n            maxPriorityFeePerGas: maxPriorityFeePerGas,\n            maxFeePerGas: maxFeePerGas,\n            gasLimit: gasLimit,\n            to: to,\n            value: value,\n            data: data,\n            accessList: accessList !== null && accessList !== void 0 ? accessList : [],\n            v: v !== undefined ? new ethereumjs_util_1.BN(v) : undefined,\n            r: r,\n            s: s,\n        }, opts);\n    };\n    /**\n     * The amount of gas paid for the data in this tx\n     */\n    FeeMarketEIP1559Transaction.prototype.getDataFee = function () {\n        if (this.cache.dataFee && this.cache.dataFee.hardfork === this.common.hardfork()) {\n            return this.cache.dataFee.value;\n        }\n        var cost = _super.prototype.getDataFee.call(this);\n        cost.iaddn(util_1.AccessLists.getDataFeeEIP2930(this.accessList, this.common));\n        if (Object.isFrozen(this)) {\n            this.cache.dataFee = {\n                value: cost,\n                hardfork: this.common.hardfork(),\n            };\n        }\n        return cost;\n    };\n    /**\n     * The up front amount that an account must have for this transaction to be valid\n     * @param baseFee The base fee of the block (will be set to 0 if not provided)\n     */\n    FeeMarketEIP1559Transaction.prototype.getUpfrontCost = function (baseFee) {\n        if (baseFee === void 0) { baseFee = new ethereumjs_util_1.BN(0); }\n        var inclusionFeePerGas = ethereumjs_util_1.BN.min(this.maxPriorityFeePerGas, this.maxFeePerGas.sub(baseFee));\n        var gasPrice = inclusionFeePerGas.add(baseFee);\n        return this.gasLimit.mul(gasPrice).add(this.value);\n    };\n    /**\n     * Returns a Buffer Array of the raw Buffers of the EIP-1559 transaction, in order.\n     *\n     * Format: `[chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n     * accessList, signatureYParity, signatureR, signatureS]`\n     *\n     * Use {@link FeeMarketEIP1559Transaction.serialize} to add a transaction to a block\n     * with {@link Block.fromValuesArray}.\n     *\n     * For an unsigned tx this method uses the empty Buffer values for the\n     * signature parameters `v`, `r` and `s` for encoding. For an EIP-155 compliant\n     * representation for external signing use {@link FeeMarketEIP1559Transaction.getMessageToSign}.\n     */\n    FeeMarketEIP1559Transaction.prototype.raw = function () {\n        return [\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.chainId),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.nonce),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.maxPriorityFeePerGas),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.maxFeePerGas),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.gasLimit),\n            this.to !== undefined ? this.to.buf : Buffer.from([]),\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.value),\n            this.data,\n            this.accessList,\n            this.v !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.v) : Buffer.from([]),\n            this.r !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.r) : Buffer.from([]),\n            this.s !== undefined ? (0, ethereumjs_util_1.bnToUnpaddedBuffer)(this.s) : Buffer.from([]),\n        ];\n    };\n    /**\n     * Returns the serialized encoding of the EIP-1559 transaction.\n     *\n     * Format: `0x02 || rlp([chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n     * accessList, signatureYParity, signatureR, signatureS])`\n     *\n     * Note that in contrast to the legacy tx serialization format this is not\n     * valid RLP any more due to the raw tx type preceding and concatenated to\n     * the RLP encoding of the values.\n     */\n    FeeMarketEIP1559Transaction.prototype.serialize = function () {\n        var base = this.raw();\n        return Buffer.concat([TRANSACTION_TYPE_BUFFER, ethereumjs_util_1.rlp.encode(base)]);\n    };\n    /**\n     * Returns the serialized unsigned tx (hashed or raw), which can be used\n     * to sign the transaction (e.g. for sending to a hardware wallet).\n     *\n     * Note: in contrast to the legacy tx the raw message format is already\n     * serialized and doesn't need to be RLP encoded any more.\n     *\n     * ```javascript\n     * const serializedMessage = tx.getMessageToSign(false) // use this for the HW wallet input\n     * ```\n     *\n     * @param hashMessage - Return hashed message if set to true (default: true)\n     */\n    FeeMarketEIP1559Transaction.prototype.getMessageToSign = function (hashMessage) {\n        if (hashMessage === void 0) { hashMessage = true; }\n        var base = this.raw().slice(0, 9);\n        var message = Buffer.concat([TRANSACTION_TYPE_BUFFER, ethereumjs_util_1.rlp.encode(base)]);\n        if (hashMessage) {\n            return (0, ethereumjs_util_1.keccak256)(message);\n        }\n        else {\n            return message;\n        }\n    };\n    /**\n     * Computes a sha3-256 hash of the serialized tx.\n     *\n     * This method can only be used for signed txs (it throws otherwise).\n     * Use {@link FeeMarketEIP1559Transaction.getMessageToSign} to get a tx hash for the purpose of signing.\n     */\n    FeeMarketEIP1559Transaction.prototype.hash = function () {\n        if (!this.isSigned()) {\n            var msg = this._errorMsg('Cannot call hash method if transaction is not signed');\n            throw new Error(msg);\n        }\n        if (Object.isFrozen(this)) {\n            if (!this.cache.hash) {\n                this.cache.hash = (0, ethereumjs_util_1.keccak256)(this.serialize());\n            }\n            return this.cache.hash;\n        }\n        return (0, ethereumjs_util_1.keccak256)(this.serialize());\n    };\n    /**\n     * Computes a sha3-256 hash which can be used to verify the signature\n     */\n    FeeMarketEIP1559Transaction.prototype.getMessageToVerifySignature = function () {\n        return this.getMessageToSign();\n    };\n    /**\n     * Returns the public key of the sender\n     */\n    FeeMarketEIP1559Transaction.prototype.getSenderPublicKey = function () {\n        var _a;\n        if (!this.isSigned()) {\n            var msg = this._errorMsg('Cannot call this method if transaction is not signed');\n            throw new Error(msg);\n        }\n        var msgHash = this.getMessageToVerifySignature();\n        // EIP-2: All transaction signatures whose s-value is greater than secp256k1n/2 are considered invalid.\n        // Reasoning: https://ethereum.stackexchange.com/a/55728\n        if (this.common.gteHardfork('homestead') && ((_a = this.s) === null || _a === void 0 ? void 0 : _a.gt(types_1.N_DIV_2))) {\n            var msg = this._errorMsg('Invalid Signature: s-values greater than secp256k1n/2 are considered invalid');\n            throw new Error(msg);\n        }\n        var _b = this, v = _b.v, r = _b.r, s = _b.s;\n        try {\n            return (0, ethereumjs_util_1.ecrecover)(msgHash, v.addn(27), // Recover the 27 which was stripped from ecsign\n            (0, ethereumjs_util_1.bnToUnpaddedBuffer)(r), (0, ethereumjs_util_1.bnToUnpaddedBuffer)(s));\n        }\n        catch (e) {\n            var msg = this._errorMsg('Invalid Signature');\n            throw new Error(msg);\n        }\n    };\n    FeeMarketEIP1559Transaction.prototype._processSignature = function (v, r, s) {\n        var opts = __assign(__assign({}, this.txOptions), { common: this.common });\n        return FeeMarketEIP1559Transaction.fromTxData({\n            chainId: this.chainId,\n            nonce: this.nonce,\n            maxPriorityFeePerGas: this.maxPriorityFeePerGas,\n            maxFeePerGas: this.maxFeePerGas,\n            gasLimit: this.gasLimit,\n            to: this.to,\n            value: this.value,\n            data: this.data,\n            accessList: this.accessList,\n            v: new ethereumjs_util_1.BN(v - 27),\n            r: new ethereumjs_util_1.BN(r),\n            s: new ethereumjs_util_1.BN(s),\n        }, opts);\n    };\n    /**\n     * Returns an object with the JSON representation of the transaction\n     */\n    FeeMarketEIP1559Transaction.prototype.toJSON = function () {\n        var accessListJSON = util_1.AccessLists.getAccessListJSON(this.accessList);\n        return {\n            chainId: (0, ethereumjs_util_1.bnToHex)(this.chainId),\n            nonce: (0, ethereumjs_util_1.bnToHex)(this.nonce),\n            maxPriorityFeePerGas: (0, ethereumjs_util_1.bnToHex)(this.maxPriorityFeePerGas),\n            maxFeePerGas: (0, ethereumjs_util_1.bnToHex)(this.maxFeePerGas),\n            gasLimit: (0, ethereumjs_util_1.bnToHex)(this.gasLimit),\n            to: this.to !== undefined ? this.to.toString() : undefined,\n            value: (0, ethereumjs_util_1.bnToHex)(this.value),\n            data: '0x' + this.data.toString('hex'),\n            accessList: accessListJSON,\n            v: this.v !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.v) : undefined,\n            r: this.r !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.r) : undefined,\n            s: this.s !== undefined ? (0, ethereumjs_util_1.bnToHex)(this.s) : undefined,\n        };\n    };\n    /**\n     * Return a compact error string representation of the object\n     */\n    FeeMarketEIP1559Transaction.prototype.errorStr = function () {\n        var errorStr = this._getSharedErrorPostfix();\n        errorStr += \" maxFeePerGas=\".concat(this.maxFeePerGas, \" maxPriorityFeePerGas=\").concat(this.maxPriorityFeePerGas);\n        return errorStr;\n    };\n    /**\n     * Internal helper function to create an annotated error message\n     *\n     * @param msg Base error message\n     * @hidden\n     */\n    FeeMarketEIP1559Transaction.prototype._errorMsg = function (msg) {\n        return \"\".concat(msg, \" (\").concat(this.errorStr(), \")\");\n    };\n    return FeeMarketEIP1559Transaction;\n}(baseTransaction_1.BaseTransaction));\nexports.default = FeeMarketEIP1559Transaction;\n//# sourceMappingURL=eip1559Transaction.js.map","import {\n  bufferToHex,\n  ecsign,\n  hashPersonalMessage,\n  publicToAddress,\n  toBuffer,\n} from 'ethereumjs-util';\n\nimport {\n  concatSig,\n  isNullish,\n  legacyToBuffer,\n  recoverPublicKey,\n} from './utils';\n\n/**\n * Create an Ethereum-specific signature for a message.\n *\n * This function is equivalent to the `eth_sign` Ethereum JSON-RPC method as specified in EIP-1417,\n * as well as the MetaMask's `personal_sign` method.\n *\n * @param options - The personal sign options.\n * @param options.privateKey - The key to sign with.\n * @param options.data - The hex data to sign.\n * @returns The '0x'-prefixed hex encoded signature.\n */\nexport function personalSign({\n  privateKey,\n  data,\n}: {\n  privateKey: Buffer;\n  data: unknown;\n}): string {\n  if (isNullish(data)) {\n    throw new Error('Missing data parameter');\n  } else if (isNullish(privateKey)) {\n    throw new Error('Missing privateKey parameter');\n  }\n\n  const message = legacyToBuffer(data);\n  const msgHash = hashPersonalMessage(message);\n  const sig = ecsign(msgHash, privateKey);\n  const serialized = concatSig(toBuffer(sig.v), sig.r, sig.s);\n  return serialized;\n}\n\n/**\n * Recover the address of the account used to create the given Ethereum signature. The message\n * must have been signed using the `personalSign` function, or an equivalent function.\n *\n * @param options - The signature recovery options.\n * @param options.data - The hex data that was signed.\n * @param options.signature - The '0x'-prefixed hex encoded message signature.\n * @returns The '0x'-prefixed hex encoded address of the message signer.\n */\nexport function recoverPersonalSignature({\n  data,\n  signature,\n}: {\n  data: unknown;\n  signature: string;\n}): string {\n  if (isNullish(data)) {\n    throw new Error('Missing data parameter');\n  } else if (isNullish(signature)) {\n    throw new Error('Missing signature parameter');\n  }\n\n  const publicKey = getPublicKeyFor(data, signature);\n  const sender = publicToAddress(publicKey);\n  const senderHex = bufferToHex(sender);\n  return senderHex;\n}\n\n/**\n * Recover the public key of the account used to create the given Ethereum signature. The message\n * must have been signed using the `personalSign` function, or an equivalent function.\n *\n * @param options - The public key recovery options.\n * @param options.data - The hex data that was signed.\n * @param options.signature - The '0x'-prefixed hex encoded message signature.\n * @returns The '0x'-prefixed hex encoded public key of the message signer.\n */\nexport function extractPublicKey({\n  data,\n  signature,\n}: {\n  data: unknown;\n  signature: string;\n}): string {\n  if (isNullish(data)) {\n    throw new Error('Missing data parameter');\n  } else if (isNullish(signature)) {\n    throw new Error('Missing signature parameter');\n  }\n\n  const publicKey = getPublicKeyFor(data, signature);\n  return `0x${publicKey.toString('hex')}`;\n}\n\n/**\n * Get the public key for the given signature and message.\n *\n * @param message - The message that was signed.\n * @param signature - The '0x'-prefixed hex encoded message signature.\n * @returns The public key of the signer.\n */\nfunction getPublicKeyFor(message: unknown, signature: string): Buffer {\n  const messageHash = hashPersonalMessage(legacyToBuffer(message));\n  return recoverPublicKey(messageHash, signature);\n}\n","import {\n  bufferToHex,\n  ecsign,\n  keccak,\n  publicToAddress,\n  toBuffer,\n} from 'ethereumjs-util';\nimport { rawEncode, soliditySHA3 } from 'ethereumjs-abi';\n\nimport {\n  concatSig,\n  isNullish,\n  legacyToBuffer,\n  recoverPublicKey,\n} from './utils';\n\n/**\n * This is the message format used for `V1` of `signTypedData`.\n */\nexport type TypedDataV1 = TypedDataV1Field[];\n\n/**\n * This represents a single field in a `V1` `signTypedData` message.\n *\n * @property name - The name of the field.\n * @property type - The type of a field (must be a supported Solidity type).\n * @property value - The value of the field.\n */\nexport interface TypedDataV1Field {\n  name: string;\n  type: string;\n  value: any;\n}\n\n/**\n * Represents the version of `signTypedData` being used.\n *\n * V1 is based upon [an early version of EIP-712](https://github.com/ethereum/EIPs/pull/712/commits/21abe254fe0452d8583d5b132b1d7be87c0439ca)\n * that lacked some later security improvements, and should generally be neglected in favor of\n * later versions.\n *\n * V3 is based on EIP-712, except that arrays and recursive data structures are not supported.\n *\n * V4 is based on EIP-712, and includes full support of arrays and recursive data structures.\n */\nexport enum SignTypedDataVersion {\n  V1 = 'V1',\n  V3 = 'V3',\n  V4 = 'V4',\n}\n\nexport interface MessageTypeProperty {\n  name: string;\n  type: string;\n}\n\nexport interface MessageTypes {\n  EIP712Domain: MessageTypeProperty[];\n  [additionalProperties: string]: MessageTypeProperty[];\n}\n\n/**\n * This is the message format used for `signTypeData`, for all versions\n * except `V1`.\n *\n * @template T - The custom types used by this message.\n * @property types - The custom types used by this message.\n * @property primaryType - The type of the message.\n * @property domain - Signing domain metadata. The signing domain is the intended context for the\n * signature (e.g. the dapp, protocol, etc. that it's intended for). This data is used to\n * construct the domain seperator of the message.\n * @property domain.name - The name of the signing domain.\n * @property domain.version - The current major version of the signing domain.\n * @property domain.chainId - The chain ID of the signing domain.\n * @property domain.verifyingContract - The address of the contract that can verify the signature.\n * @property domain.salt - A disambiguating salt for the protocol.\n * @property message - The message to be signed.\n */\nexport interface TypedMessage<T extends MessageTypes> {\n  types: T;\n  primaryType: keyof T;\n  domain: {\n    name?: string;\n    version?: string;\n    chainId?: number;\n    verifyingContract?: string;\n    salt?: ArrayBuffer;\n  };\n  message: Record<string, unknown>;\n}\n\nexport const TYPED_MESSAGE_SCHEMA = {\n  type: 'object',\n  properties: {\n    types: {\n      type: 'object',\n      additionalProperties: {\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            name: { type: 'string' },\n            type: { type: 'string' },\n          },\n          required: ['name', 'type'],\n        },\n      },\n    },\n    primaryType: { type: 'string' },\n    domain: { type: 'object' },\n    message: { type: 'object' },\n  },\n  required: ['types', 'primaryType', 'domain', 'message'],\n};\n\n/**\n * Validate that the given value is a valid version string.\n *\n * @param version - The version value to validate.\n * @param allowedVersions - A list of allowed versions. If omitted, all versions are assumed to be\n * allowed.\n */\nfunction validateVersion(\n  version: SignTypedDataVersion,\n  allowedVersions?: SignTypedDataVersion[],\n) {\n  if (!Object.keys(SignTypedDataVersion).includes(version)) {\n    throw new Error(`Invalid version: '${version}'`);\n  } else if (allowedVersions && !allowedVersions.includes(version)) {\n    throw new Error(\n      `SignTypedDataVersion not allowed: '${version}'. Allowed versions are: ${allowedVersions.join(\n        ', ',\n      )}`,\n    );\n  }\n}\n\n/**\n * Encode a single field.\n *\n * @param types - All type definitions.\n * @param name - The name of the field to encode.\n * @param type - The type of the field being encoded.\n * @param value - The value to encode.\n * @param version - The EIP-712 version the encoding should comply with.\n * @returns Encoded representation of the field.\n */\nfunction encodeField(\n  types: Record<string, MessageTypeProperty[]>,\n  name: string,\n  type: string,\n  value: any,\n  version: SignTypedDataVersion.V3 | SignTypedDataVersion.V4,\n): [type: string, value: any] {\n  validateVersion(version, [SignTypedDataVersion.V3, SignTypedDataVersion.V4]);\n\n  if (types[type] !== undefined) {\n    return [\n      'bytes32',\n      version === SignTypedDataVersion.V4 && value == null // eslint-disable-line no-eq-null\n        ? '0x0000000000000000000000000000000000000000000000000000000000000000'\n        : keccak(encodeData(type, value, types, version)),\n    ];\n  }\n\n  if (value === undefined) {\n    throw new Error(`missing value for field ${name} of type ${type}`);\n  }\n\n  if (type === 'bytes') {\n    return ['bytes32', keccak(value)];\n  }\n\n  if (type === 'string') {\n    // convert string to buffer - prevents ethUtil from interpreting strings like '0xabcd' as hex\n    if (typeof value === 'string') {\n      value = Buffer.from(value, 'utf8');\n    }\n    return ['bytes32', keccak(value)];\n  }\n\n  if (type.lastIndexOf(']') === type.length - 1) {\n    if (version === SignTypedDataVersion.V3) {\n      throw new Error(\n        'Arrays are unimplemented in encodeData; use V4 extension',\n      );\n    }\n    const parsedType = type.slice(0, type.lastIndexOf('['));\n    const typeValuePairs = value.map((item) =>\n      encodeField(types, name, parsedType, item, version),\n    );\n    return [\n      'bytes32',\n      keccak(\n        rawEncode(\n          typeValuePairs.map(([t]) => t),\n          typeValuePairs.map(([, v]) => v),\n        ),\n      ),\n    ];\n  }\n\n  return [type, value];\n}\n\n/**\n * Encodes an object by encoding and concatenating each of its members.\n *\n * @param primaryType - The root type.\n * @param data - The object to encode.\n * @param types - Type definitions for all types included in the message.\n * @param version - The EIP-712 version the encoding should comply with.\n * @returns An encoded representation of an object.\n */\nfunction encodeData(\n  primaryType: string,\n  data: Record<string, unknown>,\n  types: Record<string, MessageTypeProperty[]>,\n  version: SignTypedDataVersion.V3 | SignTypedDataVersion.V4,\n): Buffer {\n  validateVersion(version, [SignTypedDataVersion.V3, SignTypedDataVersion.V4]);\n\n  const encodedTypes = ['bytes32'];\n  const encodedValues: unknown[] = [hashType(primaryType, types)];\n\n  for (const field of types[primaryType]) {\n    if (version === SignTypedDataVersion.V3 && data[field.name] === undefined) {\n      continue;\n    }\n    const [type, value] = encodeField(\n      types,\n      field.name,\n      field.type,\n      data[field.name],\n      version,\n    );\n    encodedTypes.push(type);\n    encodedValues.push(value);\n  }\n\n  return rawEncode(encodedTypes, encodedValues);\n}\n\n/**\n * Encodes the type of an object by encoding a comma delimited list of its members.\n *\n * @param primaryType - The root type to encode.\n * @param types - Type definitions for all types included in the message.\n * @returns An encoded representation of the primary type.\n */\nfunction encodeType(\n  primaryType: string,\n  types: Record<string, MessageTypeProperty[]>,\n): string {\n  let result = '';\n  const unsortedDeps = findTypeDependencies(primaryType, types);\n  unsortedDeps.delete(primaryType);\n\n  const deps = [primaryType, ...Array.from(unsortedDeps).sort()];\n  for (const type of deps) {\n    const children = types[type];\n    if (!children) {\n      throw new Error(`No type definition specified: ${type}`);\n    }\n\n    result += `${type}(${types[type]\n      .map(({ name, type: t }) => `${t} ${name}`)\n      .join(',')})`;\n  }\n\n  return result;\n}\n\n/**\n * Finds all types within a type definition object.\n *\n * @param primaryType - The root type.\n * @param types - Type definitions for all types included in the message.\n * @param results - The current set of accumulated types.\n * @returns The set of all types found in the type definition.\n */\nfunction findTypeDependencies(\n  primaryType: string,\n  types: Record<string, MessageTypeProperty[]>,\n  results: Set<string> = new Set(),\n): Set<string> {\n  [primaryType] = primaryType.match(/^\\w*/u);\n  if (results.has(primaryType) || types[primaryType] === undefined) {\n    return results;\n  }\n\n  results.add(primaryType);\n\n  for (const field of types[primaryType]) {\n    findTypeDependencies(field.type, types, results);\n  }\n  return results;\n}\n\n/**\n * Hashes an object.\n *\n * @param primaryType - The root type.\n * @param data - The object to hash.\n * @param types - Type definitions for all types included in the message.\n * @param version - The EIP-712 version the encoding should comply with.\n * @returns The hash of the object.\n */\nfunction hashStruct(\n  primaryType: string,\n  data: Record<string, unknown>,\n  types: Record<string, MessageTypeProperty[]>,\n  version: SignTypedDataVersion.V3 | SignTypedDataVersion.V4,\n): Buffer {\n  validateVersion(version, [SignTypedDataVersion.V3, SignTypedDataVersion.V4]);\n\n  return keccak(encodeData(primaryType, data, types, version));\n}\n\n/**\n * Hashes the type of an object.\n *\n * @param primaryType - The root type to hash.\n * @param types - Type definitions for all types included in the message.\n * @returns The hash of the object type.\n */\nfunction hashType(\n  primaryType: string,\n  types: Record<string, MessageTypeProperty[]>,\n): Buffer {\n  return keccak(encodeType(primaryType, types));\n}\n\n/**\n * Removes properties from a message object that are not defined per EIP-712.\n *\n * @param data - The typed message object.\n * @returns The typed message object with only allowed fields.\n */\nfunction sanitizeData<T extends MessageTypes>(\n  data: TypedMessage<T>,\n): TypedMessage<T> {\n  const sanitizedData: Partial<TypedMessage<T>> = {};\n  for (const key in TYPED_MESSAGE_SCHEMA.properties) {\n    if (data[key]) {\n      sanitizedData[key] = data[key];\n    }\n  }\n\n  if ('types' in sanitizedData) {\n    sanitizedData.types = { EIP712Domain: [], ...sanitizedData.types };\n  }\n  return sanitizedData as Required<TypedMessage<T>>;\n}\n\n/**\n * Hash a typed message according to EIP-712. The returned message starts with the EIP-712 prefix,\n * which is \"1901\", followed by the hash of the domain separator, then the data (if any).\n * The result is hashed again and returned.\n *\n * This function does not sign the message. The resulting hash must still be signed to create an\n * EIP-712 signature.\n *\n * @param typedData - The typed message to hash.\n * @param version - The EIP-712 version the encoding should comply with.\n * @returns The hash of the typed message.\n */\nfunction eip712Hash<T extends MessageTypes>(\n  typedData: TypedMessage<T>,\n  version: SignTypedDataVersion.V3 | SignTypedDataVersion.V4,\n): Buffer {\n  validateVersion(version, [SignTypedDataVersion.V3, SignTypedDataVersion.V4]);\n\n  const sanitizedData = sanitizeData(typedData);\n  const parts = [Buffer.from('1901', 'hex')];\n  parts.push(\n    hashStruct(\n      'EIP712Domain',\n      sanitizedData.domain,\n      sanitizedData.types,\n      version,\n    ),\n  );\n\n  if (sanitizedData.primaryType !== 'EIP712Domain') {\n    parts.push(\n      hashStruct(\n        // TODO: Validate that this is a string, so this type cast can be removed.\n        sanitizedData.primaryType as string,\n        sanitizedData.message,\n        sanitizedData.types,\n        version,\n      ),\n    );\n  }\n  return keccak(Buffer.concat(parts));\n}\n\n/**\n * A collection of utility functions used for signing typed data.\n */\nexport const TypedDataUtils = {\n  encodeData,\n  encodeType,\n  findTypeDependencies,\n  hashStruct,\n  hashType,\n  sanitizeData,\n  eip712Hash,\n};\n\n/**\n * Generate the \"V1\" hash for the provided typed message.\n *\n * The hash will be generated in accordance with an earlier version of the EIP-712\n * specification. This hash is used in `signTypedData_v1`.\n *\n * @param typedData - The typed message.\n * @returns The '0x'-prefixed hex encoded hash representing the type of the provided message.\n */\nexport function typedSignatureHash(typedData: TypedDataV1Field[]): string {\n  const hashBuffer = _typedSignatureHash(typedData);\n  return bufferToHex(hashBuffer);\n}\n\n/**\n * Generate the \"V1\" hash for the provided typed message.\n *\n * The hash will be generated in accordance with an earlier version of the EIP-712\n * specification. This hash is used in `signTypedData_v1`.\n *\n * @param typedData - The typed message.\n * @returns The hash representing the type of the provided message.\n */\nfunction _typedSignatureHash(typedData: TypedDataV1): Buffer {\n  const error = new Error('Expect argument to be non-empty array');\n  if (\n    typeof typedData !== 'object' ||\n    !('length' in typedData) ||\n    !typedData.length\n  ) {\n    throw error;\n  }\n\n  const data = typedData.map(function (e) {\n    if (e.type !== 'bytes') {\n      return e.value;\n    }\n\n    return legacyToBuffer(e.value);\n  });\n  const types = typedData.map(function (e) {\n    return e.type;\n  });\n  const schema = typedData.map(function (e) {\n    if (!e.name) {\n      throw error;\n    }\n    return `${e.type} ${e.name}`;\n  });\n\n  return soliditySHA3(\n    ['bytes32', 'bytes32'],\n    [\n      soliditySHA3(new Array(typedData.length).fill('string'), schema),\n      soliditySHA3(types, data),\n    ],\n  );\n}\n\n/**\n * Sign typed data according to EIP-712. The signing differs based upon the `version`.\n *\n * V1 is based upon [an early version of EIP-712](https://github.com/ethereum/EIPs/pull/712/commits/21abe254fe0452d8583d5b132b1d7be87c0439ca)\n * that lacked some later security improvements, and should generally be neglected in favor of\n * later versions.\n *\n * V3 is based on [EIP-712](https://eips.ethereum.org/EIPS/eip-712), except that arrays and\n * recursive data structures are not supported.\n *\n * V4 is based on [EIP-712](https://eips.ethereum.org/EIPS/eip-712), and includes full support of\n * arrays and recursive data structures.\n *\n * @param options - The signing options.\n * @param options.privateKey - The private key to sign with.\n * @param options.data - The typed data to sign.\n * @param options.version - The signing version to use.\n * @returns The '0x'-prefixed hex encoded signature.\n */\nexport function signTypedData<\n  V extends SignTypedDataVersion,\n  T extends MessageTypes,\n>({\n  privateKey,\n  data,\n  version,\n}: {\n  privateKey: Buffer;\n  data: V extends 'V1' ? TypedDataV1 : TypedMessage<T>;\n  version: V;\n}): string {\n  validateVersion(version);\n  if (isNullish(data)) {\n    throw new Error('Missing data parameter');\n  } else if (isNullish(privateKey)) {\n    throw new Error('Missing private key parameter');\n  }\n\n  const messageHash =\n    version === SignTypedDataVersion.V1\n      ? _typedSignatureHash(data as TypedDataV1)\n      : TypedDataUtils.eip712Hash(\n          data as TypedMessage<T>,\n          version as SignTypedDataVersion.V3 | SignTypedDataVersion.V4,\n        );\n  const sig = ecsign(messageHash, privateKey);\n  return concatSig(toBuffer(sig.v), sig.r, sig.s);\n}\n\n/**\n * Recover the address of the account that created the given EIP-712\n * signature. The version provided must match the version used to\n * create the signature.\n *\n * @param options - The signature recovery options.\n * @param options.data - The typed data that was signed.\n * @param options.signature - The '0x-prefixed hex encoded message signature.\n * @param options.version - The signing version to use.\n * @returns The '0x'-prefixed hex address of the signer.\n */\nexport function recoverTypedSignature<\n  V extends SignTypedDataVersion,\n  T extends MessageTypes,\n>({\n  data,\n  signature,\n  version,\n}: {\n  data: V extends 'V1' ? TypedDataV1 : TypedMessage<T>;\n  signature: string;\n  version: V;\n}): string {\n  validateVersion(version);\n  if (isNullish(data)) {\n    throw new Error('Missing data parameter');\n  } else if (isNullish(signature)) {\n    throw new Error('Missing signature parameter');\n  }\n\n  const messageHash =\n    version === SignTypedDataVersion.V1\n      ? _typedSignatureHash(data as TypedDataV1)\n      : TypedDataUtils.eip712Hash(\n          data as TypedMessage<T>,\n          version as SignTypedDataVersion.V3 | SignTypedDataVersion.V4,\n        );\n  const publicKey = recoverPublicKey(messageHash, signature);\n  const sender = publicToAddress(publicKey);\n  return bufferToHex(sender);\n}\n","module.exports = require('./lib/index.js')\n","/* eslint-disable no-useless-escape */\nconst utils = require('ethereumjs-util')\nconst BN = require('bn.js')\n\nvar ABI = function () {\n}\n\n// Convert from short to canonical names\n// FIXME: optimise or make this nicer?\nfunction elementaryName (name) {\n  if (name.startsWith('int[')) {\n    return 'int256' + name.slice(3)\n  } else if (name === 'int') {\n    return 'int256'\n  } else if (name.startsWith('uint[')) {\n    return 'uint256' + name.slice(4)\n  } else if (name === 'uint') {\n    return 'uint256'\n  } else if (name.startsWith('fixed[')) {\n    return 'fixed128x128' + name.slice(5)\n  } else if (name === 'fixed') {\n    return 'fixed128x128'\n  } else if (name.startsWith('ufixed[')) {\n    return 'ufixed128x128' + name.slice(6)\n  } else if (name === 'ufixed') {\n    return 'ufixed128x128'\n  }\n  return name\n}\n\nABI.eventID = function (name, types) {\n  // FIXME: use node.js util.format?\n  var sig = name + '(' + types.map(elementaryName).join(',') + ')'\n  return utils.keccak256(Buffer.from(sig))\n}\n\nABI.methodID = function (name, types) {\n  return ABI.eventID(name, types).slice(0, 4)\n}\n\n// Parse N from type<N>\nfunction parseTypeN (type) {\n  return parseInt(/^\\D+(\\d+)$/.exec(type)[1], 10)\n}\n\n// Parse N,M from type<N>x<M>\nfunction parseTypeNxM (type) {\n  var tmp = /^\\D+(\\d+)x(\\d+)$/.exec(type)\n  return [ parseInt(tmp[1], 10), parseInt(tmp[2], 10) ]\n}\n\n// Parse N in type[<N>] where \"type\" can itself be an array type.\nfunction parseTypeArray (type) {\n  var tmp = type.match(/(.*)\\[(.*?)\\]$/)\n  if (tmp) {\n    return tmp[2] === '' ? 'dynamic' : parseInt(tmp[2], 10)\n  }\n  return null\n}\n\nfunction parseNumber (arg) {\n  var type = typeof arg\n  if (type === 'string') {\n    if (utils.isHexPrefixed(arg)) {\n      return new BN(utils.stripHexPrefix(arg), 16)\n    } else {\n      return new BN(arg, 10)\n    }\n  } else if (type === 'number') {\n    return new BN(arg)\n  } else if (arg.toArray) {\n    // assume this is a BN for the moment, replace with BN.isBN soon\n    return arg\n  } else {\n    throw new Error('Argument is not a number')\n  }\n}\n\n// someMethod(bytes,uint)\n// someMethod(bytes,uint):(boolean)\nfunction parseSignature (sig) {\n  var tmp = /^(\\w+)\\((.*)\\)$/.exec(sig)\n\n  if (tmp.length !== 3) {\n    throw new Error('Invalid method signature')\n  }\n\n  var args = /^(.+)\\):\\((.+)$/.exec(tmp[2])\n\n  if (args !== null && args.length === 3) {\n    return {\n      method: tmp[1],\n      args: args[1].split(','),\n      retargs: args[2].split(',')\n    }\n  } else {\n    var params = tmp[2].split(',')\n    if (params.length === 1 && params[0] === '') {\n      // Special-case (possibly naive) fixup for functions that take no arguments.\n      // TODO: special cases are always bad, but this makes the function return\n      // match what the calling functions expect\n      params = []\n    }\n    return {\n      method: tmp[1],\n      args: params\n    }\n  }\n}\n\n// Encodes a single item (can be dynamic array)\n// @returns: Buffer\nfunction encodeSingle (type, arg) {\n  var size, num, ret, i\n\n  if (type === 'address') {\n    return encodeSingle('uint160', parseNumber(arg))\n  } else if (type === 'bool') {\n    return encodeSingle('uint8', arg ? 1 : 0)\n  } else if (type === 'string') {\n    return encodeSingle('bytes', Buffer.from(arg, 'utf8'))\n  } else if (isArray(type)) {\n    // this part handles fixed-length ([2]) and variable length ([]) arrays\n    // NOTE: we catch here all calls to arrays, that simplifies the rest\n    if (typeof arg.length === 'undefined') {\n      throw new Error('Not an array?')\n    }\n    size = parseTypeArray(type)\n    if (size !== 'dynamic' && size !== 0 && arg.length > size) {\n      throw new Error('Elements exceed array size: ' + size)\n    }\n    ret = []\n    type = type.slice(0, type.lastIndexOf('['))\n    if (typeof arg === 'string') {\n      arg = JSON.parse(arg)\n    }\n    for (i in arg) {\n      ret.push(encodeSingle(type, arg[i]))\n    }\n    if (size === 'dynamic') {\n      var length = encodeSingle('uint256', arg.length)\n      ret.unshift(length)\n    }\n    return Buffer.concat(ret)\n  } else if (type === 'bytes') {\n    arg = Buffer.from(arg)\n\n    ret = Buffer.concat([ encodeSingle('uint256', arg.length), arg ])\n\n    if ((arg.length % 32) !== 0) {\n      ret = Buffer.concat([ ret, utils.zeros(32 - (arg.length % 32)) ])\n    }\n\n    return ret\n  } else if (type.startsWith('bytes')) {\n    size = parseTypeN(type)\n    if (size < 1 || size > 32) {\n      throw new Error('Invalid bytes<N> width: ' + size)\n    }\n\n    return utils.setLengthRight(arg, 32)\n  } else if (type.startsWith('uint')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid uint<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    if (num.bitLength() > size) {\n      throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + num.bitLength())\n    }\n\n    if (num < 0) {\n      throw new Error('Supplied uint is negative')\n    }\n\n    return num.toArrayLike(Buffer, 'be', 32)\n  } else if (type.startsWith('int')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid int<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    if (num.bitLength() > size) {\n      throw new Error('Supplied int exceeds width: ' + size + ' vs ' + num.bitLength())\n    }\n\n    return num.toTwos(256).toArrayLike(Buffer, 'be', 32)\n  } else if (type.startsWith('ufixed')) {\n    size = parseTypeNxM(type)\n\n    num = parseNumber(arg)\n\n    if (num < 0) {\n      throw new Error('Supplied ufixed is negative')\n    }\n\n    return encodeSingle('uint256', num.mul(new BN(2).pow(new BN(size[1]))))\n  } else if (type.startsWith('fixed')) {\n    size = parseTypeNxM(type)\n\n    return encodeSingle('int256', parseNumber(arg).mul(new BN(2).pow(new BN(size[1]))))\n  }\n\n  throw new Error('Unsupported or invalid type: ' + type)\n}\n\n// Decodes a single item (can be dynamic array)\n// @returns: array\n// FIXME: this method will need a lot of attention at checking limits and validation\nfunction decodeSingle (parsedType, data, offset) {\n  if (typeof parsedType === 'string') {\n    parsedType = parseType(parsedType)\n  }\n  var size, num, ret, i\n\n  if (parsedType.name === 'address') {\n    return decodeSingle(parsedType.rawType, data, offset).toArrayLike(Buffer, 'be', 20).toString('hex')\n  } else if (parsedType.name === 'bool') {\n    return decodeSingle(parsedType.rawType, data, offset).toString() === new BN(1).toString()\n  } else if (parsedType.name === 'string') {\n    var bytes = decodeSingle(parsedType.rawType, data, offset)\n    return Buffer.from(bytes, 'utf8').toString()\n  } else if (parsedType.isArray) {\n    // this part handles fixed-length arrays ([2]) and variable length ([]) arrays\n    // NOTE: we catch here all calls to arrays, that simplifies the rest\n    ret = []\n    size = parsedType.size\n\n    if (parsedType.size === 'dynamic') {\n      offset = decodeSingle('uint256', data, offset).toNumber()\n      size = decodeSingle('uint256', data, offset).toNumber()\n      offset = offset + 32\n    }\n    for (i = 0; i < size; i++) {\n      var decoded = decodeSingle(parsedType.subArray, data, offset)\n      ret.push(decoded)\n      offset += parsedType.subArray.memoryUsage\n    }\n    return ret\n  } else if (parsedType.name === 'bytes') {\n    offset = decodeSingle('uint256', data, offset).toNumber()\n    size = decodeSingle('uint256', data, offset).toNumber()\n    return data.slice(offset + 32, offset + 32 + size)\n  } else if (parsedType.name.startsWith('bytes')) {\n    return data.slice(offset, offset + parsedType.size)\n  } else if (parsedType.name.startsWith('uint')) {\n    num = new BN(data.slice(offset, offset + 32), 16, 'be')\n    if (num.bitLength() > parsedType.size) {\n      throw new Error('Decoded int exceeds width: ' + parsedType.size + ' vs ' + num.bitLength())\n    }\n    return num\n  } else if (parsedType.name.startsWith('int')) {\n    num = new BN(data.slice(offset, offset + 32), 16, 'be').fromTwos(256)\n    if (num.bitLength() > parsedType.size) {\n      throw new Error('Decoded uint exceeds width: ' + parsedType.size + ' vs ' + num.bitLength())\n    }\n\n    return num\n  } else if (parsedType.name.startsWith('ufixed')) {\n    size = new BN(2).pow(new BN(parsedType.size[1]))\n    num = decodeSingle('uint256', data, offset)\n    if (!num.mod(size).isZero()) {\n      throw new Error('Decimals not supported yet')\n    }\n    return num.div(size)\n  } else if (parsedType.name.startsWith('fixed')) {\n    size = new BN(2).pow(new BN(parsedType.size[1]))\n    num = decodeSingle('int256', data, offset)\n    if (!num.mod(size).isZero()) {\n      throw new Error('Decimals not supported yet')\n    }\n    return num.div(size)\n  }\n  throw new Error('Unsupported or invalid type: ' + parsedType.name)\n}\n\n// Parse the given type\n// @returns: {} containing the type itself, memory usage and (including size and subArray if applicable)\nfunction parseType (type) {\n  var size\n  var ret\n  if (isArray(type)) {\n    size = parseTypeArray(type)\n    var subArray = type.slice(0, type.lastIndexOf('['))\n    subArray = parseType(subArray)\n    ret = {\n      isArray: true,\n      name: type,\n      size: size,\n      memoryUsage: size === 'dynamic' ? 32 : subArray.memoryUsage * size,\n      subArray: subArray\n    }\n    return ret\n  } else {\n    var rawType\n    switch (type) {\n      case 'address':\n        rawType = 'uint160'\n        break\n      case 'bool':\n        rawType = 'uint8'\n        break\n      case 'string':\n        rawType = 'bytes'\n        break\n    }\n    ret = {\n      rawType: rawType,\n      name: type,\n      memoryUsage: 32\n    }\n\n    if ((type.startsWith('bytes') && type !== 'bytes') || type.startsWith('uint') || type.startsWith('int')) {\n      ret.size = parseTypeN(type)\n    } else if (type.startsWith('ufixed') || type.startsWith('fixed')) {\n      ret.size = parseTypeNxM(type)\n    }\n\n    if (type.startsWith('bytes') && type !== 'bytes' && (ret.size < 1 || ret.size > 32)) {\n      throw new Error('Invalid bytes<N> width: ' + ret.size)\n    }\n    if ((type.startsWith('uint') || type.startsWith('int')) && (ret.size % 8 || ret.size < 8 || ret.size > 256)) {\n      throw new Error('Invalid int/uint<N> width: ' + ret.size)\n    }\n    return ret\n  }\n}\n\n// Is a type dynamic?\nfunction isDynamic (type) {\n  // FIXME: handle all types? I don't think anything is missing now\n  return (type === 'string') || (type === 'bytes') || (parseTypeArray(type) === 'dynamic')\n}\n\n// Is a type an array?\nfunction isArray (type) {\n  return type.lastIndexOf(']') === type.length - 1\n}\n\n// Encode a method/event with arguments\n// @types an array of string type names\n// @args  an array of the appropriate values\nABI.rawEncode = function (types, values) {\n  var output = []\n  var data = []\n\n  var headLength = 0\n\n  types.forEach(function (type) {\n    if (isArray(type)) {\n      var size = parseTypeArray(type)\n\n      if (size !== 'dynamic') {\n        headLength += 32 * size\n      } else {\n        headLength += 32\n      }\n    } else {\n      headLength += 32\n    }\n  })\n\n  for (var i = 0; i < types.length; i++) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n    var cur = encodeSingle(type, value)\n\n    // Use the head/tail method for storing dynamic data\n    if (isDynamic(type)) {\n      output.push(encodeSingle('uint256', headLength))\n      data.push(cur)\n      headLength += cur.length\n    } else {\n      output.push(cur)\n    }\n  }\n\n  return Buffer.concat(output.concat(data))\n}\n\nABI.rawDecode = function (types, data) {\n  var ret = []\n  data = Buffer.from(data)\n  var offset = 0\n  for (var i = 0; i < types.length; i++) {\n    var type = elementaryName(types[i])\n    var parsed = parseType(type, data, offset)\n    var decoded = decodeSingle(parsed, data, offset)\n    offset += parsed.memoryUsage\n    ret.push(decoded)\n  }\n  return ret\n}\n\nABI.simpleEncode = function (method) {\n  var args = Array.prototype.slice.call(arguments).slice(1)\n  var sig = parseSignature(method)\n\n  // FIXME: validate/convert arguments\n  if (args.length !== sig.args.length) {\n    throw new Error('Argument count mismatch')\n  }\n\n  return Buffer.concat([ ABI.methodID(sig.method, sig.args), ABI.rawEncode(sig.args, args) ])\n}\n\nABI.simpleDecode = function (method, data) {\n  var sig = parseSignature(method)\n\n  // FIXME: validate/convert arguments\n  if (!sig.retargs) {\n    throw new Error('No return values in method')\n  }\n\n  return ABI.rawDecode(sig.retargs, data)\n}\n\nfunction stringify (type, value) {\n  if (type.startsWith('address') || type.startsWith('bytes')) {\n    return '0x' + value.toString('hex')\n  } else {\n    return value.toString()\n  }\n}\n\nABI.stringify = function (types, values) {\n  var ret = []\n\n  for (var i in types) {\n    var type = types[i]\n    var value = values[i]\n\n    // if it is an array type, concat the items\n    if (/^[^\\[]+\\[.*\\]$/.test(type)) {\n      value = value.map(function (item) {\n        return stringify(type, item)\n      }).join(', ')\n    } else {\n      value = stringify(type, value)\n    }\n\n    ret.push(value)\n  }\n\n  return ret\n}\n\nABI.solidityHexValue = function (type, value, bitsize) {\n  // pass in bitsize = null if use default bitsize\n  var size, num\n  if (isArray(type)) {\n    var subType = type.replace(/\\[.*?\\]/, '')\n    if (!isArray(subType)) {\n      var arraySize = parseTypeArray(type)\n      if (arraySize !== 'dynamic' && arraySize !== 0 && value.length > arraySize) {\n        throw new Error('Elements exceed array size: ' + arraySize)\n      }\n    }\n    var arrayValues = value.map(function (v) {\n      return ABI.solidityHexValue(subType, v, 256)\n    })\n    return Buffer.concat(arrayValues)\n  } else if (type === 'bytes') {\n    return value\n  } else if (type === 'string') {\n    return Buffer.from(value, 'utf8')\n  } else if (type === 'bool') {\n    bitsize = bitsize || 8\n    var padding = Array((bitsize) / 4).join('0')\n    return Buffer.from(value ? padding + '1' : padding + '0', 'hex')\n  } else if (type === 'address') {\n    var bytesize = 20\n    if (bitsize) {\n      bytesize = bitsize / 8\n    }\n    return utils.setLengthLeft(value, bytesize)\n  } else if (type.startsWith('bytes')) {\n    size = parseTypeN(type)\n    if (size < 1 || size > 32) {\n      throw new Error('Invalid bytes<N> width: ' + size)\n    }\n\n    return utils.setLengthRight(value, size)\n  } else if (type.startsWith('uint')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid uint<N> width: ' + size)\n    }\n\n    num = parseNumber(value)\n    if (num.bitLength() > size) {\n      throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + num.bitLength())\n    }\n\n    bitsize = bitsize || size\n    return num.toArrayLike(Buffer, 'be', bitsize / 8)\n  } else if (type.startsWith('int')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid int<N> width: ' + size)\n    }\n\n    num = parseNumber(value)\n    if (num.bitLength() > size) {\n      throw new Error('Supplied int exceeds width: ' + size + ' vs ' + num.bitLength())\n    }\n\n    bitsize = bitsize || size\n    return num.toTwos(size).toArrayLike(Buffer, 'be', bitsize / 8)\n  } else {\n    // FIXME: support all other types\n    throw new Error('Unsupported or invalid type: ' + type)\n  }\n}\n\nABI.solidityPack = function (types, values) {\n  if (types.length !== values.length) {\n    throw new Error('Number of types are not matching the values')\n  }\n\n  var ret = []\n\n  for (var i = 0; i < types.length; i++) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n    ret.push(ABI.solidityHexValue(type, value, null))\n  }\n\n  return Buffer.concat(ret)\n}\n\nABI.soliditySHA3 = function (types, values) {\n  return utils.keccak256(ABI.solidityPack(types, values))\n}\n\nABI.soliditySHA256 = function (types, values) {\n  return utils.sha256(ABI.solidityPack(types, values))\n}\n\nABI.solidityRIPEMD160 = function (types, values) {\n  return utils.ripemd160(ABI.solidityPack(types, values), true)\n}\n\n// Serpent's users are familiar with this encoding\n// - s: string\n// - b: bytes\n// - b<N>: bytes<N>\n// - i: int256\n// - a: int256[]\n\nfunction isNumeric (c) {\n  // FIXME: is this correct? Seems to work\n  return (c >= '0') && (c <= '9')\n}\n\n// For a \"documentation\" refer to https://github.com/ethereum/serpent/blob/develop/preprocess.cpp\nABI.fromSerpent = function (sig) {\n  var ret = []\n  for (var i = 0; i < sig.length; i++) {\n    var type = sig[i]\n    if (type === 's') {\n      ret.push('bytes')\n    } else if (type === 'b') {\n      var tmp = 'bytes'\n      var j = i + 1\n      while ((j < sig.length) && isNumeric(sig[j])) {\n        tmp += sig[j] - '0'\n        j++\n      }\n      i = j - 1\n      ret.push(tmp)\n    } else if (type === 'i') {\n      ret.push('int256')\n    } else if (type === 'a') {\n      ret.push('int256[]')\n    } else {\n      throw new Error('Unsupported or invalid type: ' + type)\n    }\n  }\n  return ret\n}\n\nABI.toSerpent = function (types) {\n  var ret = []\n  for (var i = 0; i < types.length; i++) {\n    var type = types[i]\n    if (type === 'bytes') {\n      ret.push('s')\n    } else if (type.startsWith('bytes')) {\n      ret.push('b' + parseTypeN(type))\n    } else if (type === 'int256') {\n      ret.push('i')\n    } else if (type === 'int256[]') {\n      ret.push('a')\n    } else {\n      throw new Error('Unsupported or invalid type: ' + type)\n    }\n  }\n  return ret.join('')\n}\n\nmodule.exports = ABI\n","import * as nacl from 'tweetnacl';\nimport * as naclUtil from 'tweetnacl-util';\n\nimport { isNullish } from './utils';\n\nexport interface EthEncryptedData {\n  version: string;\n  nonce: string;\n  ephemPublicKey: string;\n  ciphertext: string;\n}\n\n/**\n * Encrypt a message.\n *\n * @param options - The encryption options.\n * @param options.publicKey - The public key of the message recipient.\n * @param options.data - The message data.\n * @param options.version - The type of encryption to use.\n * @returns The encrypted data.\n */\nexport function encrypt({\n  publicKey,\n  data,\n  version,\n}: {\n  publicKey: string;\n  data: unknown;\n  version: string;\n}): EthEncryptedData {\n  if (isNullish(publicKey)) {\n    throw new Error('Missing publicKey parameter');\n  } else if (isNullish(data)) {\n    throw new Error('Missing data parameter');\n  } else if (isNullish(version)) {\n    throw new Error('Missing version parameter');\n  }\n\n  switch (version) {\n    case 'x25519-xsalsa20-poly1305': {\n      if (typeof data !== 'string') {\n        throw new Error('Message data must be given as a string');\n      }\n      // generate ephemeral keypair\n      const ephemeralKeyPair = nacl.box.keyPair();\n\n      // assemble encryption parameters - from string to UInt8\n      let pubKeyUInt8Array;\n      try {\n        pubKeyUInt8Array = naclUtil.decodeBase64(publicKey);\n      } catch (err) {\n        throw new Error('Bad public key');\n      }\n\n      const msgParamsUInt8Array = naclUtil.decodeUTF8(data);\n      const nonce = nacl.randomBytes(nacl.box.nonceLength);\n\n      // encrypt\n      const encryptedMessage = nacl.box(\n        msgParamsUInt8Array,\n        nonce,\n        pubKeyUInt8Array,\n        ephemeralKeyPair.secretKey,\n      );\n\n      // handle encrypted data\n      const output = {\n        version: 'x25519-xsalsa20-poly1305',\n        nonce: naclUtil.encodeBase64(nonce),\n        ephemPublicKey: naclUtil.encodeBase64(ephemeralKeyPair.publicKey),\n        ciphertext: naclUtil.encodeBase64(encryptedMessage),\n      };\n      // return encrypted msg data\n      return output;\n    }\n\n    default:\n      throw new Error('Encryption type/version not supported');\n  }\n}\n\n/**\n * Encrypt a message in a way that obscures the message length.\n *\n * The message is padded to a multiple of 2048 before being encrypted so that the length of the\n * resulting encrypted message can't be used to guess the exact length of the original message.\n *\n * @param options - The encryption options.\n * @param options.publicKey - The public key of the message recipient.\n * @param options.data - The message data.\n * @param options.version - The type of encryption to use.\n * @returns The encrypted data.\n */\nexport function encryptSafely({\n  publicKey,\n  data,\n  version,\n}: {\n  publicKey: string;\n  data: unknown;\n  version: string;\n}): EthEncryptedData {\n  if (isNullish(publicKey)) {\n    throw new Error('Missing publicKey parameter');\n  } else if (isNullish(data)) {\n    throw new Error('Missing data parameter');\n  } else if (isNullish(version)) {\n    throw new Error('Missing version parameter');\n  }\n\n  const DEFAULT_PADDING_LENGTH = 2 ** 11;\n  const NACL_EXTRA_BYTES = 16;\n\n  if (typeof data === 'object' && 'toJSON' in data) {\n    // remove toJSON attack vector\n    // TODO, check all possible children\n    throw new Error(\n      'Cannot encrypt with toJSON property.  Please remove toJSON property',\n    );\n  }\n\n  // add padding\n  const dataWithPadding = {\n    data,\n    padding: '',\n  };\n\n  // calculate padding\n  const dataLength = Buffer.byteLength(\n    JSON.stringify(dataWithPadding),\n    'utf-8',\n  );\n  const modVal = dataLength % DEFAULT_PADDING_LENGTH;\n  let padLength = 0;\n  // Only pad if necessary\n  if (modVal > 0) {\n    padLength = DEFAULT_PADDING_LENGTH - modVal - NACL_EXTRA_BYTES; // nacl extra bytes\n  }\n  dataWithPadding.padding = '0'.repeat(padLength);\n\n  const paddedMessage = JSON.stringify(dataWithPadding);\n  return encrypt({ publicKey, data: paddedMessage, version });\n}\n\n/**\n * Decrypt a message.\n *\n * @param options - The decryption options.\n * @param options.encryptedData - The encrypted data.\n * @param options.privateKey - The private key to decrypt with.\n * @returns The decrypted message.\n */\nexport function decrypt({\n  encryptedData,\n  privateKey,\n}: {\n  encryptedData: EthEncryptedData;\n  privateKey: string;\n}): string {\n  if (isNullish(encryptedData)) {\n    throw new Error('Missing encryptedData parameter');\n  } else if (isNullish(privateKey)) {\n    throw new Error('Missing privateKey parameter');\n  }\n\n  switch (encryptedData.version) {\n    case 'x25519-xsalsa20-poly1305': {\n      // string to buffer to UInt8Array\n      const recieverPrivateKeyUint8Array = nacl_decodeHex(privateKey);\n      const recieverEncryptionPrivateKey = nacl.box.keyPair.fromSecretKey(\n        recieverPrivateKeyUint8Array,\n      ).secretKey;\n\n      // assemble decryption parameters\n      const nonce = naclUtil.decodeBase64(encryptedData.nonce);\n      const ciphertext = naclUtil.decodeBase64(encryptedData.ciphertext);\n      const ephemPublicKey = naclUtil.decodeBase64(\n        encryptedData.ephemPublicKey,\n      );\n\n      // decrypt\n      const decryptedMessage = nacl.box.open(\n        ciphertext,\n        nonce,\n        ephemPublicKey,\n        recieverEncryptionPrivateKey,\n      );\n\n      // return decrypted msg data\n      let output;\n      try {\n        output = naclUtil.encodeUTF8(decryptedMessage);\n      } catch (err) {\n        throw new Error('Decryption failed.');\n      }\n\n      if (output) {\n        return output;\n      }\n      throw new Error('Decryption failed.');\n    }\n\n    default:\n      throw new Error('Encryption type/version not supported.');\n  }\n}\n\n/**\n * Decrypt a message that has been encrypted using `encryptSafely`.\n *\n * @param options - The decryption options.\n * @param options.encryptedData - The encrypted data.\n * @param options.privateKey - The private key to decrypt with.\n * @returns The decrypted message.\n */\nexport function decryptSafely({\n  encryptedData,\n  privateKey,\n}: {\n  encryptedData: EthEncryptedData;\n  privateKey: string;\n}): string {\n  if (isNullish(encryptedData)) {\n    throw new Error('Missing encryptedData parameter');\n  } else if (isNullish(privateKey)) {\n    throw new Error('Missing privateKey parameter');\n  }\n\n  const dataWithPadding = JSON.parse(decrypt({ encryptedData, privateKey }));\n  return dataWithPadding.data;\n}\n\n/**\n * Get the encryption public key for the given key.\n *\n * @param privateKey - The private key to generate the encryption public key with.\n * @returns The encryption public key.\n */\nexport function getEncryptionPublicKey(privateKey: string): string {\n  const privateKeyUint8Array = nacl_decodeHex(privateKey);\n  const encryptionPublicKey =\n    nacl.box.keyPair.fromSecretKey(privateKeyUint8Array).publicKey;\n  return naclUtil.encodeBase64(encryptionPublicKey);\n}\n\n/**\n * Convert a hex string to the UInt8Array format used by nacl.\n *\n * @param msgHex - The string to convert.\n * @returns The converted string.\n */\nfunction nacl_decodeHex(msgHex: string): Uint8Array {\n  const msgBase64 = Buffer.from(msgHex, 'hex').toString('base64');\n  return naclUtil.decodeBase64(msgBase64);\n}\n","(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = Math.floor((x[j] + 128) / 256);\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n","// Written in 2014-2016 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n(function(root, f) {\n  'use strict';\n  if (typeof module !== 'undefined' && module.exports) module.exports = f();\n  else if (root.nacl) root.nacl.util = f();\n  else {\n    root.nacl = {};\n    root.nacl.util = f();\n  }\n}(this, function() {\n  'use strict';\n\n  var util = {};\n\n  function validateBase64(s) {\n    if (!(/^(?:[A-Za-z0-9+\\/]{2}[A-Za-z0-9+\\/]{2})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/.test(s))) {\n      throw new TypeError('invalid encoding');\n    }\n  }\n\n  util.decodeUTF8 = function(s) {\n    if (typeof s !== 'string') throw new TypeError('expected string');\n    var i, d = unescape(encodeURIComponent(s)), b = new Uint8Array(d.length);\n    for (i = 0; i < d.length; i++) b[i] = d.charCodeAt(i);\n    return b;\n  };\n\n  util.encodeUTF8 = function(arr) {\n    var i, s = [];\n    for (i = 0; i < arr.length; i++) s.push(String.fromCharCode(arr[i]));\n    return decodeURIComponent(escape(s.join('')));\n  };\n\n  if (typeof atob === 'undefined') {\n    // Node.js\n\n    if (typeof Buffer.from !== 'undefined') {\n       // Node v6 and later\n      util.encodeBase64 = function (arr) { // v6 and later\n          return Buffer.from(arr).toString('base64');\n      };\n\n      util.decodeBase64 = function (s) {\n        validateBase64(s);\n        return new Uint8Array(Array.prototype.slice.call(Buffer.from(s, 'base64'), 0));\n      };\n\n    } else {\n      // Node earlier than v6\n      util.encodeBase64 = function (arr) { // v6 and later\n        return (new Buffer(arr)).toString('base64');\n      };\n\n      util.decodeBase64 = function(s) {\n        validateBase64(s);\n        return new Uint8Array(Array.prototype.slice.call(new Buffer(s, 'base64'), 0));\n      };\n    }\n\n  } else {\n    // Browsers\n\n    util.encodeBase64 = function(arr) {\n      var i, s = [], len = arr.length;\n      for (i = 0; i < len; i++) s.push(String.fromCharCode(arr[i]));\n      return btoa(s.join(''));\n    };\n\n    util.decodeBase64 = function(s) {\n      validateBase64(s);\n      var i, d = atob(s), b = new Uint8Array(d.length);\n      for (i = 0; i < d.length; i++) b[i] = d.charCodeAt(i);\n      return b;\n    };\n\n  }\n\n  return util;\n\n}));\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidatorResultError = require('./helpers').ValidatorResultError;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\nmodule.exports.SchemaScanResult = require('./scan').SchemaScanResult;\nmodule.exports.scan = require('./scan').scan;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar scanSchema = require('./scan').scan;\nvar ValidatorResult = helpers.ValidatorResult;\nvar ValidatorResultError = helpers.ValidatorResultError;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n//var anonymousBase = 'vnd.jsonschema:///';\nvar anonymousBase = '/';\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, base) {\n  var self = this;\n  if (!schema) {\n    return null;\n  }\n  var scan = scanSchema(base||anonymousBase, schema);\n  var ourUri = base || schema.$id || schema.id;\n  for(var uri in scan.id){\n    this.schemas[uri] = scan.id[uri];\n  }\n  for(var uri in scan.ref){\n    // If this schema is already defined, it will be filtered out by the next step\n    this.unresolvedRefs.push(uri);\n  }\n  // Remove newly defined schemas from unresolvedRefs\n  this.unresolvedRefs = this.unresolvedRefs.filter(function(uri){\n    return typeof self.schemas[uri]==='undefined';\n  });\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!Array.isArray(schemas)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if((typeof schema !== 'boolean' && typeof schema !== 'object') || schema === null){\n    throw new SchemaError('Expected `schema` to be an object or boolean');\n  }\n  if (!options) {\n    options = {};\n  }\n  // This section indexes subschemas in the provided schema, so they don't need to be added with Validator#addSchema\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var id = schema.$id || schema.id;\n  var base = urilib.resolve(options.base||anonymousBase, id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, [], base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n    var found = scanSchema(base, schema);\n    for(var n in found.id){\n      var sch = found.id[n];\n      ctx.schemas[n] = sch;\n    }\n  }\n  if(options.required && instance===undefined){\n    var result = new ValidatorResult(instance, schema, options, ctx);\n    result.addError('is required, but is undefined');\n    return result;\n  }\n  var result = this.validateSchema(instance, schema, options, ctx);\n  if (!result) {\n    throw new Error('Result undefined');\n  }else if(options.throwAll && result.errors.length){\n    throw new ValidatorResultError(result);\n  }\n  return result;\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  // Support for the true/false schemas\n  if(typeof schema==='boolean') {\n    if(schema===true){\n      // `true` is always valid\n      schema = {};\n    }else if(schema===false){\n      // `false` is always invalid\n      schema = {type: []};\n    }\n  }else if(!schema){\n    // This might be a string\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (Array.isArray(schema['extends'])) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  // If passed a string argument, load that schema URI\n  var switchSchema = shouldResolve(schema);\n  if (switchSchema) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.path, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref = shouldResolve(schema);\n  if(ref) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n};\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if(type===undefined){\n    return;\n  }else if(type===null){\n    throw new SchemaError('Unexpected null in \"type\" keyword');\n  }\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance === 'object') && !(Array.isArray(instance)) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'additionalItems': true,\n  'then': true,\n  'else': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true,\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      if(!v) return;\n      var id = v.$id || v.id;\n      return id ? ('<' + id + '>') : (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchemaNoThrow(instance, options, ctx, callback, schema){\n  var throwError = options.throwError;\n  var throwAll = options.throwAll;\n  options.throwError = false;\n  options.throwAll = false;\n  var res = this.validateSchema(instance, schema, options, ctx);\n  options.throwError = throwError;\n  options.throwAll = throwAll;\n\n  if (!res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n    ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      var id = v.$id || v.id;\n      if(id) return '<' + id + '>';\n      return(v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var id = v.$id || v.id;\n      var msg = id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n    ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    var id = v.$id || v.id;\n    return id || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates \"then\" or \"else\" depending on the result of validating \"if\"\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.if = function validateIf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) return null;\n  if (!helpers.isSchema(schema.if)) throw new Error('Expected \"if\" keyword to be a schema');\n  var ifValid = testSchemaNoThrow.call(this, instance, options, ctx, null, schema.if);\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var res;\n  if(ifValid){\n    if (schema.then === undefined) return;\n    if (!helpers.isSchema(schema.then)) throw new Error('Expected \"then\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.then, options, ctx.makeChild(schema.then));\n    result.importErrors(res);\n  }else{\n    if (schema.else === undefined) return;\n    if (!helpers.isSchema(schema.else)) throw new Error('Expected \"else\" keyword to be a schema');\n    res = this.validateSchema(instance, schema.else, options, ctx.makeChild(schema.else));\n    result.importErrors(res);\n  }\n  return result;\n};\n\nfunction getEnumerableProperty(object, key){\n  // Determine if `key` shows up in `for(var key in object)`\n  // First test Object.hasOwnProperty.call as an optimization: that guarantees it does\n  if(Object.hasOwnProperty.call(object, key)) return object[key];\n  // Test `key in object` as an optimization; false means it won't\n  if(!(key in object)) return;\n  while( (object = Object.getPrototypeOf(object)) ){\n    if(Object.propertyIsEnumerable.call(object, key)) return object[key];\n  }\n}\n\n/**\n * Validates propertyNames\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.propertyNames = function validatePropertyNames (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var subschema = schema.propertyNames!==undefined ? schema.propertyNames : {};\n  if(!helpers.isSchema(subschema)) throw new SchemaError('Expected \"propertyNames\" to be a schema (object or boolean)');\n\n  for (var property in instance) {\n    if(getEnumerableProperty(instance, property) !== undefined){\n      var res = this.validateSchema(property, subschema, options, ctx.makeChild(subschema));\n      result.importErrors(res);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    var subschema = properties[property];\n    if(subschema===undefined){\n      continue;\n    }else if(subschema===null){\n      throw new SchemaError('Unexpected null, expected schema in \"properties\"');\n    }\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, subschema, options, ctx);\n    }\n    var prop = getEnumerableProperty(instance, property);\n    var res = this.validateSchema(prop, subschema, options, ctx.makeChild(subschema, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existence tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if(!this.types.object(instance)) return;\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"is not allowed to have the additional property \" + JSON.stringify(property),\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, additionalProperties, options, ctx);\n    }\n\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var subschema = patternProperties[pattern];\n      if(subschema===undefined){\n        continue;\n      }else if(subschema===null){\n        throw new SchemaError('Unexpected null, expected schema in \"patternProperties\"');\n      }\n      try {\n        var regexp = new RegExp(pattern, 'u');\n      } catch(_e) {\n        // In the event the stricter handling causes an error, fall back on the forgiving handling\n        // DEPRECATED\n        regexp = new RegExp(pattern);\n      }\n      if (!regexp.test(property)) {\n        continue;\n      }\n      test = false;\n\n      if (typeof options.preValidateProperty == 'function') {\n        options.preValidateProperty(instance, property, subschema, options, ctx);\n      }\n\n      var res = this.validateSchema(instance[property], subschema, options, ctx.makeChild(subschema, property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.items===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  instance.every(function (value, i) {\n    if(Array.isArray(schema.items)){\n      var items =  schema.items[i]===undefined ? schema.additionalItems : schema.items[i];\n    }else{\n      var items = schema.items;\n    }\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates the \"contains\" keyword\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.contains = function validateContains (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (schema.contains===undefined) return;\n  if (!helpers.isSchema(schema.contains)) throw new Error('Expected \"contains\" keyword to be a schema');\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var count = instance.some(function (value, i) {\n    var res = self.validateSchema(value, schema.contains, options, ctx.makeChild(schema.contains, i));\n    return res.errors.length===0;\n  });\n  if(count===false){\n    result.addError({\n      name: 'contains',\n      argument: schema.contains,\n      message: \"must contain an item matching given schema\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    if(!(instance > schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than \" + schema.minimum,\n      });\n    }\n  } else {\n    if(!(instance >= schema.minimum)){\n      result.addError({\n        name: 'minimum',\n        argument: schema.minimum,\n        message: \"must be greater than or equal to \" + schema.minimum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    if(!(instance < schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than \" + schema.maximum,\n      });\n    }\n  } else {\n    if(!(instance <= schema.maximum)){\n      result.addError({\n        name: 'maximum',\n        argument: schema.maximum,\n        message: \"must be less than or equal to \" + schema.maximum,\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMinimum = function validateExclusiveMinimum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMinimum, which is handled by the \"minimum\" keyword.\n  if(typeof schema.exclusiveMinimum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance > schema.exclusiveMinimum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMinimum',\n      argument: schema.exclusiveMinimum,\n      message: \"must be strictly greater than \" + schema.exclusiveMinimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates the number form of exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.exclusiveMaximum = function validateExclusiveMaximum (instance, schema, options, ctx) {\n  // Support the boolean form of exclusiveMaximum, which is handled by the \"maximum\" keyword.\n  if(typeof schema.exclusiveMaximum === 'boolean') return;\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = instance < schema.exclusiveMaximum;\n  if (!valid) {\n    result.addError({\n      name: 'exclusiveMaximum',\n      argument: schema.exclusiveMaximum,\n      message: \"must be strictly less than \" + schema.exclusiveMaximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (!this.types.number(instance)) return;\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument),\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatibility with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\",\n    });\n  } else if (this.types.object(instance) && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(getEnumerableProperty(instance, n)===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var pattern = schema.pattern;\n  try {\n    var regexp = new RegExp(pattern, 'u');\n  } catch(_e) {\n    // In the event the stricter handling causes an error, fall back on the forgiving handling\n    // DEPRECATED\n    regexp = new RegExp(pattern);\n  }\n  if (!instance.match(regexp)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern.toString()),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  if (instance===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  // TODO if this was already computed in \"minLength\", use that value instead of re-computing\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (schema.uniqueItems!==true) return;\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].map(String).join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var id = type && (type.$id || type.id);\n      var schemaId = id || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n"],"sourceRoot":""}