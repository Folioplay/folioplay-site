{"version":3,"sources":["../../src/baseEvmAdapter.ts","../../src/config.ts","../../src/walletConnectV1adapter.ts"],"names":["BaseEvmAdapter","params","clientId","provider","chainConfig","chainId","WalletLoginError","notConnectedError","chainNamespace","status","ADAPTER_STATUS","CONNECTED","request","method","accounts","length","existingToken","getSavedToken","name","checkIfTokenIsExpired","idToken","payload","domain","window","location","origin","uri","href","address","parseInt","version","nonce","Math","random","toString","slice","issuedAt","Date","toISOString","signChallenge","challenge","signedMessage","verifySignedChallenge","sessionTime","saveToken","disconnectionError","clearToken","BaseAdapter","WALLET_CONNECT_EXTENSION_ADAPTERS","chains","CHAIN_NAMESPACES","EIP155","logo","mobile","native","universal","desktop","WalletConnectV1Adapter","options","WALLET_ADAPTERS","WALLET_CONNECT_V1","ADAPTER_NAMESPACES","ADAPTER_CATEGORY","EXTERNAL","NOT_READY","extensionAdapters","adapterOptions","connector","connected","wcProvider","_","Error","getChainConfig","getWalletConnectInstance","WalletConnectProvider","config","emit","ADAPTER_EVENTS","READY","log","debug","rehydrated","onConnectHandler","WalletInitializationError","notReady","CONNECTING","adapterSettings","qrcodeModal","skipLookupNetwork","skipNetworkSwitching","createNewSession","adapter","Promise","resolve","reject","on","error","ERRORED","Web3AuthError","connectionError","message","cleanup","killSession","DISCONNECTED","networkSwitch","networkSwitchModal","addNetwork","appOrigin","hostname","addChain","connectedChainConfig","switchNetwork","currentChainConfig","newChainConfig","switchChain","lookup","opts","forceNewSession","pending","createSession","err","updateAdapterData","off","catch","invalidParams","displayName","isCustomUi","fromCode","setupProvider","subscribeEvents","reconnected","walletConnectOptions","bridge","WalletConnect"],"mappings":"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","file":"static/js/17.b5e21ff6.chunk.js","sourcesContent":["import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport { WalletLoginError, saveToken, verifySignedChallenge, signChallenge, getSavedToken, checkIfTokenIsExpired, ADAPTER_STATUS, clearToken, BaseAdapter } from '@web3auth/base';\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar BaseEvmAdapter = /*#__PURE__*/function (_BaseAdapter) {\n  _inherits(BaseEvmAdapter, _BaseAdapter);\n\n  var _super = _createSuper(BaseEvmAdapter);\n\n  function BaseEvmAdapter() {\n    var _this;\n\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, BaseEvmAdapter);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"clientId\", void 0);\n\n    _this.clientId = params.clientId;\n    return _this;\n  }\n\n  _createClass(BaseEvmAdapter, [{\n    key: \"authenticateUser\",\n    value: function () {\n      var _authenticateUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this$chainConfig;\n\n        var _this$chainConfig2, chainNamespace, chainId, accounts, existingToken, isExpired, payload, challenge, signedMessage, idToken;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!this.provider || !((_this$chainConfig = this.chainConfig) !== null && _this$chainConfig !== void 0 && _this$chainConfig.chainId))) {\n                  _context.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError();\n\n              case 2:\n                _this$chainConfig2 = this.chainConfig, chainNamespace = _this$chainConfig2.chainNamespace, chainId = _this$chainConfig2.chainId;\n\n                if (!(this.status !== ADAPTER_STATUS.CONNECTED)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 5:\n                _context.next = 7;\n                return this.provider.request({\n                  method: \"eth_accounts\"\n                });\n\n              case 7:\n                accounts = _context.sent;\n\n                if (!(accounts && accounts.length > 0)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                existingToken = getSavedToken(accounts[0], this.name);\n\n                if (!existingToken) {\n                  _context.next = 14;\n                  break;\n                }\n\n                isExpired = checkIfTokenIsExpired(existingToken);\n\n                if (isExpired) {\n                  _context.next = 14;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  idToken: existingToken\n                });\n\n              case 14:\n                payload = {\n                  domain: window.location.origin,\n                  uri: window.location.href,\n                  address: accounts[0],\n                  chainId: parseInt(chainId, 16),\n                  version: \"1\",\n                  nonce: Math.random().toString(36).slice(2),\n                  issuedAt: new Date().toISOString()\n                };\n                _context.next = 17;\n                return signChallenge(payload, chainNamespace);\n\n              case 17:\n                challenge = _context.sent;\n                _context.next = 20;\n                return this.provider.request({\n                  method: \"personal_sign\",\n                  params: [challenge, accounts[0]]\n                });\n\n              case 20:\n                signedMessage = _context.sent;\n                _context.next = 23;\n                return verifySignedChallenge(chainNamespace, signedMessage, challenge, this.name, this.sessionTime, this.clientId);\n\n              case 23:\n                idToken = _context.sent;\n                saveToken(accounts[0], this.name, idToken);\n                return _context.abrupt(\"return\", {\n                  idToken: idToken\n                });\n\n              case 26:\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 27:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function authenticateUser() {\n        return _authenticateUser.apply(this, arguments);\n      }\n\n      return authenticateUser;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var accounts;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(this.status !== ADAPTER_STATUS.CONNECTED)) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.disconnectionError(\"Not connected with wallet\");\n\n              case 2:\n                _context2.next = 4;\n                return this.provider.request({\n                  method: \"eth_accounts\"\n                });\n\n              case 4:\n                accounts = _context2.sent;\n\n                if (accounts && accounts.length > 0) {\n                  clearToken(accounts[0], this.name);\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }]);\n\n  return BaseEvmAdapter;\n}(BaseAdapter);\n\nexport { BaseEvmAdapter };\n//# sourceMappingURL=baseEvmAdapter.esm.js.map\n","import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport WalletConnect from '@walletconnect/client';\nimport { CHAIN_NAMESPACES, WALLET_ADAPTERS, ADAPTER_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, getChainConfig, ADAPTER_EVENTS, log, WalletInitializationError, Web3AuthError, WalletLoginError } from '@web3auth/base';\nimport { BaseEvmAdapter } from '@web3auth/base-evm-adapter';\nimport { WalletConnectProvider } from '@web3auth/ethereum-provider';\n\nvar WALLET_CONNECT_EXTENSION_ADAPTERS = [{\n  name: \"Rainbow\",\n  chains: [CHAIN_NAMESPACES.EIP155],\n  logo: \"https://images.web3auth.io/login-rainbow.svg\",\n  mobile: {\n    native: \"rainbow:\",\n    universal: \"https://rnbwapp.com\"\n  },\n  desktop: {\n    native: \"\",\n    universal: \"\"\n  }\n}, {\n  name: \"MetaMask\",\n  chains: [CHAIN_NAMESPACES.EIP155],\n  logo: \"https://images.web3auth.io/login-metamask.svg\",\n  mobile: {\n    native: \"metamask:\",\n    universal: \"https://metamask.app.link\"\n  },\n  desktop: {\n    native: \"\",\n    universal: \"\"\n  }\n}];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar WalletConnectV1Adapter = /*#__PURE__*/function (_BaseEvmAdapter) {\n  _inherits(WalletConnectV1Adapter, _BaseEvmAdapter);\n\n  var _super = _createSuper(WalletConnectV1Adapter);\n\n  function WalletConnectV1Adapter(options) {\n    var _this;\n\n    _classCallCheck(this, WalletConnectV1Adapter);\n\n    _this = _super.call(this, options);\n\n    _defineProperty(_assertThisInitialized(_this), \"name\", WALLET_ADAPTERS.WALLET_CONNECT_V1);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterOptions\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterData\", {\n      uri: \"\",\n      extensionAdapters: WALLET_CONNECT_EXTENSION_ADAPTERS\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"connector\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"wcProvider\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"rehydrated\", false);\n\n    _this.adapterOptions = _objectSpread({}, options);\n    _this.chainConfig = options.chainConfig || null;\n    _this.sessionTime = options.sessionTime || 86400;\n    return _this;\n  }\n\n  _createClass(WalletConnectV1Adapter, [{\n    key: \"connected\",\n    get: function get() {\n      var _this$connector;\n\n      return !!((_this$connector = this.connector) !== null && _this$connector !== void 0 && _this$connector.connected);\n    }\n  }, {\n    key: \"provider\",\n    get: function get() {\n      var _this$wcProvider;\n\n      return ((_this$wcProvider = this.wcProvider) === null || _this$wcProvider === void 0 ? void 0 : _this$wcProvider.provider) || null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"checkInitializationRequirements\", this).call(this);\n\n                if (!this.chainConfig) {\n                  this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n                } // Create a connector\n\n\n                this.connector = this.getWalletConnectInstance();\n                this.wcProvider = new WalletConnectProvider({\n                  config: {\n                    chainConfig: this.chainConfig\n                  },\n                  connector: this.connector\n                });\n                this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.WALLET_CONNECT_V1);\n                this.status = ADAPTER_STATUS.READY;\n                log.debug(\"initializing wallet connect v1 adapter\");\n\n                if (!this.connector.connected) {\n                  _context.next = 11;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 11;\n                return this.onConnectHandler({\n                  accounts: this.connector.accounts,\n                  chainId: this.connector.chainId\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this2 = this;\n\n        var _this$adapterOptions$, _this$adapterOptions$2;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"checkConnectionRequirements\", this).call(this);\n\n                if (this.connector) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                if (!this.connected) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                _context4.next = 6;\n                return this.onConnectHandler({\n                  accounts: this.connector.accounts,\n                  chainId: this.connector.chainId\n                });\n\n              case 6:\n                return _context4.abrupt(\"return\", this.provider);\n\n              case 7:\n                if (!(this.status !== ADAPTER_STATUS.CONNECTING)) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                // for wallet connect qr code modal we have to create a new connector, coz wallet connect internally does not open\n                // modal again on existing instance if connection is pending.\n                if ((_this$adapterOptions$ = this.adapterOptions.adapterSettings) !== null && _this$adapterOptions$ !== void 0 && _this$adapterOptions$.qrcodeModal) {\n                  this.connector = this.getWalletConnectInstance();\n                  this.wcProvider = new WalletConnectProvider({\n                    config: {\n                      chainConfig: this.chainConfig,\n                      // network switching can be skipped with custom ui\n                      skipLookupNetwork: (_this$adapterOptions$2 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$2 === void 0 ? void 0 : _this$adapterOptions$2.skipNetworkSwitching\n                    },\n                    connector: this.connector\n                  });\n                }\n\n                _context4.next = 11;\n                return this.createNewSession();\n\n              case 11:\n                this.status = ADAPTER_STATUS.CONNECTING;\n                this.emit(ADAPTER_EVENTS.CONNECTING, {\n                  adapter: WALLET_ADAPTERS.WALLET_CONNECT_V1\n                });\n\n              case 13:\n                return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  if (!_this2.connector) return reject(WalletInitializationError.notReady(\"Wallet adapter is not ready yet\")); // for wallet connect default modal.\n\n                  _this2.connector.on(\"modal_closed\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _this2.status = ADAPTER_STATUS.READY;\n\n                            _this2.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.WALLET_CONNECT_V1);\n\n                            return _context2.abrupt(\"return\", reject(new Error(\"User closed modal\")));\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  })));\n\n                  try {\n                    // Subscribe to session connection\n                    _this2.connector.on(\"connect\", /*#__PURE__*/function () {\n                      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(error, payload) {\n                        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                          while (1) {\n                            switch (_context3.prev = _context3.next) {\n                              case 0:\n                                if (error) {\n                                  _this2.emit(ADAPTER_EVENTS.ERRORED, error);\n                                }\n\n                                log.debug(\"connected event emitted by web3auth\");\n                                _context3.next = 4;\n                                return _this2.onConnectHandler(payload.params[0]);\n\n                              case 4:\n                                return _context3.abrupt(\"return\", resolve(_this2.provider));\n\n                              case 5:\n                              case \"end\":\n                                return _context3.stop();\n                            }\n                          }\n                        }, _callee3);\n                      }));\n\n                      return function (_x, _x2) {\n                        return _ref2.apply(this, arguments);\n                      };\n                    }());\n                  } catch (error) {\n                    log.error(\"Wallet connect v1 adapter error while connecting\", error); // ready again to be connected\n\n                    _this2.status = ADAPTER_STATUS.READY;\n                    _this2.rehydrated = true;\n\n                    _this2.emit(ADAPTER_EVENTS.ERRORED, error);\n\n                    reject(error instanceof Web3AuthError ? error : WalletLoginError.connectionError(\"Failed to login with wallet connect: \".concat((error === null || error === void 0 ? void 0 : error.message) || \"\")));\n                  }\n                }));\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(options) {\n      if (this.status === ADAPTER_STATUS.READY) return;\n\n      if (options !== null && options !== void 0 && options.sessionTime) {\n        this.sessionTime = options.sessionTime;\n      }\n\n      if (options !== null && options !== void 0 && options.clientId) {\n        this.clientId = options.clientId;\n      }\n    }\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this.connected) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 2:\n                return _context5.abrupt(\"return\", {});\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var options,\n            cleanup,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {\n                  cleanup: false\n                };\n                cleanup = options.cleanup;\n\n                if (!(!this.connector || !this.connected)) {\n                  _context6.next = 4;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n\n              case 4:\n                _context6.next = 6;\n                return _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"disconnect\", this).call(this);\n\n              case 6:\n                _context6.next = 8;\n                return this.connector.killSession();\n\n              case 8:\n                this.rehydrated = false;\n\n                if (cleanup) {\n                  this.connector = null;\n                  this.status = ADAPTER_STATUS.NOT_READY;\n                  this.wcProvider = null;\n                } else {\n                  // ready to connect again\n                  this.status = ADAPTER_STATUS.READY;\n                }\n\n                this.emit(ADAPTER_EVENTS.DISCONNECTED);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"addChain\",\n    value: function () {\n      var _addChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(chainConfig) {\n        var _this$adapterOptions$3, networkSwitch;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n\n                if (this.wcProvider) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                networkSwitch = (_this$adapterOptions$3 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$3 === void 0 ? void 0 : _this$adapterOptions$3.networkSwitchModal;\n\n                if (!networkSwitch) {\n                  _context7.next = 7;\n                  break;\n                }\n\n                _context7.next = 7;\n                return networkSwitch.addNetwork({\n                  chainConfig: chainConfig,\n                  appOrigin: window.location.hostname\n                });\n\n              case 7:\n                _context7.next = 9;\n                return this.wcProvider.addChain(chainConfig);\n\n              case 9:\n                _context7.next = 14;\n                break;\n\n              case 11:\n                _context7.prev = 11;\n                _context7.t0 = _context7[\"catch\"](0);\n                log.error(_context7.t0);\n\n              case 14:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 11]]);\n      }));\n\n      function addChain(_x3) {\n        return _addChain.apply(this, arguments);\n      }\n\n      return addChain;\n    }()\n  }, {\n    key: \"switchChain\",\n    value: function () {\n      var _switchChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(connectedChainConfig, chainConfig) {\n        var _this$adapterOptions$4;\n\n        var networkSwitch;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (this.wcProvider) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 2:\n                networkSwitch = (_this$adapterOptions$4 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$4 === void 0 ? void 0 : _this$adapterOptions$4.networkSwitchModal;\n\n                if (!networkSwitch) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                _context8.next = 6;\n                return networkSwitch.switchNetwork({\n                  currentChainConfig: chainConfig,\n                  newChainConfig: connectedChainConfig,\n                  appOrigin: window.location.hostname\n                });\n\n              case 6:\n                _context8.next = 8;\n                return this.wcProvider.switchChain({\n                  chainId: chainConfig.chainId,\n                  lookup: false,\n                  addChain: false\n                });\n\n              case 8:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function switchChain(_x4, _x5) {\n        return _switchChain.apply(this, arguments);\n      }\n\n      return switchChain;\n    }()\n  }, {\n    key: \"createNewSession\",\n    value: function () {\n      var _createNewSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var _this$adapterOptions,\n            _this$adapterOptions$5,\n            _this3 = this;\n\n        var opts,\n            _this$chainConfig,\n            _args10 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                opts = _args10.length > 0 && _args10[0] !== undefined ? _args10[0] : {\n                  forceNewSession: false\n                };\n\n                if (this.connector) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                if (!(opts.forceNewSession && this.connector.pending)) {\n                  _context10.next = 6;\n                  break;\n                }\n\n                _context10.next = 6;\n                return this.connector.killSession();\n\n              case 6:\n                if (!((_this$adapterOptions = this.adapterOptions) !== null && _this$adapterOptions !== void 0 && (_this$adapterOptions$5 = _this$adapterOptions.adapterSettings) !== null && _this$adapterOptions$5 !== void 0 && _this$adapterOptions$5.qrcodeModal)) {\n                  _context10.next = 10;\n                  break;\n                }\n\n                _context10.next = 9;\n                return this.connector.createSession({\n                  chainId: parseInt(((_this$chainConfig = this.chainConfig) === null || _this$chainConfig === void 0 ? void 0 : _this$chainConfig.chainId) || \"0x1\", 16)\n                });\n\n              case 9:\n                return _context10.abrupt(\"return\");\n\n              case 10:\n                return _context10.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var _this3$chainConfig;\n\n                  if (!_this3.connector) return reject(WalletInitializationError.notReady(\"Wallet adapter is not ready yet\"));\n                  log.debug(\"creating new session for web3auth wallet connect\");\n\n                  _this3.connector.on(\"display_uri\", /*#__PURE__*/function () {\n                    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(err, payload) {\n                      var _this3$connector;\n\n                      var uri;\n                      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                        while (1) {\n                          switch (_context9.prev = _context9.next) {\n                            case 0:\n                              if (!err) {\n                                _context9.next = 3;\n                                break;\n                              }\n\n                              _this3.emit(ADAPTER_EVENTS.ERRORED, WalletLoginError.connectionError(\"Failed to display wallet connect qr code\"));\n\n                              return _context9.abrupt(\"return\", reject(err));\n\n                            case 3:\n                              uri = payload.params[0];\n\n                              _this3.updateAdapterData({\n                                uri: uri,\n                                extensionAdapters: WALLET_CONNECT_EXTENSION_ADAPTERS\n                              });\n\n                              (_this3$connector = _this3.connector) === null || _this3$connector === void 0 ? void 0 : _this3$connector.off(\"display_uri\");\n                              return _context9.abrupt(\"return\", resolve());\n\n                            case 7:\n                            case \"end\":\n                              return _context9.stop();\n                          }\n                        }\n                      }, _callee9);\n                    }));\n\n                    return function (_x6, _x7) {\n                      return _ref3.apply(this, arguments);\n                    };\n                  }());\n\n                  _this3.connector.createSession({\n                    chainId: parseInt(((_this3$chainConfig = _this3.chainConfig) === null || _this3$chainConfig === void 0 ? void 0 : _this3$chainConfig.chainId) || \"0x1\", 16)\n                  }).catch(function (error) {\n                    log.error(\"error while creating new wallet connect session\", error);\n\n                    _this3.emit(ADAPTER_EVENTS.ERRORED, error);\n\n                    return reject(error);\n                  });\n                }));\n\n              case 11:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function createNewSession() {\n        return _createNewSession.apply(this, arguments);\n      }\n\n      return createNewSession;\n    }()\n  }, {\n    key: \"onConnectHandler\",\n    value: function () {\n      var _onConnectHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(params) {\n        var chainId, _this$adapterOptions$6, _this$adapterOptions2, _this$adapterOptions3, connectedChainConfig, isCustomUi;\n\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!(!this.connector || !this.wcProvider)) {\n                  _context11.next = 2;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 2:\n                if (this.chainConfig) {\n                  _context11.next = 4;\n                  break;\n                }\n\n                throw WalletInitializationError.invalidParams(\"Chain config is not set\");\n\n              case 4:\n                chainId = params.chainId;\n                log.debug(\"connected chainId in hex\");\n\n                if (!(chainId !== parseInt(this.chainConfig.chainId, 16))) {\n                  _context11.next = 27;\n                  break;\n                }\n\n                connectedChainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, chainId) || {\n                  chainId: \"0x\".concat(chainId.toString(16)),\n                  displayName: \"Unknown Network\"\n                };\n                isCustomUi = (_this$adapterOptions$6 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$6 === void 0 ? void 0 : _this$adapterOptions$6.qrcodeModal; // skipping network is not allowed in default ui. We are use network switching modal for default ui.\n\n                if (!(!isCustomUi || isCustomUi && !((_this$adapterOptions2 = this.adapterOptions) !== null && _this$adapterOptions2 !== void 0 && (_this$adapterOptions3 = _this$adapterOptions2.adapterSettings) !== null && _this$adapterOptions3 !== void 0 && _this$adapterOptions3.skipNetworkSwitching))) {\n                  _context11.next = 27;\n                  break;\n                }\n\n                _context11.prev = 10;\n                _context11.next = 13;\n                return this.addChain(this.chainConfig);\n\n              case 13:\n                _context11.next = 15;\n                return this.switchChain(connectedChainConfig, this.chainConfig);\n\n              case 15:\n                this.connector = this.getWalletConnectInstance();\n                _context11.next = 27;\n                break;\n\n              case 18:\n                _context11.prev = 18;\n                _context11.t0 = _context11[\"catch\"](10);\n                log.error(\"error while chain switching\", _context11.t0); // we need to create a new session since old session is already used and\n                // user needs to login again with correct chain with new qr code.\n\n                _context11.next = 23;\n                return this.createNewSession({\n                  forceNewSession: true\n                });\n\n              case 23:\n                this.emit(ADAPTER_EVENTS.ERRORED, WalletInitializationError.fromCode(5000, \"Not connected to correct network. Expected: \".concat(this.chainConfig.displayName, \", Current: \").concat((connectedChainConfig === null || connectedChainConfig === void 0 ? void 0 : connectedChainConfig.displayName) || chainId, \", Please switch to correct network from wallet\")));\n                this.status = ADAPTER_STATUS.READY;\n                this.rehydrated = true;\n                return _context11.abrupt(\"return\");\n\n              case 27:\n                _context11.next = 29;\n                return this.wcProvider.setupProvider(this.connector);\n\n              case 29:\n                this.subscribeEvents(this.connector);\n                this.status = ADAPTER_STATUS.CONNECTED;\n                this.emit(ADAPTER_EVENTS.CONNECTED, {\n                  adapter: WALLET_ADAPTERS.WALLET_CONNECT_V1,\n                  reconnected: this.rehydrated\n                });\n\n              case 32:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[10, 18]]);\n      }));\n\n      function onConnectHandler(_x8) {\n        return _onConnectHandler.apply(this, arguments);\n      }\n\n      return onConnectHandler;\n    }()\n  }, {\n    key: \"subscribeEvents\",\n    value: function subscribeEvents(connector) {\n      var _this4 = this;\n\n      connector.on(\"session_update\", /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(error) {\n          return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  if (error) {\n                    _this4.emit(ADAPTER_EVENTS.ERRORED, error);\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, _callee12);\n        }));\n\n        return function (_x9) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"getWalletConnectInstance\",\n    value: function getWalletConnectInstance() {\n      var walletConnectOptions = this.adapterOptions.adapterSettings || {};\n      walletConnectOptions.bridge = walletConnectOptions.bridge || \"https://bridge.walletconnect.org\"; // Create a connector\n\n      return new WalletConnect(walletConnectOptions);\n    }\n  }]);\n\n  return WalletConnectV1Adapter;\n}(BaseEvmAdapter);\n\nexport { WalletConnectV1Adapter };\n//# sourceMappingURL=walletConnectV1Adapter.esm.js.map\n",null],"sourceRoot":""}